import{i as Oe,r as ze,a as He,b as wt,c as ct,d as Ge,e as _t,f as Rt,g as St,h as Et,j as Nt,k as Mt,l as Ot,m as Bt,n as Dt}from"./index-CaVjkzKh.js";function Gt(ge,de){for(var Ae=0;Ae<de.length;Ae++){const P=de[Ae];if(typeof P!="string"&&!Array.isArray(P)){for(const Ce in P)if(Ce!=="default"&&!(Ce in ge)){const D=Object.getOwnPropertyDescriptor(P,Ce);D&&Object.defineProperty(ge,Ce,D.get?D:{enumerable:!0,get:()=>P[Ce]})}}}return Object.freeze(Object.defineProperty(ge,Symbol.toStringTag,{value:"Module"}))}var Je={},We={},nt={},Xe={},Ue={},ht;function ut(){if(ht)return Ue;ht=1,Ue.__esModule=!0,Ue.default=void 0;var ge="plot",de="final",Ae=[{initialAttr:function(){return{opacity:0}},finalAttr:function(){return{opacity:1}}}],P=function(){return Ae[0].slot=ge,Ae},Ce=function(B){return[{finalAttr:function(){return B.finalAttr}}]},D=function(){return Ae[0].slot=de,Ae},R=function(){return[{initialAttr:{opacity:0},finalAttr:{opacity:1},slot:"final"}]},d=function(){return Ae[0].slot=de,Ae},Fe=function(B){return[{finalAttr:function(){return B.finalAttr}}]},ie=function(B){return[{initialAttr:function(){return Object.assign({opacity:0},B.attr)},finalAttr:function(){return B.attr},slot:"plot"}]},z=function(B){return[{initialAttr:function(){return Object.assign({opacity:0},B.attr)},finalAttr:function(){return B.attr},slot:"plot"}]},oe={"initial.dataset.entities":function(){return{"path.appearing":P,"path.updating":Ce,"labelConnectors.appearing":D,"labelConnectors.updating":null,"entityLabel.appearing":R,"*":null}},"initial.dataset.markers":function(){return{markers:null,"markerItem.appearing":d,"markerItem.updating":Fe}},"initial.group.mapGroup":function(){return{"group.appearing":ie,"group.updating":z,"*":null}}};return Ue.default=oe,Ue}var it={},ft;function Vt(){if(ft)return it;ft=1,it.__esModule=!0,it.default=ge;function ge(de){var Ae=window,P,Ce=Ae.parseFloat,D="array",R="",d=",",Fe=" ",ie="none",z=de._createNode,oe=de._setFillAndStroke,O=de.el.constructor,B="litepath",j="position:absolute;left:0;top:0;width:21600px;height:21600px;",Y="21600 21600",W={Q:"L",Z:"X",q:"l",z:"x",",":" "},J=/,?([achlmqrstvxz]),?/gi,X,E=function(){return this.join(d).replace(J,X)},ee,le;de.svg?(X="$1",ee=function(){var U=this,ae=de.is(arguments[0],D)?arguments[0]:Array.prototype.slice.call(arguments);ae?typeof ae=="string"?ae=ae.replace(J,X):ae.toString=E:ae="M0,0",U.node.setAttribute("d",ae.toString())},de._engine.litepath=function(G,U,ae,re,fe){var me=z("path"),he;return(re||U).canvas.appendChild(me),he=new O(me,U,re),he.type=B,he.id=me.raphaelid=de._oid++,me.raphael=!0,oe(he,fe||{fill:ie,stroke:"#000"}),he},de._getPath.litepath=function(G){return de.parsePathString(G.node.getAttribute("d"))}):de.vml&&(X=function(U,ae){return W[ae]||ae},le=function(){var U=this;return U._transform.apply(U,arguments),U._.bcoord&&(U.node.coordsize=U._.bcoord),U},ee=function(U){var ae=this,re=U;return re?typeof re=="string"?re=re.replace(J,X):re.toString=E:re="M0,0",ae.node.path=re,ae},de._engine.litepath=function(G,U,ae,re,fe){var me=z("shape"),he=me.style,ne=new O(me,U,re),pe=fe||{fill:ie,stroke:"#000"},be,ue=ae;return he.cssText=j,ue=Ce(ue),isNaN(ue)?me.coordsize=Y:(ne._.bzoom=ue,he.width="1px",he.height="1px",me.coordsize=ne._.bcoord=ue+Fe+ue),me.coordorigin=U.coordorigin,ne.type=B,ne.id=me.raphaelid=de._oid++,me.raphael=!0,ne._transform=ne.transform,ne.transform=le,de._setFillAndStroke(ne,pe),(re||U).canvas.appendChild(me),be=z("skew"),be.on=!0,me.appendChild(be),ne.skew=be,ne},de._getPath.litepath=function(G){return de.parsePathString(G.node.path||R)}),de.fn[B]=function(G,U,ae){var re=this,fe,me,he,ne=G,pe=U,be=ae;return typeof ne=="object"&&ne.constructor!==O&&(fe=ne,ne=ne.litepath,me=ne.zoom,be=ne.group),pe&&pe.constructor===O?(be=pe,me=P):me=pe,ne&&ne.constructor===O&&(be=ne,ne=R),he=de._engine[B](ne,this,me,be,fe),he.ca[B]=ee,ne&&he.attr(B,de.is(ne,D)?[ne]:ne),re.__set__&&this.__set__.push(he),re._elementsById[he.id]=he}}return it}var pt;function Tt(){if(pt)return Xe;pt=1;var ge=Oe;Xe.__esModule=!0,Xe.default=void 0;var de=ge(ze()),Ae=He(),P=ge(wt()),Ce=ct(),D=ge(ut()),R=Ge(),d=_t(),Fe=ge(Vt()),ie=(0,Ce.getDep)("redraphael","plugin"),z,oe=window.navigator.userAgent,O=/msie/i.test(oe)&&!window.opera,B=",",j="",Y="top",W="bottom",J="right",X="left",E="middle",ee="center",le="entityLabel",G="text",U="crisp",ae=window.Math,re=ae.min,fe=ae.max,me=/stroke/gi,he=/AppleWebKit/.test(oe),ne=ae.ceil,pe=function(T,v){var x={FCcolor:T};return x.toString=R.toRaphaelColor,x},be=function(T,v){var x,p={},r;if(r=v||1,!T||typeof T!="object")return p;for(x in T)me.test(x)||(x==="stroke-width"?(p[x]=Number(T[x])/r,he&&(p[x]=p[x]&&ne(p[x])||0)):p[x]=T[x]);return p},ue={right:function(){return arguments[1]},left:function(T,v){return T-v},center:function(T,v){return re(v,T-v)*2}},Pe={top:function(){return arguments[1]},middle:function(T,v){return re(v,T-v)*2},bottom:function(T,v){return T-v}},we=function(T,v){T&&T.graphics.outlines.attr(v)},Z=function(T){for(var v=T&&T.length||0,x={},p;v--;)p=T[v],p.id!==z&&(x[p.id.toLowerCase()]=p);return x};(0,Ce.addDep)({name:"mapsAnimation",type:"animationRule",extension:D.default}),(0,Fe.default)(ie);var K=function(H){(0,de.default)(T,H);function T(){var x;return x=H.call(this)||this,x.components={},x}var v=T.prototype;return v.getName=function(){return"entities"},v.getType=function(){return"dataset"},v.configureAttributes=function(p){if(p){this.JSONData={data:p};var r=this,y=r.getFromEnv("chart"),w=y.jsonData,I=r.config,S=w.map||w.chart,L,F,h,i,c,n=[],l,o,e,t=r.getFromEnv("colorManager"),s=w.entitydef||[];!I.attachEvent&&t&&(r.addExtEventListener("legendUpdate",function(){if(e=arguments[1],e.component==="legend")r.legendInteractivity(e.legendItem,e.colorObj);else for(n=e.maxMinArray,l=n.length,o=0;o<l;o++)r.updateEntityColors(n[o].min,n[o].max)},t),I.attachEvent=!0),w.data&&w.data[0]&&w.data[0].data?L=r.JSONData=w.data[0].data||[]:L=r.JSONData=w.data||[],I.useSNameAsId=(0,R.pluckNumber)(S.usesnameasid,0),this._redefineEntities(s),F=r.components.data,I.showTooltip=(0,R.pluckNumber)(S.showtooltip,1),I.showHoverEffect=(0,R.pluckNumber)(S.showhovereffect,0),L=Z(L),r.calculateDataLimits(),!w.colorrange&&r._detachChild(r.getChildren("colorRange")&&r.getChildren("colorRange")[0]);for(c in F)h=L[c],i=F[c],h?this._configureEntity(c,i,(0,R.imprint)(T._sanitizeEntityOptions((0,R.extend2)({},h)),i.config)):this._configureEntity(c,i,i.config)}},v.updateEntityColors=function(p,r){var y=this,w=y.components.data,I=y.getFromEnv("chart"),S=I.config.entityOpts,L=S.nullEntityAlpha,F=S.nullEntityColor,h,i,c,n,l,o,e=pe({fill:F,alpha:L}),t={"fill-opacity":0};for(n in w)w.hasOwnProperty(n)&&(h=w[n],i=h.config,c=i.cleanValue,l=i.alphaArr||[],o={"fill-opacity":l[0]/100||1},c==null?(we(h,e),h.hidden=!1):c<p||c>r?(we(h,t),h.hidden=!0):(we(h,o),h.hidden=!1))},v.legendInteractivity=function(p,r){var y=this,w=y.getFromEnv("chart"),I=y.components.data,S,L,F=p.config,h=p.hasState("hidden"),i,c=y.getFromEnv("colorManager"),n,l={},o,e={"fill-opacity":0},t;w.getFromEnv("animationManager").setAnimationState("legendInteraction");for(S in I)I.hasOwnProperty(S)&&(L=I[S],F=L.config,i=F.cleanValue,t=c.getColorObj(i),n=F.visibleEntityAttr,l["fill-opacity"]=n["fill-opacity"],o=h?l:e,r.code===(!t.outOfRange&&t.code)&&(L.hidden=!h,we(L,o),h?p&&p.removeLegendState("hidden"):p.setLegendState("hidden")))},v.calculateDataLimits=function(){var p=this,r=p.getFromEnv("chart"),y=p.config,w=r.jsonData,I=w.data||[],S=this.getFromEnv("number-formatter"),L,F,h=1/0,i=-1/0,c,n;for(n=0,c=I.length;n<c;n++)F=I[n].value,L=S.getCleanValue(F),h=re(h,L),i=fe(i,L);y.max=i,y.min=h},v._configureEntity=function(p,r,y){var w=this,I=w.getFromEnv("chart"),S=w.config,L=this.getFromEnv("number-formatter"),F=I.config,h=F.entityOpts,i=r.config,c=r.labelConfig,n=y.value,l=i.cleanValue=L.getCleanValue(n),o=i.formattedValue=l!==z?L.dataLabels(l):z,e=(0,R.pluckNumber)(y.showtooltip,h.showTooltip),t=this._getDefaultTooltip(r,y,w),s={formattedValue:o,sName:y.shortLabel,lName:y.label},a=h.dataLabels.style,g=i.toolText=e?(0,R.parseUnsafeString)((0,R.pluck)((0,R.parseTooltext)((0,R.pluck)(y.tooltext,h.tooltext,t),[1,2,7,38,39],s,y)),!1):j,m=i.borderColor=(0,R.pluck)(y.bordercolor,h.borderColor),u=i.borderAlpha=(0,R.pluck)(y.borderalpha,h.borderAlpha),f=i.borderThickness=(0,R.pluckNumber)(y.borderthickness,h.borderThickness),k=h.hoverOnNull,b=i.useHoverColor=(0,R.pluckNumber)(y.showhovereffect,y.usehovercolor,k?h.showHoverEffect:isNaN(n)?0:h.showHoverEffect),C=i.labelAlignment,A=w.getFromEnv("colorManager"),_,N,M,$,V,Q,te,se,ye,ce,ve,Se,Re,Ie,ke,Te,Ee,xe,Le,_e,Ne,Me;if(r.hidden=!1,i.showLabel=(0,R.pluckNumber)(y.showlabel,h.showLabels),i.labelPadding=(0,R.pluckNumber)(y.labelpadding,h.labelPadding),i.fontFamily=(0,R.pluck)(y.font,a.fontFamily),i.fontSize=(0,R.pluckNumber)(parseInt(y.fontsize,10),parseInt(a.fontSize,10)),i.fontBold=(0,R.pluckNumber)(y.fontbold,0),i.fontColor=(0,R.pluck)(y.labelcolor,y.fontcolor,a.color),i.labelBgColor=(0,R.pluck)(y.labelbgcolor,a.bgColor)||j,i.labelBorderColor=(0,R.pluck)(y.labelbordercolor,a.borderColor)||j,i.connectorColor=(0,R.pluck)(y.labelconnectorcolor,h.connectorColor),i.connectorAlpha=(0,R.pluck)(y.labelconnectoralpha,h.connectorAlpha),i.hoverBorderThickness=(0,R.pluckNumber)(y.borderhoverthickness,y.hoverborderthickness,h.hoverBorderThickness),i.hoverBorderColor=(0,R.pluck)(y.borderhovercolor,y.hoverbordercolor,h.hoverBorderColor,i.borderColor),i.hoverBorderAlpha=(0,R.pluck)(y.borderhoveralpha,y.hoverborderalpha,h.hoverBorderAlpha,i.borderAlpha),i.connectorThickness=(0,R.pluckNumber)(y.labelconnectorthickness,h.connectorThickness),i.origConnectorThickness=i.connectorThickness,i.borderThickness=f,i.link=y.link,i.isVisible=!0,i.id=p,i.originalId=y.origId,l!==null&&(_=A&&A.getColor(l),_&&!_.outOfRange&&(Te=_.code,_.oriAlpha!==z&&(Ee=_.oriAlpha+""))),(0,R.pluck)(y.color,y.alpha,y.angle,y.ratio)!==z?(V=(0,R.pluck)(y.color,Te,h.fillColor),Q=(0,R.pluck)(y.alpha,Ee,h.fillAlpha),te=(0,R.pluck)(y.angle,h.fillAngle),se=(0,R.pluck)(y.ratio,h.fillRatio),ye=pe({color:V,alpha:Q,angle:te,ratio:se})):(Ie=pe({color:(0,R.pluck)(Te,h.fillColor),alpha:(0,R.pluck)(Ee,h.fillAlpha),angle:(0,R.pluck)(h.fillAngle),ratio:(0,R.pluck)(h.fillRatio)}),Re=pe({color:(0,R.pluck)(h.nullEntityColor),alpha:(0,R.pluck)(h.nullEntityAlpha),angle:(0,R.pluck)(h.nullEntityAngle),ratio:(0,R.pluck)(h.nullEntityRatio)}),ye=l===null?Re:Ie,V=ye.FCcolor.color,Q=ye.FCcolor.alpha,te=ye.FCcolor.angle,se=ye.FCcolor.ratio),g===j&&(S.showTooltip=0),i.visibleEntityAttr={stroke:(0,R.convertColor)(m,u),fill:(i.fillColor=ye).toString(),"fill-opacity":Q/100},Me=Q.split(B),i.alphaArr=Me,b&&((0,R.pluck)(y.fillhovercolor,y.fillhoveralpha,y.fillhoverangle,y.fillhoverratio,y.hoverfillcolor,y.hoverfillalpha,y.hoverfillratio,y.hoverfillangle)!==z?(V=(0,R.pluck)(y.fillhovercolor,y.hoverfillcolor,h.hoverFillColor),Q=(0,R.pluck)(y.fillhoveralpha,y.hoverfillalpha,h.hoverFillAlpha),te=(0,R.pluck)(y.fillhoverangle,y.hoverfillangle,h.hoverFillAngle),se=(0,R.pluck)(y.fillhoverratio,y.hoverfillratio,h.hoverFillRatio),ke=pe({color:V,alpha:Q,angle:te,ratio:se})):(h.hoverColorObject||(h.hoverColorObject=pe({color:h.hoverFillColor,alpha:h.hoverFillAlpha,angle:h.hoverFillAngle,ratio:h.hoverFillRatio})),ke=h.hoverColorObject),i.hoverColor=ke),!c&&(c=r.labelConfig={}),ce=i.fontColor,ve=i.fontFamily,Se=i.fontBold,g=i.toolText,N=i.link,C?(M=C[0],$=C[1]):(M=ee,$=E),c.align=M,c.vAlign=$,c.fontColor=ce,c.bgColor=i.labelBgColor,c.borderColor=i.labelBorderColor,c.fontFamily=ve,c.fontBold=Se,c.toolText=g,c.link=N,typeof i.options=="object")for(xe=i.entityLabels=i.entityLabels||[],_e=i.labels||[],Ne=_e.length;Ne--;)xe[Ne]||(xe[Ne]={config:{}}),c=xe[Ne].config,C=_e[Ne].labelAlignment,C?(M=C[0],$=C[1]):(M=ee,$=E),c.align=M,c.vAlign=$,c.displayValue=w.getDisplayValue(r,_e[Ne],i.options.isDataEnabled,!Ne,y),c.toolText=g,c.align=M,c.vAlign=$,c.bgColor=i.labelBgColor,c.borderColor=i.labelBorderColor,c.fontColor=ce,c.fontFamily=ve,c.fontBold=Se,c.toolText=g;else Le={shortText:i.shortLabel,text:i.label},c.displayValue=w.getDisplayValue(r,Le,!0,!0,y)},v.getDisplayValue=function(p,r,y,w,I){var S=this.getFromEnv("chart"),L=S.config.entityOpts,F=p.config,h=F.cleanValue,i=F.formattedValue,c=L.labelSepChar,n;return y?w&&typeof I.displayvalue<"u"?n=I.displayvalue:(n=(0,R.pluck)(L.includeNameInLabels?L.useShortName?r.shortText:r.text:""),L.includeValueInLabels&&h!==null&&(n=n===z?i:n+c+i)):n=F.label,n},T._sanitizeEntityOptions=function(p){return delete p.outlines,delete p.label,delete p.shortlabel,delete p.labelposition,delete p.labelalignment,delete p.labelconnectors,p},v._redefineEntities=function(p){var r=this,y=r.config,w=r.getFromEnv("chart"),I={},S={},L=w.config.entities,F=y.useSNameAsId,h,i,c,n,l,o,e,t,s=0,a,g,m,u;for(h=p.length;h--;)if(i=p[h],c=i.internalid,n=i.newid?i.newid:c,l=i.sname,o=i.lname,u=L[c],c=(0,R.trimString)(c),n=(0,R.trimString)(n),n=n&&n.toLowerCase(),u){I[n]=t={origId:c},S[c]=!0;for(m in u)t[m]=u[m];t.shortLabel=l||u.shortLabel,t.label=o||u.label,t.showhovereffect=i.showhovereffect,t.fillhovercolor=i.fillhovercolor,t.fillhoveralpha=i.fillhoveralpha,t.fillhoverangle=i.fillhoverangle,t.fillhoverratio=i.fillhoverratio,t.borderhoverthickness=i.borderhoverthickness}g=r.components.data,g||(g=r.components.data={});for(e in I)e=e.toLowerCase(),g[e]||(g[e]={config:{}}),g[e].config=I[e],s+=1;a=g;for(e in L)if(t=L[e],e=(0,R.trimString)(e),!S[e]){F?(u=a[t.shortLabel.toLowerCase()],u||(u=a[t.shortLabel.toLowerCase()]={}),u.config={},u.origId=t.shortLabel):(u=a[e.toLowerCase()],u||(u=a[e.toLowerCase()]={}),u.config={},u.config.origId=e);for(m in t)u.config[m]=t[m];s+=1}y.entityCount=s},v.draw=function(){var p=this,r=p.config,y=p.getFromEnv("chart"),w=R.hasSVG?200:10,I;p.createContainer(),this.config.ready=!1,r.BATCH_SIZE=w,r.labelBatchSize=R.hasSVG?200:20,I=this._batchRender(),I(0),y.config.entityFlag=!0,y.checkComplete()},v._batchRender=function(){var p=this,r=p.config,y=p.getFromEnv("chart"),w=y.config.entities.firstEntity,I=p.components.data,S=r.BATCH_SIZE,L=r.entityKeys=w?p._getKeys(w,I):Object.keys(I),F=r.entityLength=L.length,h,i,c,n,l,o=function e(t){for(h=t,c=0;L[h]!==z;)if(i=I[L[h]],l=p.drawEntity(i,S),c+=l,i.config.drawn&&(n=h===F-1?i:I[L[h-1]],n&&(n.config.drawn=!1,n.config.outlineStartIndex=z),h++),c>=S){p.addJob("entityDraw",e.bind(p,h),d.priorityList.entitydraw);break}h===F&&(p._addEventListenersToEntities(0),p.initComplete())};return o},v._addEventListenersToEntities=function(p){var r=this,y=r.components.data,w=r.config,I=w.BATCH_SIZE,S=w.entityKeys,L,F=w.entityLength,h,i=0,c,n;for(L=p;L<F;L++)if(h=y[S[L]],n=h.config,c=n.options,c&&c.isDataEnabled===!1||r.addMouseGestures(h),i++,i===I){r.addJob("_addEventListenersToEntities",r._addEventListenersToEntities.bind(this,L),d.priorityList.entitydraw);break}},T._getKeys=function(p,r){for(var y=[p],w=p;r[w];)w=r[w].nextId,y.push(w);return y},v._getDefaultTooltip=function(p,r){var y=this,w=p.config.cleanValue,I=p.config.formattedValue,S=y.getFromEnv("chart").config.entityOpts,L,F;if(typeof p.config.options=="object"){if(F=r.labels&&r.labels[0],!F)return z;L=(S.useSNameInTooltip?F.shortText:F.text)+(w===null?j:S.tooltipSepChar+I)}else L=(S.useSNameInTooltip?r.shortLabel:r.label)+(w===null?j:S.tooltipSepChar+I);return L},v.drawEntity=function(p,r){var y=this,w=y.getFromEnv("chart"),I=w.getFromEnv("animationManager"),S=p.config,L=R.hasSVG||!O?"litepath":"path",F=w.config.entityOpts,h=S.outlines,i=y.getFromEnv("toolTipController"),c=this.getLinkedParent().getChildContainer("plot"),n=this.getLinkedParent().getChildContainer("plotShadow"),l=S.toolText,o=F.shadow,e,t=[],s,a,g,m,u,f,k,b={},C;if(y._configureEntityDrawingParams(p),S=p.config,a=S.visibleEntityAttr,C=S.shadowOptions,e=S.outlineStartIndex===z?h.length:S.outlineStartIndex,p.graphics||(p.graphics={}),f=0,t=S.outlinePath||(S.outlinePath=[]),k=S.customStrokeWidthModifier,typeof S.options=="object"){for(;e--;)if(t=h[e].outline,S.options.isDataEnabled===!0?g=a:g=(0,R.extend2)((0,R.extend2)({},a),be(h[e].style,k)),m=p.graphics.outlines,m||(m=p.graphics.outlines=[]),!m[e]&&(m[e]={}),u=m[e].outline,g[L]=t,u=m[e].outline=I.setAnimation({el:L,container:c,attr:g,component:y,label:"path"}),u.shadow(o?C:!1,n),i.enableToolTip(u,l),f++,S.outlineStartIndex=e,f===r)return f;return S.drawn=!0,f}for(;e--;)if(s=h[e],t=s.concat(t),f++,S.outlineStartIndex=e,f===r)return S.outlinePath=t,f;return!p.graphics.outlines&&(a[L]=t),Object.assign(b,a,p.hidden&&{"fill-opacity":0}||{}),p.graphics.outlines=I.setAnimation({el:p.graphics.outlines||L,container:c,attr:b,component:y,label:"path"}),S.drawn=!0,S.outlineStartIndex=0,S.outlinePath=[],p.graphics.outlines.shadow(o?C:!1,n),i.enableToolTip(p.graphics.outlines,l),f},v._configureEntityDrawingParams=function(p){var r=this,y=r.getFromEnv("chart"),w=p.config,I=y.config.entityOpts,S=y.config.scalingParams,L=!O||R.hasSVG,F=S.scaleFactor,h=S.strokeWidth,i=(L?y.baseScaleFactor:1)*h,c=I.scaleBorder===1,n=w.borderThickness,l=w.alphaArr,o=w.origConnectorThickness,e=w.hoverBorderThickness,t=w.visibleEntityAttr,s=t["fill-opacity"],a;w.shadowOptions={scalefactor:[F,F*y.config.baseScaleFactor],opacity:fe.apply(ae,l)/100,useFilter:0},w.fillOpacity=p.hidden?0:s,L?(n=w.entityBorderThickness=c?n*i:n/F,o=o/F,a=c?F:S.sFactor,e&&(e=w.hoverBorderThickness=c?e*i:e/F)):(n=c?n*h:n,a=c?S.scaleFactor:y.baseScaleFactor),w.entityBorderThickness=n,w.connectorThickness=o,w.customStrokeWidthModifier=a,t["stroke-width"]=n,t.transform=R.hasSVG||!O?"":S.transformStr},v.drawLabels=function(p){var r=this,y=p,w=r.getFromEnv("chart"),I=r.config,S=I.labelBatchSize,L=I.entityLength,F=[],h,i,c=w.getChildContainer("upperAnnotationGroup"),n,l,o=0,e=r.getChildren("mapLabelAnnotations")&&r.getChildren("mapLabelAnnotations")[o],t=0,s=0,a=w.config.annotationConfig;e||(l=new P.default,r.attachChild(l,"mapLabelAnnotations"),e=r.getChildren("mapLabelAnnotations")[o],e.addCustomGroup(c)),e.destroy(),e._renderer&&(e._renderer=null),a.showbelow=0;for(h in y){if(r.drawLabel(y[h],F),t++,t===S){for(i=0;i<F.length;i++)F[i].animationLabel=le;for(n=e.addGroup(Object.assign(a,{id:"entityLabels"+o,items:F,animationLabel:"entityLabelGroup"}),r),i=0;i<n.items.length;i++)n.items[i].addEventListener("fc-mouseover",F[i].onmouseover),n.items[i].addEventListener("fc-mouseout",F[i].onmouseout),n.items[i].addEventListener("fc-click",F[i].onclick);o++,e=r.getChildren("mapLabelAnnotations")&&r.getChildren("mapLabelAnnotations")[o],e||(l=new P.default,r.attachChild(l,"mapLabelAnnotations"),e=r.getChildren("mapLabelAnnotations")[o],e.addCustomGroup(c)),e.destroy(),e._renderer&&(e._renderer=null),t=0,F=[]}else if(s===L-1){for(i=0;i<F.length;i++)F[i].animationLabel=le;for(n=e.addGroup(Object.assign(a,{id:"entityLabels"+o,items:F,animationLabel:"entityLabelGroup"}),r),i=0;i<n.items.length;i++)n.items[i].addEventListener("fc-mouseover",F[i].onmouseover),n.items[i].addEventListener("fc-mouseout",F[i].onmouseout),n.items[i].addEventListener("fc-click",F[i].onclick)}s++}r.drawLabelConnFn(0)},v.drawLabelConnFn=function(p){var r=this,y=r.config,w=r.components.data,I=y.BATCH_SIZE,S=y.entityKeys,L,F,h=S.length,i,c,n,l=0;for(F=p;F<h;F++){if(n=w[S[F]],c=n.config,typeof c.options=="object")for(i=c.labels,L=i&&i.length||0;L--;)i[L].labelConnectors&&(r.drawLabelConnectors(n,i[L].labelConnectors,r),l++);else c.labelConnectors&&(r.drawLabelConnectors(n,c.labelConnectors,r),l++);if(l===I){r.addJob("drawLabelConnectors",r.drawLabelConnFn.bind(this,F),d.priorityList.entitydraw);break}}},v._getLabelObject=function(p,r,y){var w=this,I=w.getFromEnv("chart"),S=w.getFromEnv("chart-attrib"),L=p.config,F,h=I.config.scalingParams,i,c,n=p.graphics&&p.graphics.outlines,l,o=L.fontSize,e=L.labelPadding,t=L.labels||[],s=L.entityLabels||[],a,g,m,u,f,k,b,C,A,_,N,M;return r!==z?(N=t[r],M=s[r],F=M.config,l=F.style=N.style,i=N.labelPosition,c=N.labelAlignment):(F=p.labelConfig,i=L.labelPosition,c=L.labelAlignment),i?(m=i[0],u=i[1]):(f=n.getBBox(),m=f.x+f.width/2,u=f.y+f.height/2),c?(k=c[0],b=c[1],k===J?m-=e:k===X&&(m+=e),b===Y?u-=e:b===W&&(u+=e)):(k=ee,b=E),C=parseFloat(o)/h.sFactor,!y&&l&&(l.color&&(F.fontColor=l.color),l["font-size"]&&(C=parseFloat(l["font-size"])/h.sFactor),l["font-family"]&&(F.fontFamily=l["font-family"]),l["font-weight"]!==z&&(F.fontBold=l["font-weight"]==="bold")),F.x=m.toString(),F.y=u.toString(),F.wrap=1,F.type=G,F.fontSize=C,{x:m.toString(),y:u.toString(),wrapwidth:ue[k](a,m+A)-e,wrapheight:Pe[b](g,u+_)-e,wrap:1,type:"text",align:F.align,valign:F.vAlign,text:F.displayValue,tooltext:F.toolText,outlineText:(0,R.pluckNumber)(S.textoutline,0),css:F.link!==z&&{cursor:"pointer",_cursor:"hand"},bgcolor:F.bgColor,bordercolor:F.borderColor,fillcolor:F.fontColor,fontsize:F.fontSize,font:F.fontFamily,bold:F.fontBold,onclick:function(V){var Q=p.graphics.outlines,te,se;if(Q instanceof Array)for(te=0,se=Q.length;te<se;te++)w.entityClick(Q[te].outline,V);else w.entityClick(Q,V)},onmouseover:function(V){var Q=p.graphics.outlines,te,se;if(Q instanceof Array)for(te=0,se=Q.length;te<se;te++)w.entityRollOver(Q[te].outline,V);else w.entityRollOver(Q,V)},onmouseout:function(V){var Q=p.graphics.outlines,te,se;if(Q instanceof Array)for(te=0,se=Q.length;te<se;te++)w.entityRollOut(Q[te].outline,V);else w.entityRollOut(Q,V)},ontouchstart:function(V){var Q=p.graphics.outlines,te,se;if(Q instanceof Array)for(te=0,se=Q.length;te<se;te++)w.entityRollOver(Q[te].outline,V);else w.entityRollOver(Q,V);w.entityRollOver(Q,V)}}},v.drawLabel=function(p,r){var y=this,w=p.config,I=w.showLabel,S,L,F;if(I)if(typeof w.options=="object")for(F=w.labels,L=F&&F.length||0,S=w.options.isDataEnabled;L--;)r.push(y._getLabelObject(p,L,S,!L));else r.push(y._getLabelObject(p,z,!0,!0))},v.drawLabelConnectors=function(p,r,y){for(var w=p.config,I=this,S=I.getFromEnv("chart"),L=S.getFromEnv("animationManager"),F=S.config.scalingParams,h=y.getLinkedParent().getChildContainer("plot"),i=r&&r.length||0,c,n,l=w.showLabel;i--;)n=r[i],c=p.graphics.connectorElem,l?p.graphics.connectorElem=c=L.setAnimation({el:p.graphics.connectorElem||"path",attr:{path:n,opacity:1,transform:R.hasSVG||!O?"":F.transformStr,stroke:(0,R.convertColor)(w.connectorColor,w.connectorAlpha),"shape-rendering":U,"stroke-width":w.connectorThickness},container:h,component:I,label:"labelConnectors"}):c&&c.hide()},v.entityClick=function(p,r){var y=p.node.__entity,w=this,I=w.getFromEnv("chart"),S=I.config.scalingParams,L=p.getBBox(),F=I.getFromEnv("linkClickFN"),h=y.config,i=h.link;L.width=L.width*S.scaleFactor,L.height=L.height*S.scaleFactor,L.x=L.x*S.scaleFactor+S.translateX,L.y=L.y*S.scaleFactor+S.translateY,L.x2=L.x+L.width,L.y2=L.y+L.height,I.fireChartInstanceEvent("entityclick",h.eventArgs,r),i!==z&&F.call({link:i,entity:y,entityBox:L},!0)},v.entityRollOver=function(p,r){var y=p.node.__entity,w=this,I=y.config,S=w.getFromEnv("chart"),L=S.getFromEnv("animationManager"),F=I.hoverAttr;S.plotEventHandler(p,r,"entityRollOver"),p.data("hovered")?clearTimeout(y.config.timer):I.useHoverColor&&I.isVisible&&!y.hidden&&F&&(S.config.hoverEntity=p,L.setAnimation({el:p,attr:F,component:w,state:"updating",label:"path"}),p.data("hovered",!0))},v.entityRollOut=function(p,r){var y=p.node.__entity,w=this,I,S=w.getFromEnv("chart"),L=S.getFromEnv("animationManager"),F=y.config,h=F.revertAttr;S.plotEventHandler(p,r,"entityRollOut"),y.config.timer=setTimeout(function(){I=y.hidden,I!==!0&&h&&(L.setAnimation({el:p,attr:h,component:w,state:"updating",label:"path"}),p.data("hovered",!1))},100)},v.addMouseGestures=function(p){var r=p.config,y=r.originalId,w=this,I=p.graphics,S=r.useHoverColor,L=r.hoverBorderThickness,F=r.hoverBorderColor,h=r.hoverBorderAlpha,i=r.entityBorderThickness,c=r.borderColor,n=r.borderAlpha,l=r.link,o=r.visibleEntityAttr,e="groupId"+y,t,s,a,g,m,u=function(k){l!==z&&k.css({cursor:"pointer",_cursor:"hand"}),k.data("eventArgs",r.eventArgs),k.data("groupId",e),k.node.__entity=p,p._listenersBinded||k.on("fc-click",w.entityClick.bind(w,k)).hover(w.entityRollOver.bind(w,k),w.entityRollOut.bind(w,k))};r.eventArgs={value:r.cleanValue,label:r.label,shortLabel:r.shortLabel,originalId:r.origId,id:r.id||r.origId},r.legacyEventArgs={value:r.value,lName:r.label,sName:r.shortLabel,id:r.originalId||r.id},S&&(r.hoverAttr={fill:(0,R.toRaphaelColor)(r.hoverColor)},r.revertAttr={fill:(0,R.toRaphaelColor)(r.fillColor),stroke:(0,R.toRaphaelColor)(r.borderColor,r.borderAlpha)},r.revertAttr["fill-opacity"]=o["fill-opacity"],L!==i&&(r.hoverAttr["stroke-width"]=(0,R.pluckNumber)(L,i),r.revertAttr["stroke-width"]=i),(F!==c||h!==n)&&(r.hoverAttr.stroke=(0,R.convertColor)(F,h),r.revertAttr.stroke=(0,R.convertColor)(c,n)));for(t in I)if(I.hasOwnProperty(t))if(I[t]instanceof Array){for(m=I[t],s=0,g=m.length;s<g;s++)a=m[s].outline,u(a);p._listenersBinded=!0}else a=I[t],u(a),p._listenersBinded=!0},v.getDataLimits=function(){var p=this,r=p.config;return{max:r.max,min:r.min}},v.createContainer=function(){var p=this,r=p.getLinkedParent(),y=p.getFromEnv("animationManager"),w=r.getChildContainer("layer0");!p.getChildContainer("abovePlotGroup")&&p.addChildContainer("abovePlotGroup",y.setAnimation({el:"group",attr:{name:"abovePlotGroup",opacity:1},container:w,component:p,label:"group"})),!p.getChildContainer("belowPlotGroup")&&p.addChildContainer("belowPlotGroup",y.setAnimation({el:"group",attr:{name:"belowPlotGroup",opacity:1},container:w,component:p,label:"group"}))},v.initComplete=function(){var p=this,r=p.getFromEnv("chart"),y=p.components.data;this.drawLabels(y),r.config.entitiesReady=!0,r.checkComplete()},T}(Ae.ComponentInterface),q=K;return Xe.default=q,Xe}var qe={},mt;function zt(){if(mt)return qe;mt=1;var ge=Oe;qe.__esModule=!0,qe.default=void 0;var de=ge(ze()),Ae=ge(Tt()),P=ge(Rt()),Ce=ge(wt()),D=ct(),R=ge(ut()),d=Ge(),Fe=St(),ie=_t(),z,oe="",O="top",B="bottom",j="right",Y="left",W="middle",J="center",X="line",E="text",ee="polygon",le="arc",G="circle",U="center",ae=.6,re=window.Math,fe=re.min,me=re.max,he="items",ne=function(S){var L=this,F=L.getFromEnv("chart"),h=L.getChildren("mapAnnotations")[0],i=S.markerShape,c=i.groupConfig,n=i.data("unfilteredConfig"),l=n._markerEventArgs,o,e=S.config;n.hovereffect&&(i.config.type==="circle"&&(o=(0,d.extend2)({fillcolor:n.hoverfillcolor,fillalpha:n.hoverfillalpha,fillangle:n.hoverfillangle,fillratio:n.hoverfillratio,gradientUnits:"objectBoundingBox",radialGradient:1},n._hoverattrs)),o=(0,d.extend2)({},n._hoverattrs),h.update(i.getId(),o)),l||(l=n._markerEventArgs={x:+n.x,y:+n.y,scaledX:n.x*c.scaleX,scaledY:n.y*c.scaleY,chartX:n.x*c.scaleX+c.grpXShift,chartY:n.y*c.scaleY+c.grpYShift,id:n.id,label:n.label}),(0,Fe.raiseEventGroup)(e.options.id,"markerRollOver",l,F.getFromEnv("chartInstance"),e,z,z,z)},pe=function(S){var L=this,F=L.getFromEnv("chart"),h=L.getChildren("mapAnnotations")[0],i=S.markerShape,c=i.getElement(),n=S.config,l=i.data("unfilteredConfig"),o;c&&l.hovereffect&&(i.config.type==="circle"&&(o=(0,d.extend2)({fillcolor:i.config.rawColor,fillalpha:i.config.rawAlpha,fillangle:i.config.rawAngle,fillratio:i.config.rawRatio,gradientUnits:"objectBoundingBox",radialGradient:i.config.rawFillPattern==="radial"},l._defaultattrs)),o=(0,d.extend2)({},l._defaultattrs),h.update(i.getId(),o)),(0,Fe.raiseEventGroup)(n.id,"markerRollOut",l._markerEventArgs,F.getFromEnv("chartInstance"),z,z,z)},be=function(S,L){var F=this,h=L.config.options,i=F.getFromEnv("chart"),c=L.markerShape,n=c.config,l=c.groupConfig,o=F.getFromEnv("linkClickFN"),e=c.config.link,t=n._markerEventArgs;e&&o&&o.call({link:e},!0),t||(t=n._markerEventArgs={x:+n.x,y:+n.y,scaledX:n.x*l.scaleX,scaledY:n.y*l.scaleY,chartX:n.x*l.scaleX+l.grpXShift,chartY:n.y*l.scaleY+l.grpYShift,id:h.id,label:h.label}),i.fireChartInstanceEvent("markerClick",t,S)},ue=function(S,L){var F=S&&S.length||!1,h="id",i={},c;if(!S)return S;for(;F--;)c=S[F],c[h]!==z&&(i[c[h].toLowerCase()]=c);return i},Pe=function(S,L,F){return{x:S.toString(),y:(L-F).toString(),align:J,valign:O}},we=function(S,L,F){return{x:(S-F).toString(),y:L.toString(),align:j,valign:W}},Z=function(S,L,F){return{x:(S+F).toString(),y:L.toString(),align:Y,valign:W}},K=function(S,L,F){return{x:S.toString(),y:(L+F).toString(),align:J,valign:B}},q=function(S,L){return{x:S.toString(),y:L.toString(),align:J,valign:W}},H=function(){return arguments[1]},T=function(S,L){return S-L},v=function(S,L){return fe(L,S-L)*2},x=function(){return arguments[1]},p=function(S,L){return fe(L,S-L)*2},r=function(S,L){return S-L};(0,D.addDep)({name:"mapsAnimation",type:"animationRule",extension:R.default});var y=function(I){(0,de.default)(S,I);function S(){var F;return F=I.call(this)||this,F.components={},F.getLabelAlignment={top:Pe,left:we,right:Z,bottom:K,center:q},F.getWrapWidth={right:H,left:T,center:v},F.getWrapHeight={top:x,middle:p,bottom:r},F.hoverFn=ne,F.hoverOutFn=pe,F.clickFn=be,F}var L=S.prototype;return L.getName=function(){return"markers"},L.getType=function(){return"dataset"},L.configureAttributes=function(h){if(h){this.JSONData=h;var i=this,c,n=i.getChildren("mapAnnotations")&&i.getChildren("mapAnnotations")[0],l=i.getFromEnv("chart"),o=l.config.markerOpts;n||(c=new Ce.default,i.attachChild(c,"mapAnnotations"),n=i.getChildren("mapAnnotations")[0]),n.destroy(),i.calculateDataLimits(),o.dataEnabled?this._parseMarkers():this.defineMarkersNShapes(),this.configureConnectors()}},L.calculateMarkerRadiusLimits=function(){if(this.JSONData){var h=this,i=h.JSONData,c=h.config,n=h.getFromEnv("chart"),l=n.config.width,o=n.config.height,e=i.markermaxradius,t=i.markerminradius,s=S.getMarkerRadiusLimits(l,o,e,t);c.minRadius=s.min,c.maxRadius=s.max}},L.calculateDataLimits=function(){var h=this,i=h.getFromEnv("chart"),c=h.config,n=i.jsonData,l=n.markers||{},o=l[he]||[],e=this.getFromEnv("number-formatter"),t=1/0,s=-1/0,a,g,m,u,f;for(f=0,m=o.length;f<m;f++)a=o[f],u=a.value,g=e.getCleanValue(u),g!==null&&(t=fe(g,t),s=me(g,s));c.min=t,c.max=s},L._parseMarkers=function(){var h=this,i=h.getFromEnv("chart"),c=i.jsonData,n=c.markers,l=n[he],o=n.shapes,e=i.config.markerOpts,t=e.dataLabels.style,s=this.getFromEnv("number-formatter"),a=h.components.shapeObjs={},g=h.components.markerObjs={},m,u,f,k,b,C,A,_;if(!(!l||!l.length)){if(o&&o.length)for(u=o.length;u;u-=1)k=o[u-1],(_=k.id.toLowerCase())&&(a[_]=k);for(u=l.length;u--;)k=l[u],(_=k.id&&k.id.toLowerCase())&&(m=k.value,m!==z&&m!==""&&(m=parseFloat(m)),f=S._initializeMarkerItem(_,k,null,i),b=f.config.options.shapeid,b&&typeof b=="string"&&(b=b.toLowerCase()),C=f.config,A=C.options,C.cleanValue=s.getCleanValue(m),C.cleanValue!==null?C.formattedValue=s.dataLabels(m):C.formattedValue=z,C.fillColor=(0,d.pluck)(A.fillcolor,A.color,e.fillColor),C.fillAlpha=(0,d.pluck)(A.fillalpha,A.alpha,e.fillAlpha),C.fillRatio=(0,d.pluck)(A.fillratio,e.fillRatio),C.fillAngle=(0,d.pluck)(A.fillangle,e.fillAngle),C.borderThickness=(0,d.pluckNumber)(A.borderthickness,e.borderThickness),C.borderColor=(0,d.pluck)(A.bordercolor,e.borderColor),C.borderAlpha=(0,d.pluck)(A.borderalpha,e.borderAlpha),C.labelPadding=A.labelpadding||e.labelPadding,C.fontColor=(0,d.pluck)(A.labelcolor,t.fontColor),C.labelBgColor=(0,d.pluck)(A.labelbgcolor,t.labelBgColor)||oe,C.labelBorderColor=(0,d.pluck)(A.labelbordercolor,t.labelBorderColor)||oe,k.__hideMarker&&(f._isHidden=!0),b&&(f.shapeObj=a[b]),g[_]=f)}},L.defineMarkersNShapes=function(){var h=this,i=h.getFromEnv("chart"),c=i.jsonData,n=c.markers,l=n.definition,o=this.getFromEnv("number-formatter"),e=i.config.markerOpts,t=e.dataLabels.style,s=ue(l)||{},a=ue(n.application)||{},g=n.shapes,m=h.components.shapeObjs=h.components.shapeObjs||(h.components.shapeObjs={}),u=h.components.markerObjs=h.components.markerObjs||(h.components.markerObjs={}),f={},k={},b,C,A,_,N,M,$,V;if(!(!l||!l.length)){for(_ in m)f[_]=!1;for(_ in u)k[_]=!1;if(g&&g.length)for(_=g.length;_;_-=1)M=g[_-1],(V=M.id.toLowerCase())&&(m[V]=M,f[V]=!0);for(V in s)M=s[V],N=u[V]=S._initializeMarkerItem(V,M,a[V],i),k[V]=!0,$=N.config.options.shapeid,C=N.config,A=M.value,C.cleanValue=o.getCleanValue(A),b=C.options,C.cleanValue!==null?C.formattedValue=o.dataLabels(A):C.formattedValue=z,C.fillColor=(0,d.pluck)(b.fillcolor,b.color,e.fillColor),C.fontColor=(0,d.pluck)(b.labelcolor,t.fontColor),C.fillAlpha=(0,d.pluck)(b.fillalpha,b.alpha,e.fillAlpha),C.fillRatio=(0,d.pluck)(b.fillratio,e.fillRatio),C.fillAngle=(0,d.pluck)(b.fillangle,e.fillAngle),C.borderThickness=(0,d.pluckNumber)(b.borderthickness,e.borderThickness),C.borderColor=(0,d.pluck)(b.bordercolor,e.borderColor),C.borderAlpha=(0,d.pluck)(b.borderalpha,e.borderAlpha),C.labelPadding=b.labelpadding||e.labelPadding,C.options.tooltext=(0,d.pluck)(b.tooltext,e.tooltext),C.link=b.link,$&&(N.shapeObj=m[$.toLowerCase()]);for(_ in f)f[_]||delete m[_];for(_ in u)k[_]||delete u[_]}},S.getMarkerRadiusLimits=function(h,i,c,n){var l=fe(h,i),o=.02,e=3.5,t=o*l,s=o*e*l,a,g;if(a=parseFloat(n),g=parseFloat(c),!isNaN(a)&&!isNaN(g))return a<g?{min:a,max:g}:{min:g,max:a};if(isNaN(a)){if(!isNaN(g))return{min:parseInt(g/10,10),max:g}}else return{min:a,max:10*a};return{min:t,max:s}},L.getDataLimits=function(){var h=this,i=h.config;return{min:i.min,max:i.max}},S._initializeMarkerItem=function(h,i,c){var n={},l=n.config,o;return l||(l=n.config={}),l.id=h,l.definition=i,l.application=c,l.hasValue=null,l.value=null,l.options=null,l.label=null,l.markerShape=null,l.markerLabel=null,l.drawOptions={shape:null,label:null},l.drawComplete=!1,o=n.config.options=(0,d.extend2)({},l.definition),l.dataEnabled?!isNaN(o.value)&&o.value!==""&&(n.value=parseFloat(o.value),n.hasValue=!0):(l.applyAll||c)&&(l.options=(0,d.extend2)(o,l.application)),n},L.configureConnectors=function(){var h=this,i=h.getFromEnv("chart"),c=h.getChildren("mapAnnotations")[0],n=i.jsonData,l=h.components,o=n.markers||{},e=o.connector||o.connectors||[],t=l.markerObjs,s=e.length,a=h.components.connectors,g=function(Ie){return function(ke){var Te=this,Ee=Te.data("unfilteredConfig");Ee.hoverEffect&&c.update(Te.getId(),Ee._hoverAttrs),i.fireChartInstanceEvent("connectorrollover",Ie,ke)}},m=function(Ie){return function(ke){var Te=this,Ee=Te.data("unfilteredConfig");Ee.hoverEffect&&c.update(Te.getId(),Ee._defaultAttrs),i.fireChartInstanceEvent("connectorrollout",Ie,ke)}},u=function(Ie){return function(ke){i.fireChartInstanceEvent("connectorClick",Ie,ke)}},f=i.config.connectorOpts,k={},b,C,A,_,N,M,$,V,Q,te,se,ye,ce,ve,Se;for(a=h.components.connectors=[],Se=0;Se<s;Se++)ve=e[Se],!(!ve.from&&!ve.to)&&(A=t[ve.from.toLowerCase()],_=t[ve.to.toLowerCase()],!(!A||!_)&&(N=e[Se].label,k=a[Se],!k&&(k=a[Se]={}),!k.config&&(b=k.config={}),!k.graphics&&(k.graphics={}),b=k.config=(0,d.extend2)({},ve),b.fromMarker=A,b.toMarker=_,b.link=ve.link,b.showTooltip=(0,d.pluckNumber)(ve.showtooltip,f.showTooltip),M=b.tooltext=b.showTooltip?(0,d.pluck)(ve.tooltext,f.tooltext):oe,$=b.thickness=(0,d.pluck)(ve.thickness,f.thickness),V=b.color=(0,d.pluck)(ve.color,f.color),Q=b.alpha=(0,d.pluck)(ve.alpha,f.alpha),b.hoverEffect=(0,d.pluckNumber)(ve.showhovereffect,f.showHoverEffect),te=(0,d.pluck)(ve.hovercolor,f.hoverColor,V),se=(0,d.pluck)(ve.hoveralpha,f.hoverAlpha,Q),ye=(0,d.pluck)(ve.hoverthickness,f.hoverThickness,$),b.dashed=(0,d.pluck)(ve.dashed,f.dashed),b.dashLen=(0,d.pluckNumber)(ve.dashlen,f.dashlen),b.dashGap=(0,d.pluckNumber)(ve.dashgap,f.dashgap),M&&(b.tooltext=M=(0,d.parseUnsafeString)((0,d.parseTooltext)(M,[3,40,41,42,43],{label:N,fromId:A.config.definition.id,toId:_.config.definition.id,fromLabel:A.config.definition.label,toLabel:_.config.definition.label},C),!1)),b.eventArgs={fromMarkerId:A.config.id,toMarkerId:_.config.id,label:N},b._hoverAttrs={color:te,alpha:se,thickness:ye},b._defaultAttrs={color:V,alpha:Q,thickness:$},b.type=X,b.onclick=u(b.eventArgs),b.onmouseover=g(b.eventArgs),b.onmouseout=m(b.eventArgs),N&&(ce=k.labelConfig,!ce&&(ce=k.labelConfig={}),ce.type=E,ce.text=N,ce.align=J,ce.valign=W,ce.font=f.font,ce.fillcolor=(0,d.pluck)(ve.labelcolor,f.fontColor),ce.bgcolor=(0,d.pluck)(ve.labelbgcolor,f.labelBgColor),ce.bordercolor=(0,d.pluck)(ve.labelbordercolor,f.labelBorderColor),ce.tooltext=b.tooltext)))},L.draw=function(){var h=this,i=h.getFromEnv("chart"),c=h.config,n=h.getChildren("mapAnnotations")[0],l=h.components.markerObjs,o=i.config,e=o.markerOpts,t=o.scalingParams,s=i.config.annotationConfig,a=[],g=[],m,u,f,k,b,C,A,_,N={};n.destroy(),h.createContainer(),h._drawConnectors(),h.imageLoadCount=0,h.imageCount=0,c.autoScale=e.autoScale?t.sFactor:1;for(b in l)m=null,u=l[b],k=u.config,k.conIsHidden||(m=this._drawMarkerItem(u)),m&&(N[b]=m,k._annotationIndex=a.length,m.markerShape&&(f=Object.assign({align:"center",valign:"middle",animationLabel:"markerItem",autoscale:m.markerShape.type==="image"?0:1},m.markerShape),a.push(f)),m.markerLabel&&(f=Object.assign({animationLabel:"markerItem",id:m.markerShape.id},m.markerLabel),g.push(f)));_=n.addGroup(Object.assign(s,{id:"markers",fillalpha:"100",items:a,scaleimages:1}),h),A=n.addGroup(Object.assign(s,{id:"markerLabels",items:g,scaleimages:1}),h),h.components.markerGroup=_,h.components.markerLabelGroup=A,C=0;for(b in l)N[b]&&(u=l[b],u.markerShape=_.retrieveItem(a[C].id),u.markerShape.data("unfilteredConfig",a[C]),N[b].markerLabel&&(u.markerLabel=A.retrieveItem(a[C].id),u.markerLabel.data("unfilteredConfig",g[C])),C++);h.addJob("buildKdtree",h._buildKdTree.bind(h),ie.priorityList.kdTree)},L._buildKdTree=function(){var h=this,i=h.components.kdArrayMap,c=h.components.markerGroup,n=[],l,o,e=c&&c.items,t=e&&e.length||0;for(o=0;o<t;o++)l=e[o].config.id,i[l]&&n.push(i[l]);h.components.kDTree||(h.components.kDTree=new P.default(!0)),h.components.kDTree._setSearchLimit(1/0,1/0),h.components.kDTree.buildKdTree(n)},L._drawMarkerItem=function(h){var i=this,c=i.getFromEnv("chart"),n=c.config,l=i.config,o=n.scalingParams,e=h.config,t=e.options,s=e.definition,a=n.markerOpts,g=a.dataLabels.style,m=t.shapeid,u=t.scale||1,f=t.label||oe,k=c.config.scalingParams.scaleFactor*c.config.baseScaleFactor,b=(t.labelpos||O).toLowerCase(),C=e.formattedValue===z?z:e.formattedValue,A=t.tooltext||a.tooltext,_=(0,d.pluckNumber)(s.radius,e.radius,a.radius)*u*l.autoScale||1e-4,N=e.fillColor,M=e.fillAlpha,$=e.fillRatio,V=e.fillAngle,Q=e.borderThickness,te=e.borderColor,se=e.borderAlpha,ye=i.getChildren("mapAnnotations")[0],ce,ve,Se,Re,Ie,ke,Te,Ee,xe,Le,_e,Ne,Me,De,Be,Ve,et,je,tt=i.components.kdArrayMap||(i.components.kdArrayMap={}),rt=h.config.id;if(e.autoScale=a.autoScale?k:1,!!m)return A?A=(0,d.parseUnsafeString)((0,d.parseTooltext)(A,[1,2,3],{formattedValue:C,label:f},t),!1):A=C?f+a.tooltipSepChar+C:f,C!==z&&C!==null?f=f+a.labelSepChar+C:isNaN(u)?u=1:u<0?u=0:u>5&&(u=5),(0,d.extend2)(t,{x:t.x&&t.x.toString(),y:t.y&&t.y.toString(),fillcolor:N,fillalpha:M,fillratio:$,fillangle:V,borderthickness:Q,bordercolor:te,borderalpha:se,hovereffect:(0,d.pluck)(a.showHoverEffect),radius:_&&_.toString(),link:t.link,showshadow:(0,d.pluckNumber)(t.showshadow,e.shadow),_markerLabel:f,_markerId:t.id,id:(t.id+oe).toLowerCase()}),delete t.tooltext,e.tooltext=a.showTooltip?A:!1,Me=Number(t.x)*o.sFactor+o.translateX,De=Number(t.y)*o.sFactor+o.translateY,_=t.radius,m==="triangle"?((0,d.extend2)(t,{type:"polygon",sides:3,startangle:a.startAngle}),je=ee,et=3):m==="diamond"?((0,d.extend2)(t,{type:"polygon",sides:4,startangle:a.startAngle}),je=ee,et=4):m==="arc"?(Ve=_*ae,(0,d.extend2)(t,{type:"arc",startangle:0,endangle:360,innerradius:Ve}),je=le):m==="circle"?(t.type=G,je=G):(_e=i.getShapeArgs.call(h),!a.dataEnabled||!a.valueToRadius||t.radius===z?(!_e.radius&&(_e.radius=a.radius),_e.radius*=u*e.autoScale):delete _e.radius,(0,d.extend2)(t,_e),t.id=t._markerId&&t._markerId.toLowerCase(),Ve=_e.innerradius,_e.radius&&(_=_e.radius),je=_e.type&&_e.type.toLowerCase(),et=_e.sides,_=Number(_),_&&Ve&&_<Ve&&(Ne=_,t.radius=_=Ve,t.innerradius=Ve=Ne)),t.type=t.type&&t.type.toLowerCase(),(0,d.extend2)(t,{hoverfillcolor:(0,d.pluck)(t.fillhovercolor,a.hoverFillColor,t.fillcolor),hoverfillalpha:(0,d.pluck)(t.fillhoveralpha,a.hoverFillAlpha,t.fillalpha),hoverfillratio:(0,d.pluck)(t.fillhoverratio,a.hoverFillRatio,t.fillratio),hoverfillangle:(0,d.pluck)(t.fillhoverangle,a.hoverFillAngle,t.fillangle),hoverborderthickness:(0,d.pluckNumber)(t.borderhoverthickness,a.hoverBorderThickness,t.borderthickness),hoverbordercolor:(0,d.pluck)(t.borderhovercolor,a.hoverBorderColor,t.bordercolor),hoverborderalpha:(0,d.pluck)(t.borderhoveralpha,a.hoverBorderAlpha,t.borderalpha)}),t._hoverattrs={fillalpha:t.hoverfillalpha,fillcolor:t.hoverfillcolor,fillangle:t.hoverfillangle,fillratio:t.hoverfillratio,borderThickness:t.showborder!=="0"?t.hoverborderthickness:0,borderColor:t.hoverbordercolor,borderAlpha:t.hoverborderalpha},t._defaultattrs={fillalpha:t.fillalpha,fillcolor:t.fillcolor,fillangle:t.fillangle,fillratio:t.fillratio,borderThickness:t.showborder!=="0"?t.borderthickness:0,borderColor:t.bordercolor,borderAlpha:t.borderalpha},t.type==="image"?(t.borderthickness=t.borderthickness||0,t.onload=function(dt){var gt=this,ot=dt.width,at=dt.height;Be={},t=gt.config,Me=(Number(t.derivedX)-ot/(2*o.sFactor))*o.sFactor,De=(Number(t.derivedY)-at/(2*o.sFactor))*o.sFactor,Be=tt[rt]||(tt[rt]={}),Be.x=Me+o.translateX,Be.y=De+o.translateY,Be.element=h,Be.shapeInfo={type:"rect",width:ot,height:at},ot&&at&&ye.update(gt.getId(),{x:Me,y:De,width:ot,height:at,autoscale:0}),i.imageLoadCount++,i.imageLoadCount===i.imageCount&&i._buildKdTree()},t.onerror=function(){i.imageLoadCount++,i.imageLoadCount===i.imageCount&&i._buildKdTree()},i.imageCount++):(Be=tt[rt]||(tt[rt]={}),Be.x=Me,Be.y=De,Be.element=h,Be.shapeInfo={type:je,sides:et,radius:Number(_)+t.borderthickness/2,innerradius:Ve}),e.drawOptions.shape=t,a.showLabels?(Le=t.labelpadding||a.labelPadding,ce=i._getLabelOptions(b,Le,t),ve=ce.align,Se=ce.valign,Re=e._labelBaseWidth,Ie=e._labelBaseHeight,ke=e._labelXOffset,Te=e._labelYOffset,Ee=a.labelWrapWidth?a.labelWrapWidth:i.getWrapWidth[ve](Re,Number(ce.x)+ke),xe=a.labelWrapHeight?a.labelWrapHeight:i.getWrapHeight[Se](Ie,Number(ce.y)+Te),Ee>Le&&(Ee-=Le),xe>Le&&(xe-=Le),e.drawOptions.label=(0,d.extend2)({type:"text"},{text:f,tooltext:t.tooltext,x:ce.x,y:ce.y,align:ve,valign:ce.valign,wrap:1,wrapwidth:Ee,wrapheight:xe,fontsize:g.fontSize/o.sFactor,font:g.fontFamily,color:e.fontColor,bgcolor:e.labelBgColor||oe,bordercolor:e.labelBorderColor||oe}),{markerShape:t,markerLabel:e.drawOptions.label}):{markerShape:t}},L.highlightPoint=function(h,i){var c=h.element,n=this,l=i.originalEvent,o=n.getFromEnv("chart"),e=n.getFromEnv("toolTipController"),t=n.config.currentToolTip,s=o.config.lastHoveredPoint;s&&s!==h&&(s&&n.hoverOutFn(s.element),o.config.lastHoveredPoint=null,e.hide(t)),h!==!1&&(i.type==="click"||i.type==="touchstart"?(o.config.lastHoveredPoint!==h&&n.hoverFn(c),n.clickFn(i,c)):i.type==="mousemove"&&o.config.lastHoveredPoint!==h&&n.hoverFn(c),c.config.tooltext&&(t?e.draw(l,c.config.tooltext,t):t=n.config.currentToolTip=e.draw(l,c.config.tooltext)),o.config.lastHoveredPoint=h)},L._drawConnectors=function(){var h=this,i=h.getFromEnv("chart"),c=i.config.annotationConfig,n=h.components,l=n.connectors||(h.components.connectors=[]),o,e,t=l.length,s=i.config.scalingParams,a=i.config.connectorOpts,g=a.showLabels,m=h.getChildren("mapAnnotations")[0],u,f,k=[],b=[],C,A,_,N,M,$,V,Q,te,se=[],ye={};for(se.push({id:"connectorLabels",fillalpha:"100",items:b}),se.push({id:"connectors",fillalpha:"100",items:k}),u=0;u<t;u++)l[u]&&(ye[u]=!0,M=l[u].config.fromMarker.config,$=l[u].config.toMarker.config,C=M.options.x,A=M.options.y,_=$.options.x,N=$.options.y,l[u].config.x=C,l[u].config.y=A,l[u].config.tox=_,l[u].config.toy=N,te=Object.assign({animationLabel:"markerItem"},l[u].config),k.push(te),l[u].labelConfig&&g&&(l[u].labelConfig.x=((Number(C)+Number(_))/2).toString(),l[u].labelConfig.y=((Number(A)+Number(N))/2).toString(),l[u].labelConfig.fontsize=a.fontSize/(s.scaleFactor*i.config.baseScaleFactor),te=Object.assign({animationLabel:"markerItem"},l[u].labelConfig),b.push(te)));for(V=m.addGroup(Object.assign(c,se[1]),h),Q=m.addGroup(Object.assign(c,se[0]),h),u=0,f=0;u<t;u++)ye[u]&&(o=V.items[f],o&&(o.data("unfilteredConfig",k[f]),o.addEventListener("fc-mouseover",l[u].config.onmouseover),o.addEventListener("fc-mouseout",l[u].config.onmouseout),o.addEventListener("fc-click",l[u].config.onclick)),l[u].labelConfig&&g&&(e=Q.items[f],e&&e.data("unfilteredConfig")),f++)},L.getShapeArgs=function(){var h=this,i=h.config,c=(0,d.extend2)({},h.shapeObj),n;return i.autoScale=1,c?(c.type==="polygon"?c.sides<3?c.type=G:c.startangle=i.startAngle:c.type==="arc"&&(n=(c.radius||i.markerRadius)*i.autoScale,c.radius=n,c.innerradius=c.innerradius&&c.innerradius*i.autoScale||n*ae),c):null},L._getLabelOptions=function(h,i,c,n,l){var o=this,e,t,s,a=h&&h.toLowerCase();return o.getLabelAlignment[a]||(a=U),t=Number(c.x),s=Number(c.y),n===z||l===z?e=c.radius||0:e=/^(top|bottom)$/gi.test(a)&&l*.5||/^(left|right)$/gi.test(a)&&n*.5||0,e=Number(e)+Number(i),o.getLabelAlignment[a](t,s,e)},L.addMarkerItem=function(h){var i=this,c=i.getFromEnv("chart"),n=h,l,o=i.components.markerObjs,e=i.components.shapeObjs,t=i.components.markerGroup,s=i.components.markerLabelGroup,a,g=i.getChildren("mapAnnotations")[0],m=i.getFromEnv("number-formatter"),u=c.config.markerOpts,f,k,b,C,A,_;if(_=n.id.toLowerCase()){if(o[_])return;delete n.value,i.imageLoadCount=0,l=S._initializeMarkerItem(_,n,null),l.dataset=i,A=l.config.options.shapeid,k=l.config,C=n.value,k.cleanValue=m.getCleanValue(C),a=k.options,k.cleanValue!==null?k.formattedValue=m.dataLabels(C):k.formattedValue=z,k.fillColor=(0,d.pluck)(a.fillcolor,a.color,u.fillColor),k.fillAlpha=(0,d.pluck)(a.fillalpha,a.alpha,u.fillAlpha),k.fillRatio=(0,d.pluck)(a.fillratio,u.fillRatio),k.fillAngle=(0,d.pluck)(a.fillangle,u.fillAngle),k.borderThickness=(0,d.pluckNumber)(a.borderthickness,u.borderThickness),k.borderColor=(0,d.pluck)(a.bordercolor,u.borderColor),k.borderAlpha=(0,d.pluck)(a.borderalpha,u.borderAlpha),k.labelPadding=a.labelpadding||u.labelPadding,k.options.tooltext=(0,d.pluck)(a.tooltext,u.tooltext),k.link=a.link,A&&(l.shapeObj=e[A&&A.toLowerCase()]),o[_]=l,f=i._drawMarkerItem(l),t&&s&&(f.markerShape&&(b=Object.assign({align:"center",valign:"middle",animationLabel:"markerItem",autoscale:f.markerShape.type==="image"?0:1},f.markerShape),l.markerShape=g.addItem(t.getId(),b,i),l.markerShape.data("unfilteredConfig",b)),f.markerLabel&&(b=Object.assign({animationLabel:"markerItem"},f.markerLabel),l.markerLabel=g.addItem(s.getId(),b,i),l.markerLabel.data("unfilteredConfig",b))),i._buildKdTree()}},L.updateMarkerItem=function(h,i){var c=this,n=c.getFromEnv("chart"),l=c.getChildren("mapAnnotations")[0],o=c.components.markerObjs,e=n.config.markerOpts,t,s,a,g={},m=o[h],u;if(m){t=m.config.options,(0,d.extend2)(t,i),c.imageLoadCount=0,a=m.config;for(s in i)g[s.toLowerCase()]=i[s]&&i[s].toString();a.fillColor=(0,d.pluck)(g.fillcolor,g.color,e.fillColor),a.fillAlpha=(0,d.pluck)(g.fillalpha,g.alpha,e.fillAlpha),a.fillRatio=(0,d.pluck)(g.fillratio,e.fillRatio),a.fillAngle=(0,d.pluck)(g.fillangle,e.fillAngle),a.borderThickness=(0,d.pluckNumber)(g.borderthickness,e.borderThickness),a.borderColor=(0,d.pluck)(g.bordercolor,e.borderColor),a.borderAlpha=(0,d.pluck)(g.borderalpha,e.borderAlpha),a.labelPadding=g.labelpadding||e.labelPadding,a.options.tooltext=(0,d.pluck)(g.tooltext,e.tooltext),a.link=g.link,u=c._drawMarkerItem(m).markerShape,c._buildKdTree(),l.update(h,u)}},L.createContainer=function(){var h=this,i=h.getLinkedParent(),c=h.getFromEnv("animationManager"),n=i.getChildContainer("layer1");!h.getChildContainer("abovePlotGroup")&&h.addChildContainer("abovePlotGroup",c.setAnimation({el:"group",attr:{name:"abovePlotGroup",opacity:1},container:n,component:h,label:"group"})),!h.getChildContainer("belowPlotGroup")&&h.addChildContainer("belowPlotGroup",c.setAnimation({el:"group",attr:{name:"belowPlotGroup",opacity:1},container:n,component:h,label:"group"}))},L._removeMarkerItem=function(h){var i=this,c=i.components,n=c.markerObjs,l=n[h],o=c.kdArrayMap,e=i.getChildren("mapAnnotations")[0],t,s;l&&(t=l.markerShape,s=l.markerLabel,t&&e.destroy(t.getId()),s&&e.destroy(s.getId()),delete o[h],i._buildKdTree()),delete n[h]},L.getElement=function(h){var i=this;if(i.components.kDTree)return i.components.kDTree.getNeighbour(h)},S}(Ae.default),w=y;return qe.default=w,qe}var Ke={},bt;function Ht(){if(bt)return Ke;bt=1;var ge=Oe;Ke.__esModule=!0,Ke.default=void 0;var de=ge(ze()),Ae=He(),P=Ge(),Ce=ct(),D=ge(ut()),R=function(z){z.configure&&z.configure()};(0,Ce.addDep)({name:"mapsAnimation",type:"animationRule",extension:D.default});var d=function(ie){(0,de.default)(z,ie);function z(){return ie.apply(this,arguments)||this}var oe=z.prototype;return oe.getType=function(){return"group"},oe.getName=function(){return"mapGroup"},oe.configure=function(){var B=this;B._mapChildren(R)},oe.createContainer=function(){var B=this,j=B.getLinkedParent(),Y=B.getFromEnv("animationManager"),W,J=j.getChildContainer();W=J.plotGroup,!B.getChildContainer("plotShadow")&&B.addChildContainer("plotShadow",Y.setAnimation({el:"group",attr:{name:"manager-plot-shadow",opacity:1},container:W,component:B,label:"group"})),!B.getChildContainer("plot")&&B.addChildContainer("plot",Y.setAnimation({el:"group",attr:{name:"manager-plot",opacity:1},container:W,component:B,label:"group"})),!B.getChildContainer("layer0")&&B.addChildContainer("layer0",Y.setAnimation({el:"group",attr:{name:"ann-layer0",opacity:1},container:J.abovePlotGroup,component:B,label:"group"})),!B.getChildContainer("layer1")&&B.addChildContainer("layer1",Y.setAnimation({el:"group",attr:{name:"ann-layer1",opacity:1},container:J.abovePlotGroup,component:B,label:"group"})),j.config.labelsOnTop?B.getChildContainer("layer0").toFront():B.getChildContainer("layer0").toBack()},oe._transformGroup=function(){var B=this,j=this.getFromEnv("chart"),Y=j.getFromEnv("chartInstance"),W=B.getFromEnv("animationManager"),J=j.jsonData,X=B.getChildContainer("plot"),E=B.getChildContainer("plotShadow"),ee=j.config.scalingParams,le=function(){return function(U){U.detachHandler(),P.hasSVG&&(Y.args.link&&Y.args.clickedEntityBox&&J.chart.linkedcharttransition==="scale"?(X&&W.setAnimation({el:X,attr:{transform:ee.transformStr},component:B,label:"group"}),E&&W.setAnimation({el:E,attr:{transform:ee.transformStr},component:B,label:"group"})):(X&&W.setAnimation({el:X,attr:{transform:ee.transformStr},component:B,label:"group"}),E&&W.setAnimation({el:E,attr:{transform:ee.transformStr},component:B,label:"group"}))),X.show(),E.show()}};X.hide(),E.hide(),j.config.entitiesReady=!1,Y.addEventListener("internal.mapdrawingcomplete",le()),j.checkComplete()},oe.draw=function(){this.createContainer(),this._transformGroup()},oe.getDataLimits=function(B){var j=this,Y=1/0,W=-1/0,J,X=0,E=function(le){W=Math.max(W,le.max),Y=Math.min(Y,le.min)};return j._mapChildren(function(ee){if(ee.getState("removed")||ee.getState("visible")===!1){B&&(J=ee.getDataLimits(B),E(J));return}X++,J=ee.getDataLimits(B),E(J)}),X?j.setState("visible",!0):j.setState("visible",!1),this.config.range||(this.config.range={},this.config.range.min=this.config.dataMin,this.config.range.max=this.config.dataMax),{max:W,min:Y}},z}(Ae.ComponentInterface),Fe=d;return Ke.default=Fe,Ke}var vt;function jt(){if(vt)return nt;vt=1;var ge=Oe;nt.__esModule=!0,nt.default=D;var de=Ge(),Ae=ge(Tt()),P=ge(zt()),Ce=ge(Ht());function D(R){var d,Fe=R.getFromEnv("dataSource"),ie=Fe.data||{},z=Fe.markers;(0,de.componentFactory)(R,Ce.default,"mapGroup"),d=R.getChildren("mapGroup")[0],(0,de.datasetFactory)(d,Ae.default,"entities",1,[ie]),z?(0,de.datasetFactory)(d,P.default,"markers",1,[z]):R.getDatasets()[1]&&R.getDatasets()[1].remove()}return nt}var lt={},Ye={},$e={},kt;function Wt(){if(kt)return $e;kt=1;var ge=Oe;$e.__esModule=!0,$e.default=void 0;var de=ge(Et()),Ae=ge(ze()),P=Ge(),Ce=He(),D=function(oe,O){return+oe.minvalue==+O.minvalue?oe.maxvalue-O.maxvalue:oe.minvalue-O.minvalue},R=function(oe,O,B){var j=oe[0],Y=oe[1],W=oe[2],J=j+(O[0]-j)*B,X=Y+(O[1]-Y)*B,E=W+(O[2]-W)*B;return{hex:(P.COLOR_BLACK+(J<<16|X<<8|E).toString(16)).slice(-6),rgb:[J,X,E]}},d,Fe=function(z){(0,Ae.default)(oe,z);function oe(){var B;B=z.call(this)||this;var j=(0,de.default)(B);return j.mapByCategory=!1,j.colorArr=[],j.noValidRange=!0,j.sortLegend=!1,B}var O=oe.prototype;return O.__setDefaultConfig=function(){z.prototype.__setDefaultConfig.call(this),this.config.defaultObj={code:"CCCCCC",alpha:"100"}},O.getType=function(){return"colorComponent"},O.getName=function(){return"colorBucket"},O.configure=function(j){if(j){var Y=this,W=Y.mapByCategory,J=j.numberFormatter,X=j.colorRange||{},E=(0,P.extend2)([],X.color),ee=this.getLinkedParent(),le=Math.min(Math.max((0,P.pluckNumber)(Y.getFromEnv("dataSource").chart.palette,0)-1,0),4),G=ee.defaultPaletteOptions&&ee.defaultPaletteOptions.paletteColors[le],U=(0,P.pluckNumber)(J.getCleanValue(X.maxvalue),1/0),ae=(0,P.pluckNumber)(J.getCleanValue(X.minvalue),-1/0),re=Y.colorArr,fe,me,he,ne,pe,be,ue,Pe,we,Z,K;if(j.mapByCategory!==d&&(W=Y.mapByCategory=!!Number(j.mapByCategory)),W?E=E.filter(function(q){return q.code||q.color}):E=E.filter(function(q){return q.minvalue||q.maxvalue}),E.forEach(function(q){q.minvalue&&q.maxvalue&&+q.maxvalue<+q.minvalue&&(Pe=q.maxvalue,q.maxvalue=q.minvalue,q.minvalue=Pe),q.minvalue?q.maxvalue?(Z=J.getCleanValue(q.minvalue),we=J.getCleanValue(q.maxvalue),q.rangeLabel=J.dataLabels(Z)+"-"+J.dataLabels(we)):(Z=J.getCleanValue(q.minvalue),q.maxvalue=we=U,q.rangeLabel=we===1/0?">"+J.dataLabels(Z):J.dataLabels(Z)+"-"+J.dataLabels(we)):(q.minvalue=Z=ae,we=J.getCleanValue(q.maxvalue),q.rangeLabel=Z===-1/0?"<"+J.dataLabels(we):J.dataLabels(Z)+"-"+J.dataLabels(we))}),E.sort(D),E&&(fe=E.length)){for(re.length=0,me=0;me<fe;me+=1)ue=E[me],he=(0,P.pluck)(ue.color,ue.code,G&&G[me]),ne=(0,P.pluck)(ue.alpha),be=(0,P.pluck)(ue.bordercolor),pe=(0,P.pluck)(ue.borderalpha,100),we=(0,P.pluckNumber)(ue.maxvalue),Z=(0,P.pluckNumber)(ue.minvalue),K=(0,P.pluck)(ue.label,ue.displayvalue,ue.rangeLabel),(he&&we>=Z||W&&K)&&re.push({code:he,alpha:ne||"100",oriAlpha:ne,maxvalue:we,minvalue:Z,label:(0,P.parseUnsafeString)(K),labelId:K.toLowerCase(),bordercolor:be,borderAlpha:pe,name:ue.name,tllabelfont:ue.tllabelfont,tllabelfontsize:ue.tllabelfontsize,tllabelfontcolor:ue.tllabelfontcolor,trlabelfont:ue.trlabelfont,trlabelfontsize:ue.trlabelfontsize,trlabelfontcolor:ue.trlabelfontcolor,bllabelfont:ue.bllabelfont,bllabelfontsize:ue.bllabelfontsize,bllabelfontcolor:ue.bllabelfontcolor,brlabelfont:ue.brlabelfont,brlabelfontsize:ue.brlabelfontsize,brlabelfontcolor:ue.brlabelfontcolor});Y.sortedColorArr=Y.colorArr.slice(0)}else Y.noValidRange=!0,Y.colorArr=[],Y.sortedColorArr=[]}},O.getColorObj=function(j){if(j===d)return{outOfRange:!0};var Y=this,W,J=Y.sortedColorArr,X=Y.gradient?1:0,E=J[X],ee,le,G=j;if(Y.mapByCategory){for(G=(0,P.parseUnsafeString)(G).toLowerCase()||G.toString().toLowerCase();E;){if(E.labelId===G||E.maxvalue>=G&&E.minvalue<=G)return{code:E.code,alpha:E.alpha||"100",oriAlpha:E.oriAlpha,seriesIndex:X,legendItemId:E.legendItemId,tlLabelFont:E.tllabelfont,tlLabelFontSize:E.tllabelfontsize,tlLabelFontColor:E.tllabelfontcolor,trLabelFont:E.trlabelfont,trLabelFontSize:E.trlabelfontsize,trLabelFontColor:E.trlabelfontcolor,blLabelFont:E.bllabelfont,blLabelFontSize:E.bllabelfontsize,blLabelFontColor:E.bllabelfontcolor,brLabelFont:E.brlabelfont,brLabelFontSize:E.brlabelfontsize,brLabelFontColor:E.brlabelfontcolor};X+=1,E=J[X]}return{outOfRange:!0}}else if(Y.gradient){if(Y.scaleMin<=G&&Y.scaleMax>=G){for(;E&&E.maxvalue<G;)X+=1,E=J[X];return le=(G-E.minvalue)/E.range,{code:R(J[X-1].codeRGB,E.codeRGB,le).hex}}return{outOfRange:!0}}for(;E;){if(G<E.minvalue&&!W&&(X===0?ee={code:E.code,alpha:E.alpha||"100",oriAlpha:E.oriAlpha,seriesIndex:X,name:E.name,label:E.label,outOfRange:!0,bordercolor:E.bordercolor,borderalpha:E.borderAlpha}:ee={code:J[X-1].code,alpha:J[X-1].alpha||"100",oriAlpha:J[X-1].oriAlpha,seriesIndex:X,name:J[X-1].name,label:J[X-1].label,outOfRange:!0,bordercolor:J[X-1].bordercolor,borderalpha:J[X-1].borderAlpha}),G>E.maxvalue&&X===J.length-1&&(ee={code:E.code,alpha:E.alpha||"100",oriAlpha:E.oriAlpha,seriesIndex:X,name:E.name,label:E.label,outOfRange:!0,bordercolor:E.bordercolor,borderalpha:E.borderAlpha}),E.maxvalue>G&&E.minvalue<=G?ee={code:E.code,alpha:E.alpha||"100",oriAlpha:E.oriAlpha,seriesIndex:X,name:E.name,label:E.label,bordercolor:E.bordercolor,borderalpha:E.borderAlpha}:G===E.maxvalue&&(W={code:E.code,alpha:E.alpha||"100",oriAlpha:E.oriAlpha,seriesIndex:X,name:E.name,label:E.label,bordercolor:E.bordercolor,borderalpha:E.borderAlpha,tlLabelFont:E.tllabelfont,tlLabelFontSize:E.tllabelfontsize,tlLabelFontColor:E.tllabelfontcolor,trLabelFont:E.trlabelfont,trLabelFontSize:E.trlabelfontsize,trLabelFontColor:E.trlabelfontcolor,blLabelFont:E.bllabelfont,blLabelFontSize:E.bllabelfontsize,blLabelFontColor:E.bllabelfontcolor,brLabelFont:E.brlabelfont,brLabelFontSize:E.brlabelfontsize,brLabelFontColor:E.brlabelfontcolor}),X===J.length-1&&W)return W;if(ee)return ee.tlLabelFont=E.tllabelfont,ee.tlLabelFontSize=E.tllabelfontsize,ee.tlLabelFontColor=E.tllabelfontcolor,ee.trLabelFont=E.trlabelfont,ee.trLabelFontSize=E.trlabelfontsize,ee.trLabelFontColor=E.trlabelfontcolor,ee.blLabelFont=E.bllabelfont,ee.blLabelFontSize=E.bllabelfontsize,ee.blLabelFontColor=E.bllabelfontcolor,ee.brLabelFont=E.brlabelfont,ee.brLabelFontSize=E.brlabelfontsize,ee.brLabelFontColor=E.brlabelfontcolor,ee;X+=1,E=J[X]}if(!J.length)return{outOfRange:!0}},O.getColorRangeArr=function(j,Y){var W,J,X,E,ee,le,G=[],U,ae,re=j,fe=Y;if(!this.defaultAsigned&&(re>fe&&(W=re,re=fe,fe=W),re<fe&&(E=this.getColorObj(re),le=this.getColorObj(fe),E&&le))){for(ee=re,J=E.seriesIndex,X=le.seriesIndex;J<=X;J+=1)U=(0,P.extend2)({},this.colorArr[J]),U.minvalue!==ee&&(U.minvalue=ee),G.push(U),ae=U,ee=U.maxvalue;ae&&(ae.maxvalue=fe)}return G},oe}(Ce.ComponentInterface),ie=Fe;return $e.default=ie,$e}var Ze={},Ct;function Xt(){if(Ct)return Ze;Ct=1;var ge=Oe;Ze.__esModule=!0,Ze.default=void 0;var de=ge(ze()),Ae=He(),P=Ge(),Ce=",",D=function(ie,z,oe){var O=ie.value,B=(0,P.HEXtoRGB)(ie.code),j=(0,P.HEXtoRGB)(z.code),Y;return Y=z.value-O,(0,P.RGBtoHex)([Math.round(B[0]+(j[0]-B[0])/Y*(oe-O)),Math.round(B[1]+(j[1]-B[1])/Y*(oe-O)),Math.round(B[2]+(j[2]-B[2])/Y*(oe-O))])},R=function(Fe){(0,de.default)(ie,Fe);function ie(){var oe;return oe=Fe.call(this)||this,oe.colorRange={},oe.valueRatio={},oe.data={},oe.mapByPercent=P.UNDEF,oe}var z=ie.prototype;return z.getType=function(){return"colorComponent"},z.getName=function(){return"gradientColorRange"},z.configure=function(O){if(O){var B=this,j,Y,W;for(B.data=O,B.appender=P.BLANKSTRING,W=B.colorRange=O.colorRange.sort(function(X,E){return X.value-E.value}),B.valueRatio=P.UNDEF,B.values=[],j=0,Y=W.length;j<Y;j++)B.values.push(W[j].value)}},z.getValueRatio=function(){var O=this.colorRange,B,j,Y=O.length,W=this.valueRatio,J=O[Y-1].value,X=O[0].value,E=J-X,ee,le=0;if(W)return W;for(W=this.valueRatio=[],j=0;j<Y;j++)B=O[j],ee=(B.value-X)/E,W.push((ee-le)*100),le=ee;return W},z.getCumulativeValueRatio=function(){var O=this.colorRange,B,j,Y=O.length,W=O[0].value,J=O[Y-1].value,X=[];for(j=0;j<Y;j++)B=O[j],X.push((B.value-W)/(J-W)*100);return X},z.getBoxFill=function(O){var B=this.colorRange,j,Y,W=B.length,J=[],X;for(X=O?90:0,Y=0;Y<W;Y++)j=B[Y],J.push(j.code);return(0,P.toRaphaelColor)({FCcolor:{alpha:"100,100,100",angle:X,color:J.join(Ce),ratio:this.getValueRatio().join(Ce)}})},z.getColorByValue=function(O){var B=this.values,j=this.colorRange,Y,W,J,X;if(!(O===P.UNDEF||O===null)){for(W=0,Y=B.length;W<Y;W++)if(O===B[W]){X=j[W].code;break}else if(!W&&O<B[W]){J=!0;break}else if(W===Y-1&&O>B[W]){J=!0;break}else if(O>B[W]&&O<B[W+1]){X=D(j[W],j[W+1],O);break}if(!J)return X}},z.getLabelByValue=function(O){var B=this.values,j=this.colorRange,Y,W,J,X;if(!(O===P.UNDEF||O===null)){for(W=0,Y=B.length;W<Y;W++)if(O===B[W]){X=j[W].label;break}else if(!W&&O<B[W]){J=!0;break}else if(W===Y-1&&O>B[W]){J=!0;break}else if(O>B[W]&&O<B[W+1]){X=j[W].label;break}if(!J)return X}},ie}(Ae.ComponentInterface),d=R;return Ze.default=d,Ze}var yt;function Ut(){if(yt)return Ye;yt=1;var ge=Oe;Ye.__esModule=!0,Ye.default=void 0;var de=ge(ze()),Ae=He(),P=ge(Wt()),Ce=ge(Xt()),D=Ge(),R="gradient",d="icon",Fe="none";function ie(X){return(0,D.getLightColor)(X,1)}function z(X){var E=X||j;return(0,D.getValidColor)(E)||j}var oe="rgba(192,192,192,"+(D.isIE?.002:1e-6)+")",O,B="%",j="#000000",Y=function(){var X,E={};E.legendCarpetConf={spreadFactor:.85,allowDrag:!1,captionAlignment:"center",padding:{v:3,h:3},style:{fill:"#e4d9c1",stroke:"#c4b89d"}},E.legendCaptionConf={spreadFactor:.2,padding:{v:2,h:2},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"bold",fontStyle:"normal"},bound:{style:{stroke:"none"}}},E.legendBodyConf={spreadFactor:.8,padding:{v:2,h:2},bound:{style:{stroke:"none"}}},E.legendAxisConf={legendAxisHeight:11,spreadFactor:.4,padding:{v:1,h:1},style:{stroke:"none","stroke-opacity":0,"stroke-width":1},line:{grooveLength:3,offset:8,style:{stroke:"rgba(255, 255, 255, 0.65)","stroke-width":1.5}},shadow:{style:{stroke:"none",fill:(0,D.toRaphaelColor)({FCcolor:{alpha:"25,0,0",angle:360,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}},bound:{style:{stroke:"none"}}},E.sliderGroupConf={showTooltip:1,outerCircle:{rFactor:1.4,style:{fill:oe,stroke:"#757575","stroke-width":3}},innerCircle:{rFactor:.65,style:{fill:oe,stroke:"#FFFFFF"}}},E.axisTextItemConf={spreadFactor:.3,padding:{v:1,h:1},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"normal",fontStyle:"normal"}};function ee(le){var G=X.getFromEnv("number-formatter"),U,ae,re;for(U=0,ae=le.length;U<ae;U++)re=le[U].maxvalue,re&&(le[U].maxvalue=G.getCleanValue(re))}return{init:function(G){X=G.chart},legacyDataParser:function(G,U){var ae={},re=X.getFromEnv("number-formatter"),fe=X.getFromEnv("dataSource"),me=fe.data,he,ne,pe,be,ue,Pe,we,Z,K,q,H,T,v=U||{};if(!G)return!1;for(X.defaultDatasetType==="maps"&&(v.min===O||v.max===O)?(v={min:1/0,max:-1/0},me&&me.forEach(function(x){v.min=Math.min(v.min,(0,D.pluckNumber)(x.value,v.min)),v.max=Math.max(v.max,(0,D.pluckNumber)(x.value,v.min))})):X.getName()==="HeatMap"&&(v.min===O||v.max===O)&&(v={min:1/0,max:-1/0},fe.dataset.forEach(function(x){x.data&&x.data.forEach(function(p){v.min=Math.min(v.min,(0,D.pluckNumber)(p.value,v.min)),v.max=Math.max(v.max,(0,D.pluckNumber)(p.value,v.max))})})),ae.mapByPercent=H=!!(0,D.pluckNumber)(G.mapbypercent,0),he=G.color||[],G.minvalue===O&&(G.minvalue=v.min!==O?H?0:v.min:0),G.maxvalue===O&&(G.maxvalue=v.max!==O?H?100:v.max:100),(G.maxvalue===G.minvalue||v.min===1/0||v.max===-1/0)&&(G.minvalue=0,G.maxvalue=100),T=!1,ue=0,we=he.length;ue<we;ue++)if(he[ue].maxvalue){T=!0;break}for(T||(he=[]),pe=G.code,Z=ae.colorRange=[],ae.gradient=!!(0,D.pluckNumber)(G.gradient,1),he.length?pe=z(pe):(pe?(be=z(pe),pe=z()):(pe=z(),be=ie(pe)),he.push({code:be,maxvalue:G.maxvalue,label:O})),ee(he),he=he.sort(function(p,r){return p.maxvalue-r.maxvalue}),K=q=G.minvalue&&re.getCleanValue(G.minvalue),q=(K!==O||K!==null)&&(H?K+B:re.legendValue(K)),Z.push({code:(0,D.dehashify)(pe),value:K,displayValue:q,label:G.startlabel}),ue=0,we=he.length;ue<we;ue++)ne=he[ue],Pe=z(ne.code||ne.color),K=q=ne.maxvalue,!isNaN(parseInt(K,10))&&(q=(K!==O||K!==null)&&(H?K+B:re.legendValue(K)),Z.push({code:(0,D.dehashify)(Pe),value:K,displayValue:q,label:ne.label||ne.displayvalue}));return Z[Z.length-1].label=G.endlabel||ne.label,ae},getDefaultConf:function(G){return E[G]}}}(),W=function(X){(0,de.default)(E,X);function E(){var le;return le=X.call(this)||this,le.datasource={},le.config.legendItemIds=[],le}var ee=E.prototype;return ee.configure=function(){var G=this,U=this.getFromEnv("chart"),ae,re,fe=this.getFromEnv("dataSource").chart.mapbycategory,me,he=U.config.showLegend,ne=U.getChildren("colorRange")&&U.getChildren("colorRange")[0];switch(U.addToEnv("colorManager",G),G.datasource=U.getFromEnv("dataSource"),ae=G.datasource.colorrange,ne&&ne.remove({instant:!0}),he||(G.config.legendItemIds=[]),U.defaultDatasetType==="maps"?ae.gradient&&Number(ae.gradient)?re=R:ae.color?re=d:re=Fe:U.getName()==="TreeMap"||ae.gradient&&ae.gradient!=="0"&&!Number(fe)?re=R:re=d,re){case R:Y.init({chart:U}),me=Y.legacyDataParser(ae),(0,D.componentFactory)(U,Ce.default,"colorRange",1,[me]),ne=U.getChildren("colorRange")[0],U.addToEnv("colorRange",ne),me||(ne._dontPlot=!0),G.config.legendItemIds=[],G._configureGradientLegend(ne);break;case"icon":(0,D.componentFactory)(U,P.default,"colorRange",1,[{colorRange:ae,sortLegend:0,mapByCategory:(0,D.pluckNumber)(fe,0),defaultColor:"cccccc",numberFormatter:U.getFromEnv("number-formatter")}]),U.addToEnv("colorRange",U.getChildren("colorRange")[0]),he&&G._addLegendItems();break;case"none":U.deleteFromEnv("colorManager"),G.config.legendItemIds=[]}},ee._configureGradientLegend=function(G){var U=this,ae=U.getFromEnv("chart").getFromEnv("gLegend");ae&&(ae.setColorRange(G),U.addExtEventListener("rangeUpdated",function(re,fe){U.fireEvent("legendUpdate",{"original-event":re,maxMinArray:fe,component:"gradientlegend"})},ae))},ee._addLegendItems=function(){var G=this,U=G.config,ae=G.getFromEnv("chart"),re=ae.getChildren("legend")[0],fe=ae.getFromEnv("colorRange").colorArr,me,he,ne=fe.length,pe,be,ue;for(be=0;be<ne;be++)ue={label:(0,D.pluck)(fe[be].label,fe[be].displayvalue),datasetObj:fe[be],index:be},he=(0,D.getLightColor)(fe[be].code,40),me={FCcolor:{color:fe[be].code+","+fe[be].code+","+he,ratio:"0,70,30",angle:270,alpha:"100,100,100"}},pe=re.getItem(U.legendItemIds[be]),pe||(U.legendItemIds.push(re.createItem(G)),pe=re.getItem(U.legendItemIds[be]),pe.addEventListener("fc-click",pe.itemClickFn)),pe.removeLegendState("hidden"),fe[be].legendItemId=pe&&pe.getId(),pe.configure(ue),pe.setStateCosmetics("default",{symbol:{fill:(0,D.toRaphaelColor)(me),rawFillColor:fe[be].code}});for(be=ne;be<U.legendItemIds.length;be++)re.disposeItem(U.legendItemIds[be]);U.legendItemIds.splice(ne)},ee.legendInteractivity=function(G){var U=this,ae=U.getFromEnv("colorRange").colorArr[G.config.index];U.fireEvent("legendUpdate",{legendItem:G,colorObj:ae,component:"legend"})},ee.getColor=function(G){var U=this;return!Number(U.datasource.chart.mapbycategory)&&Number(U.datasource.colorrange.gradient)?{code:U.getColorByValue(G),label:U.getLabelByValue(G)}:U.getColorObj(G)},ee.getValueRatio=function(){return this.getFromEnv("colorRange").getValueRatio()},ee.getCumulativeValueRatio=function(){return this.getFromEnv("colorRange").getCumulativeValueRatio()},ee.getBoxFill=function(G){return this.getFromEnv("colorRange").getBoxFill(G)},ee.getColorByValue=function(G){return this.getFromEnv("colorRange").getColorByValue(G)},ee.getColorObj=function(G){return this.getFromEnv("colorRange").getColorObj(G)},ee.getLabelByValue=function(G){return this.getFromEnv("colorRange").getLabelByValue(G)},E}(Ae.ComponentInterface),J=W;return Ye.default=J,Ye}var xt;function qt(){if(xt)return lt;xt=1;var ge=Oe;lt.__esModule=!0,lt.default=P;var de=ge(Ut());function Ae(Ce){var D=Ce.getChildren("colorManager");if(!Ce.getFromEnv("dataSource").colorrange){D&&(D[0].config.legendItemIds=[]),Ce.deleteFromEnv("colorManager");return}if(D){Ce.addToEnv("colorManager",D[0]),D[0].configure();return}D=new de.default,Ce.attachChild(D,"colorManager"),Ce.addToEnv("colorManager",D),D.configure()}function P(Ce){Ae(Ce)}return lt}var st={},Qe={},Ft;function Kt(){if(Ft)return Qe;Ft=1;var ge=Oe;Qe.__esModule=!0,Qe.default=void 0;var de=ge(Et()),Ae=ge(ze()),P=Ge(),Ce=He(),D,R={},d="rgba(192,192,192,"+(P.isIE?.002:1e-6)+")",Fe,ie=!1,z=!0,oe="%",O=",",B="#000000",j="canvasWidth",Y="canvasLeft",W="canvasHeight",J="canvasTop",X="vertical",E="absolute",ee="top",le="bottom",G="left",U="right",ae="GL_CARPET",re="GL_CAPTION",fe="GL_BODY",me="GL_LABELS",he="FL_AXIS",ne="GL_SG1",pe="GL_VALUES",be="fc-gradient-legend",ue={}.hasOwnProperty,Pe="M",we="L",Z;function K(c,n){return function l(o,e){var t,s;for(s in o)ue.call(o,s)&&(t=o[s],e[s]===D?e[s]=t:typeof t=="object"&&t!==null&&l(t,e[s]))}(c,n),n}function q(c){var n=c||B;return(0,P.getValidColor)(n)||B}function H(c){return(0,P.getLightColor)(c,1)}function T(c){var n=c.fontSize+"",l;return n&&(l=n.replace(/(\d+)(px)*/,"$1px"),c.fontSize=l),c}function v(c){return!!(c===D||typeof c>"u"||c===null||isNaN(c))}R.CAPTION="CAPTION",R.LEGEND_BODY="LEGEND_BODY",R.AXIS_LABEL="LEGEND_LABEL",R.LEGEND_AXIS="LEGEND_AXIS",R.RANGE="RANGE",R.AXIS_VALUE="AXIS_VALUE",Fe=function(){var c,n={};n.legendCarpetConf={spreadFactor:.85,allowDrag:!1,captionAlignment:"center",padding:{v:3,h:3},style:{fill:"#e4d9c1",stroke:"#c4b89d"}},n.legendCaptionConf={spreadFactor:.2,padding:{v:2,h:2},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"bold",fontStyle:"normal"},bound:{style:{stroke:"none"}}},n.legendBodyConf={spreadFactor:.8,padding:{v:2,h:2},bound:{style:{stroke:"none"}}},n.legendAxisConf={legendAxisHeight:11,spreadFactor:.4,padding:{v:1,h:1},style:{stroke:"none","stroke-opacity":0,"stroke-width":1},line:{grooveLength:3,offset:8,style:{stroke:"rgba(255, 255, 255, 0.65)","stroke-width":1.5}},shadow:{style:{stroke:"none",fill:(0,P.toRaphaelColor)({FCcolor:{alpha:"25,0,0",angle:360,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}},bound:{style:{stroke:"none"}}},n.sliderGroupConf={showTooltip:1,outerCircle:{rFactor:1.4,style:{fill:d,stroke:"#757575","stroke-width":3}},innerCircle:{rFactor:.65,style:{fill:d,stroke:"#FFFFFF"}}},n.axisTextItemConf={spreadFactor:.3,padding:{v:1,h:1},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"normal",fontStyle:"normal"}};function l(o){var e=c.getFromEnv("number-formatter"),t,s,a;for(t=0,s=o.length;t<s;t++)a=o[t].maxvalue,a&&(o[t].maxvalue=e.getCleanValue(a))}return{init:function(e){c=e.chart},legacyDataParser:function(e,t){var s={},a=c.getFromEnv("number-formatter"),g,m,u,f,k,b,C,A,_,N,M,$;if(!e)return!1;for(s.mapByPercent=M=!!(0,P.pluckNumber)(e.mapbypercent,0),g=e.color||[],e.minvalue===D&&(e.minvalue=t.min!==D?M?0:t.min:0),e.maxvalue===D&&(e.maxvalue=t.max!==D?M?100:t.max:100),$=!1,k=0,C=g.length;k<C;k++)if(g[k].maxvalue){$=!0;break}for($||(g=[]),u=e.code,A=s.colorRange=[],s.gradient=!!(0,P.pluckNumber)(e.gradient,1),g.length?u=q(u):(u?(f=q(u),u=q()):(u=q(),f=H(u)),g.push({code:f,maxvalue:e.maxvalue,label:D})),l(g),g=g.sort(function(V,Q){return V.maxvalue-Q.maxvalue}),_=N=e.minvalue&&a.getCleanValue(e.minvalue),N=(_!==D||_!==null)&&(M?_+oe:a.legendValue(_)),A.push({code:(0,P.dehashify)(u),value:_,displayValue:N,label:e.startlabel}),k=0,C=g.length;k<C;k++)m=g[k],b=q(m.code||m.color),_=N=m.maxvalue,!isNaN(parseInt(_,10))&&(N=(_!==D||_!==null)&&(M?_+oe:a.legendValue(_)),A.push({code:(0,P.dehashify)(b),value:_,displayValue:N,label:(0,P.parseUnsafeString)(m.label||m.displayvalue)}));return A[A.length-1].label=(0,P.parseUnsafeString)(e.endlabel||m.label),s},getDefaultConf:function(e){return n[e]}}}();var x=function(c){(0,Ae.default)(l,c);var n=l.prototype;n.getType=function(){return"gradientLegend"},n.getName=function(){return"gLegend"};function l(){var o;return o=c.call(this)||this,Z=(0,de.default)(o),o.enabled=!1,o.drawOptions={},o.components={},o}return n.setColorRange=function(e){var t=this.drawOptions.colorRange=e;t&&t._preparationGoneWrong&&(this._dontPlot=!0)},n.configureAttributes=function(){var e=this,t=e.getFromEnv("chart"),s=e.getFromEnv("dataSource").chart,a=e.conf={},g=s.outcnvbasefont,m=this.computeFontSize(s.outcnvbasefontsize),u=s.outcnvbasefontcolor,f=t.config.dataLabelStyle,k,b,C,A,_,N,M,$,V,Q,te,se;Fe.init({chart:t}),e.data=e.getFromEnv("dataSource").colorrange,!e._dontPlot&&(e.drawOptions={smartLabel:e.getFromEnv("smartLabel"),gLegend:e},e._dontPlot=!1,e._recalculateLogicalSpace=!0,a.caption=(0,P.parseUnsafeString)((0,P.pluck)(s.legendcaption)),a.legendPosition=(0,P.pluck)(s.legendposition,"bottom").toLowerCase(),a.legendXPosition=(0,P.pluckNumber)(s.legendxposition,0),a.legendYPosition=(0,P.pluckNumber)(s.legendyposition,0),a.legendMaxHeight=(0,P.pluckNumber)(s.legendmaxheight,0),a.legendMaxWidth=(0,P.pluckNumber)(s.legendmaxwidth,0),a.legendVertical=typeof s.legendorientation=="string"&&s.legendorientation.toLowerCase()===X,a.showLegend=(0,P.pluckNumber)(s.showlegend,1),a.interactiveLegend=(0,P.pluckNumber)(s.interactivelegend,1),a.showLegendLabels=(0,P.pluckNumber)(s.showlegendlabels,1),k=s.legenditemfontcolor||u,b=s.legenditemfont||g,C=s.legenditemfontsize||m,A=(0,P.pluckFontSizeMaintainUnit)(s.legenditemfontsize,s.outcnvbasefontsize),_=(0,P.pluckNumber)(s.legenditemfontbold,0),N=s.legendcaptionfontcolor||u,M=s.legendcaptionfont||g,$=s.legendcaptionfontsize||m,V=(0,P.pluckFontSizeMaintainUnit)(s.legendcaptionfontsize,s.outcnvbasefontsize),Q=(0,P.pluckNumber)(s.legendcaptionfontbold,1),te=s.legendaxisbordercolor?(0,P.hashify)((0,P.dehashify)(s.legendaxisbordercolor)):D,se=te?(0,P.pluckNumber)(s.legendaxisborderalpha,100)/100:D,a.axisTextItemConf={style:{fill:k?(0,P.convertColor)((0,P.pluck)(k)):f.color,fontFamily:b?(0,P.pluck)(b):f.fontFamily,fontSize:C?(0,P.pluckNumber)(C):f.fontSize.match(/\d+/)[0],fontSizeWithUnit:(0,P.pluckFontSizeMaintainUnit)(A,f.fontSize.match(/\d+/)[0]),fontWeight:_?"bold":f.fontWeight}},a.legendCaptionConf={style:{fill:N?(0,P.convertColor)((0,P.pluck)(N)):f.color,fontFamily:M?(0,P.pluck)(M):f.fontFamily,fontSize:$?(0,P.pluckNumber)($):f.fontSize.match(/\d+/)[0],fontSizeWithUnit:(0,P.pluckFontSizeMaintainUnit)(V,f.fontSize.match(/\d+/)[0]),fontWeight:Q?"bold":f.fontWeight,fontStyle:"normal"}},a.legendAxisConf={legendAxisHeight:11,style:{stroke:te,"stroke-opacity":se},line:{style:{stroke:(0,P.convertColor)((0,P.pluck)(s.legendscalelinecolor,"FFF8E9"),(0,P.pluckNumber)(s.legendscalelinealpha,100)),"stroke-width":(0,P.pluckNumber)(s.legendscalelinethickness)}}},a.sliderGroupConf={showTooltip:(0,P.pluckNumber)(s.showtooltip,1),outerCircle:{rFactor:(0,P.pluckNumber)(s.sliderdiameterfactor),style:{stroke:(0,P.convertColor)((0,P.pluck)(s.legendpointerbordercolor,"757575"),(0,P.pluckNumber)(s.legendpointerborderalpha,100))}},innerCircle:{rFactor:(0,P.pluckNumber)(s.sliderholediameterfactor),style:{stroke:(0,P.convertColor)((0,P.pluck)(s.legendpointercolor,"FFFFFF"),(0,P.pluckNumber)(s.legendpointeralpha,100))}}},a.legendCarpetConf={spreadFactor:(0,P.pluckNumber)(s.legendspreadfactor),allowDrag:!!(0,P.pluckNumber)(s.legendallowdrag,0),captionAlignment:(0,P.pluck)(s.legendcaptionalignment,"center"),style:{fill:(0,P.convertColor)((0,P.pluck)(s.legendbgcolor,"e4d9c1"),(0,P.pluckNumber)(s.legendbgalpha,100)),stroke:(0,P.convertColor)((0,P.pluck)(s.legendbordercolor,"c4b89d"),(0,P.pluckNumber)(s.legendborderalpha,100)),"stroke-width":(0,P.pluckNumber)(s.legendborderthickness,1)}})},n.postConfigureInit=function(){var e=this,t=e.conf,s,a,g,m,u,f,k,b,C,A,_,N=t.legendPosition?t.legendPosition.split("-"):[],M;e.elem={},t.interactiveLegend?(u=K(Fe.getDefaultConf("sliderGroupConf"),t.sliderGroupConf),this.sGroup?(m=e.elem.sGroup=this.sGroup,m.configure(u),e.elem.sGroup.gLegend=e):(this.sGroup=e.elem.sGroup=m=new F(u),m.configure(u),e.elem.sGroup.gLegend=e)):(this.sGroup&&this.sGroup.dispose(),this.sGroup&&delete this.sGroup),u=K(Fe.getDefaultConf("legendCarpetConf"),t.legendCarpetConf),u.legendPosition=N[0]===E&&!t.legendVertical||N[0]===ee||N[0]===le?le:U,M=Fe.getDefaultConf("legendBodyConf"),N[0]===E&&!t.legendVertical||N[0]===ee||N[0]===le?(e.drawOptions.refSideKey=j,e.drawOptions.refOffsetKey=Y,f=K(Fe.getDefaultConf("axisTextItemConf"),t.axisTextItemConf),M.legendPosition=le,_=K(Fe.getDefaultConf("legendAxisConf"),t.legendAxisConf),_.legendPosition=le,f.legendPosition=le):(e.drawOptions.refSideKey=W,e.drawOptions.refOffsetKey=J,f=K(Fe.getDefaultConf("axisTextItemConf"),t.axisTextItemConf),M.legendPosition=U,_=K(Fe.getDefaultConf("legendAxisConf"),t.legendAxisConf),_.legendPosition=U,f.legendPosition=U),Object.keys(this.components).length||(this.components.LegendCarpet=new r,this.components.LegendBody=new w,this.components.LegendAxis=new S,this.components.LegendValues=new h,t.showLegendLabels&&(this.components.LegendLabels=new I)),g=this.components.LegendAxis,C=this.components.LegendValues,a=this.components.LegendCarpet,k=this.components.LegendBody,t.showLegendLabels&&(b=this.components.LegendLabels),this.components.LegendCarpet.configure(u),this.components.LegendValues.configure(f),this.components.LegendAxis.configure(_),this.components.LegendBody.configure(e.drawOptions.colorRange,M,f),t.showLegendLabels&&b.configure(f),t.caption?(A=K(Fe.getDefaultConf("legendCaptionConf"),t.legendCaptionConf),this.componentCaption&&Object.keys(this.componentCaption).length?this.componentCaption.configure(t.caption,A):(s=this.componentCaption=new y,s.configure(t.caption,A)),a.addCompositions(this.componentCaption,R.CAPTION)):(a.removeCompositions(R.CAPTION),this.componentCaption&&this.componentCaption.dispose(),delete this.componentCaption),m&&g.addCompositions(m,R.RANGE),b&&k.addCompositions(b,R.AXIS_LABEL),k.addCompositions(g,R.LEGEND_AXIS),k.addCompositions(C,R.AXIS_VALUE),a.addCompositions(k,R.LEGEND_BODY),e.elem.gl=new p(a)},n.getValueRange=function(){var e=this,t=e.elem&&e.elem.sGroup,s=t.sliders,a=t.extremes,g,m;return g=s.false.currPos,m=a[1]-a[0]+s.true.currPos,[{min:t.getValueFormPixel(g),max:t.getValueFormPixel(m)}]},n._dispose=function(){var e=this;e.elem&&e.elem.gl&&e.elem.gl.dispose(),e.elem={},c.prototype._dispose.call(this)},n.getCalculatedLogicalSpace=function(){return this._logicalArea},n.setCalculatedLogicalSpace=function(e){this._logicalArea=e},n.getLogicalSpace=function(e){var t=this,s=t.conf,a={height:0,width:0},g,m=t.drawOptions,u,f=t.getFromEnv("chartConfig"),k,b=s.legendPosition.split("-")[0]===E,C,A;return t._recalculateLogicalSpace?t._dontPlot||(t._recalculateLogicalSpace=!1,t.postConfigureInit(),!s.showLegend)?a:(u=m.refSideKey,k=m.refOffsetKey,t.drawOptions.refSide=f[u],t.drawOptions.refOffset=f[k],t.drawOptions.maxOtherSide=e||t.drawOptions.maxOtherSide,t.elem.gl&&(g=t.elem.gl.getLogicalSpace(t.drawOptions,!0),t.elem.gl&&t.setCalculatedLogicalSpace(g)),t.getCalculatedLogicalSpace()):(u=m.refSideKey,k=m.refOffsetKey,t.drawOptions.refSide=f[u],b?(s.legendMaxHeight<=0?C=f.height*.8:s.legendMaxHeight<=f.height?C=s.legendMaxHeight:C=f.height,s.legendMaxWidth<=0?A=f.width*.8:s.legendMaxWidth<=f.width?A=s.legendMaxWidth:A=f.width,s.legendVertical?(t.drawOptions.refSide=C,t.drawOptions.maxOtherSide=A):(t.drawOptions.refSide=A,t.drawOptions.maxOtherSide=C)):(t.drawOptions.refOffset=f[k],t.drawOptions.maxOtherSide=e||t.drawOptions.maxOtherSide),g=t.elem.gl.getLogicalSpace(t.drawOptions,!0),t.setCalculatedLogicalSpace(g),t.getCalculatedLogicalSpace()||a)},n.resetLegend=function(){var e=this,t;t=e.elem&&e.elem.sGroup,t&&t.reset()},n._calculateTopPosition=function(e){var t=this,s=t.getFromEnv("chart"),a=s.config,g=e,m=s.getChildren("caption")&&s.getChildren("caption")[0],u=s.getChildren("subCaption")&&s.getChildren("subCaption")[0],f=s.getChildren("chartMenuBar")&&s.getChildren("chartMenuBar")[0],k=a.oriTopSpace;return!a.toolbarY&&f&&f.props&&f.props.height&&(k>f.props.height+f.props.y||(g=f.props.y+f.props.height)),m&&m.config&&m.config.text&&m.config.text!==P.BLANKSTRING&&m.config.height&&m.config.isOnTop===1&&(g=m.config.height+m.config.y+m.config.captionPadding),u&&u.config&&u.config.height&&u.config.isOnTop===1&&(g=u.config.y+u.config.height+(m&&m.config&&m.config.captionPadding||0)),g>e?g:e},n.allocatePosition=function(){var e=this.getFromEnv("chart"),t=e.config,s=this,a=s.conf||{},g=a.legendPosition.split("-"),m=t.canvasLeft,u=t.canvasTop,f=t.canvasWidth,k=t.canvasHeight,b=t.marginTop,C=t.marginBottom,A=t.marginRight,_=t.marginLeft,N,M,$,V,Q,te,se,ye;a.axisTextItemConf.style.fontSize=this.computeFontSize(a.axisTextItemConf.style.fontSizeWithUnit),a.legendCaptionConf.style.fontSize=this.computeFontSize(a.legendCaptionConf.style.fontSizeWithUnit),e.config.gLegendEnabled&&(N=this.getCalculatedLogicalSpace(),$=a.width=N.width,V=a.height=N.height,g[0]===E?(se=t.width-$,ye=t.height-V,Q=a.legendXPosition<0?0:a.legendXPosition>se?se:a.legendXPosition,te=a.legendYPosition<0?0:a.legendYPosition>ye?ye:a.legendYPosition):g[0]===ee||g[0]===le?(M=f-$,g[1]===G?Q=m:g[1]===U?Q=m+(M>0?M:0):Q=m+(M<0?0:M/2),g[0]===ee?te=this._calculateTopPosition(b):te=t.height-N.height-C-(t.actionBarHeight||0)):(M=k-V,g[1]===ee?te=u:g[1]===le?te=u+M:te=u+(M<0?0:M/2),g[0]===G?Q=_:Q=t.width-N.width-A),a.xPos=Q,a.yPos=te)},n.draw=function(){var e=this.getFromEnv("chart"),t=e.getFromEnv("dataSource").colorrange,s=this,a=s.conf||{},g=e.hasGradientLegend;e.config.gLegendEnabled&&t&&g&&s.drawLegendComponent(a.xPos,a.yPos,{parentGroup:e.getContainer("parentgroup"),animationManager:e.getFromEnv("animationManager")})},n.drawLegendComponent=function(e,t,s){var a=this,g=a.conf,m,u;if(!a._dontPlot){if(!g.showLegend){a.enabled=!1;return}a.drawOptions.animationManager=s.animationManager,a.drawOptions.parentGroup=s.parentGroup,a.drawOptions.x=e,a.drawOptions.y=t,a.drawOptions.maxOtherSide=a.drawOptions.maxOtherSide||s.maxOtherSide,u=a.elem.gl.draw(a.drawOptions),m=u.getBBox(),g.xPos=m.x,g.yPos=m.y,g.height=m.height,g.width=m.width,a.enabled=!0}},l}(Ce.ComponentInterface),p=function(){function c(l){this.carpet=l}var n=c.prototype;return n.draw=function(o){return this.carpet.draw(o)},n.getLogicalSpace=function(o,e){return this.carpet.getLogicalSpace(o,e)},n.dispose=function(){this.carpet&&this.carpet.group&&this.carpet.group.remove()},c}(),r=function(){function c(l){this.conf=l,this._id=ae,this.compositionsByCategory={},this.node=D,this.group=D,this._lSpace=D,this.autoRecalculate=!1,this.groupName=be,this.moveInstructions={}}var n=c.prototype;return n.configure=function(o){this.conf=o},n.getName=function(){return"LegendCarpet"},n.getType=function(){return"legend"},n.addCompositions=function(o,e){this.compositionsByCategory[e]=o},n.removeCompositions=function(o){delete this.compositionsByCategory[o]},n.getBoundingBox=function(o){var e=this.conf,t=e.spreadFactor,s=o.refSide,a=o.alignment,g=o.refOffset,m=o.x,u=o.y,f,k;return this.conf.legendPosition==="bottom"?(f=e.width=s*t,k=o.maxOtherSide,a&&(m===D||m===null)&&(m=(g+s)/2-f/2)):(k=e.height=s*t,f=o.maxOtherSide,a&&(u===D||u===null)&&(u=(g+s)/2-k/2)),{width:f,height:k,x:m,y:u}},n.getPostCalcDecisionsH=function(o,e){var t=this.conf,s=t.padding,a,g=0;this.moveInstructions={};for(a in e)g+=e[a].height||0;o.height=g+2*s.v},n.getLogicalSpace=function(o,e){var t=this._lSpace,s=["CAPTION","LEGEND_BODY"],a=this.conf,g=a.padding,m=this.compositionsByCategory,u,f,k,b,C=0,A={},_,N=0;if(t&&!e)return t.isImpure=!0,t;t=this._lSpace=f=this.getBoundingBox(o),(v(t.x)||v(t.y)||v(t.height)||v(t.width))&&(this.autoRecalculate=!0),k=K(f,{}),k.height-=2*g.v,k.width-=2*g.h,k.x+=g.h,k.y+=g.v;for(var M=0;M<s.length;M++)u=m[s[M]],u&&(_=K(k,{}),_.y+=C,C=k.height*u.conf.spreadFactor,_.height=C+N,b=u.getLogicalSpace(K(_,{}),o,e),N=_.height-b.height,A[s[M]]=b,C=b.height);return this.getPostCalcDecisions(f,A),this._lSpace=f,f},n.setupDragging=function(){var o=this.group,e=0,t=0,s=0,a=0;o.css({cursor:"move"}),o.drag(function(g,m){e=g,t=m,o.attr({transform:"t"+(s+e)+","+(a+t)})},function(){s+=e,a+=t},P.stubFN)},n.draw=function(o){var e=this.conf,t=this,s=["CAPTION","LEGEND_BODY"],a=this.compositionsByCategory,g=o.animationManager,m=o.parentGroup,u,f,k,b;this.getLogicalSpace(o,this.autoRecalculate),b=this._lSpace,this.group=u=g.setAnimation({el:this.group||"group",attr:{name:t.groupName},component:Z,container:m,label:"carpetGroup"}),this.node=g.setAnimation({el:this.node||"rect",attr:b,css:e.style,component:Z,container:u,label:"rect"});for(var C=0;C<s.length;C++)k=a[s[C]],k&&k.draw(e.captionAlignment,b,{animationManager:g,colorRange:o.colorRange,numberFormatter:o.numberFormatter,parentLayer:u,smartLabel:o.smartLabel,moveInstructions:this.moveInstructions[f],gLegend:o.gLegend});return e.allowDrag&&this.setupDragging(),this.node},n.getPostCalcDecisions=function(o,e){return this.conf.legendPosition==="bottom"?this.getPostCalcDecisionsH(o,e):this.getPostCalcDecisionsV(o,e)},n.getPostCalcDecisionsV=function(o,e){var t=this.conf,s=t.padding,a=Number.NEGATIVE_INFINITY,g,m,u=this.moveInstructions,f;this.getPostCalcDecisionsH(o,e);for(m in e)g=e[m].width,a=a<g?g:a;o.width=a+2*s.h;for(m in e)g=e[m].width,f=a-g,f&&(u[m]="t"+f/2+",0")},c}(),y=function(){function c(l,o){this.rawText=l,this.conf=o,this._id=re,this.node=D,this.bound=D,this._lSpace=D,this.LegendCaption={},this.LegendCaption.LEFT={x:function(t,s){return s.x+t.width/2+2}},this.LegendCaption.RIGHT={x:function(t,s){return s.x+s.width-t.width/2-2}},this.LegendCaption.CENTER={x:function(){var t=arguments[1];return t.x+t.width/2}}}var n=c.prototype;return n.configure=function(o,e){this.rawText=o,this.conf=e},n.getName=function(){return"LegendCaption"},n.getType=function(){return"caption"},n.getLogicalSpace=function(o,e,t){var s=this.conf,a=s.padding,g=this._lSpace,m=this.rawText,u=e.gLegend.getFromEnv("chartConfig"),f,k,b,C;return g&&!t?(g.isImpure=!0,g):(g=this._lSpace={bound:{height:0,width:0},node:{logicArea:D,smartText:D}},f=e.smartLabel,m?(k=K(o,{}),k.height-=2*a.v,k.width-=2*a.h,k.x+=a.h,k.y+=a.v,f.useEllipsesOnOverflow(u.useEllipsesWhenOverflow),C=K(this.conf.style,{}),T(C),f.setStyle(this._metaStyle=C),b=f.getSmartText(m,k.width,k.height),k.height=b.height,k.width=b.width,o.height=b.height+2*a.v,o.width=b.width+2*a.h,g.node.smartText=b,g.node.logicArea=k,g.bound=o,o):g.bound)},n.draw=function(){var o=this.conf,e,t=o.bound||{},s,a,g,m,u,f,k,b,C,A;return arguments.length>=3?(f=arguments[0],k=arguments[1],b=arguments[2]):arguments.length>=2&&(f=arguments[0],b=arguments[1]),e=b.parentLayer,A=b.animationManager,this.group=s=A.setAnimation({el:this.group||"group",attr:{name:"legend-caption"},css:o.style,component:Z,container:e}),this.getLogicalSpace(k,b),m=this._lSpace,C=m.node,g=m.bound,this.bound=a=A.setAnimation({el:this.bound||"rect",attr:g,css:t.style,container:s,component:Z}),u=typeof f=="string"?this.LegendCaption[f.toUpperCase()].x(C.smartText,k||C.logicArea):f,this.node=A.setAnimation({el:this.node||"text",attr:{text:C.smartText.text,x:u,y:C.logicArea.y+C.smartText.height/2,lineHeight:this._metaStyle.lineHeight,fill:o.style.fill},container:s,component:Z}),{group:s,bound:a,node:this.node}},n.dispose=function(){this.group.remove(),this.bound.remove(),this.node.remove()},c}(),w=function(){function c(l,o,e){this.colorRange=l,this.conf=o,this.childTextConf=e,this._id=fe,this.bound=D,this.group=D,this.compositionsByCategory={},this._lSpace=D,this.SC_STACK=[R.AXIS_LABEL,R.LEGEND_AXIS,R.AXIS_VALUE],this.DARW_STACK=[R.AXIS_VALUE,R.LEGEND_AXIS,R.AXIS_LABEL]}var n=c.prototype;return n.configure=function(o,e,t){this.colorRange=o,this.conf=e,this.childTextConf=t,this.compositionsByCategory={}},n.getName=function(){return"LegendBody"},n.getType=function(){return"legend"},n.addCompositions=function(o,e){this.compositionsByCategory[e]=o},n.getSpaceTaken=function(o){return this.conf.legendPosition==="bottom"?o.height:o.width},n.getLogicalSpace=function(o,e,t){var s=this._lSpace,a=this.conf,g=a.padding,m=this.compositionsByCategory,u,f,k,b,C,A=0,_,N;if(s&&!t)return s.isImpure=!0,s;for(s=this._lSpace={bound:{height:0,width:0},node:{logicArea:D}},b=K(o,{}),b.height-=2*g.v,b.width-=2*g.h,b.x+=g.h,b.y+=g.v,C=this.getCompositionPlotAreaFor(b),e.colorRange=this.colorRange,_=0,N=this.SC_STACK.length;_<N;_++)(u=m[this.SC_STACK[_]])&&(f=C(k,u.conf.spreadFactor),k=u.getLogicalSpace(K(f,{}),e,t),A+=this.getSpaceTaken(k));return this.updateEffectivePlotArea(o,b,A),s.node.logicArea=b,s.bound=o,o},n.draw=function(){var o=this.childTextConf,e=this.conf,t=e.bound.style||{},s=this.compositionsByCategory,a,g,m,u,f,k,b,C,A,_;for(arguments.length>=3?(k=arguments[1],C=arguments[2]):arguments.length>=2&&(C=arguments[1]),g=C.parentLayer,a=C.animationManager,this.getLogicalSpace(k,C),b=this._lSpace,this.group=f=a.setAnimation({el:this.group||"group",attr:{name:"legend-body",transform:"t0,0"},css:o.style,container:g,component:Z}),this.bound=m=a.setAnimation({el:this.bound||"rect",attr:b.bound,css:t,container:f,component:Z}),C.colorRange=this.colorRange,C.parentLayer=f,A=0,_=this.DARW_STACK.length;A<_;A++)(u=s[this.DARW_STACK[A]])&&u.draw(C);return C.moveInstructions&&f.attr({transform:C.moveInstructions}),{bound:m,group:f}},n.getCompositionPlotAreaFor=function(o){var e,t=this.conf.legendPosition==="bottom";return e=K(o,{}),function(s,a){var g=s;return g=g||{},t?(e.y+=g.height||0,e.height=o.height*a):(e.x+=g.width||0,e.width=o.width*a),e}},n.updateEffectivePlotArea=function(o,e,t){var s=this.conf,a=s.padding;this.conf.legendPosition==="bottom"?(e.height=t,o.height=t+2*a.v):(e.width=t,o.width=t+2*a.h)},c}(),I=function(){function c(l){this.conf=l,this.node=[],this._id=me}var n=c.prototype;return n.configure=function(o){this.conf=o},n.getType=function(){return"label"},n.getName=function(){return"LegendLabel"},n.getEffectivePlotArea=function(o){var e=this.conf,t=e.padding;return o.height-=2*t.v,o.width-=2*t.h,o.x+=t.h,o.y+=t.v,o},n.getLogicalSpace=function(o,e,t){var s=this.conf.legendPosition==="bottom",a=this._lSpace,g=this.conf,m=g.padding,u,f,k,b,C,A=[],_,N,M,$,V,Q,te,se,ye,ce,ve,Se,Re,Ie,ke,Te,Ee,xe=e.gLegend.getFromEnv("chartConfig"),Le=[],_e;if(a&&!t)return a.isImpure=!0,a;for(u=e.colorRange,f=e.smartLabel,V=u.getCumulativeValueRatio(),k=u.colorRange,a=this._lSpace={bound:{height:0,width:0},node:{logicArea:D,smartTexts:[]}},se=a.node.smartTexts,M=K(o,{}),ce=this.getEffectivePlotArea(M),_e=s?ce.width:ce.height,f.useEllipsesOnOverflow(xe.useEllipsesWhenOverflow),Ee=K(g.style,{}),T(this._metaStyle=Ee),f.setStyle(Ee),ve=f.getSmartText("W"),b=0,C=k.length;b<C;b++){if($=(0,P.parseUnsafeString)(k[b].label),!$){se[b]=D;continue}Le.push({oriIndex:b,label:$})}if(C=Le.length,C===0)return{height:0,width:0};for(C>1?Q=(V[Le[C-1].oriIndex]-V[Le[0].oriIndex])/2*_e/100:Q=Math.max(V[Le[0].oriIndex],100-V[Le[0].oriIndex])/2*_e/100,te=Q,s?(ke=f.getSmartText(Le[0].label,te,ce.height),ke.x=V[Le[0].oriIndex]*ce.width/100,_=ke.x+ke.width):(ke=f.getSmartText(Le[0].label,te,ce.width),ke.y=V[Le[0].oriIndex]*ce.height/100,_=ke.y+ke.width),A.push(ke.height),se[Le[0].oriIndex]=ke,s?(ke=f.getSmartText(Le[C-1].label,te,ce.height),ke.x=V[Le[C-1].oriIndex]*ce.width/100,N=ke.x-ke.width):(ke=f.getSmartText(Le[C-1].label,te,ce.width),ke.y=V[Le[C-1].oriIndex]*ce.height/100,N=ke.y-ke.width),A.push(ke.height),se[Le[C-1].oriIndex]=ke,Ie=_,b=1;b<C-1;b++)$=Le[b].label,Te=Le[b].oriIndex,ke=D,Se=b+1===C-1?N:V[Le[b+1].oriIndex]*_e/100,Re=V[Le[b].oriIndex]*_e/100,Q=Math.min(Re-Ie,Se-Re),Q>2*ve.width&&(s?(ke=f.getSmartText($,Q,ce.height),ke.x=V[Te]*ce.width/100):(ke=f.getSmartText($,Q,ce.width),ke.y=V[Te]*ce.height/100),Ie=Q,A.push(ke.height)),se[Le[b].oriIndex]=ke;return ye=Math.max.apply(Math,A),s?(ce.height=ye,o.height=ye+2*m.v):(ce.width=ye,o.width=ye+2*m.v),a.node.logicArea=ce,a.bound=o,o},n.draw=function(){var o=this.conf.legendPosition==="bottom",e,t,s=this.conf,a=s.bound&&s.bound.style||{stroke:"none"},g,m,u,f,k,b,C,A,_,N={},M;arguments.length>=2&&arguments[1]?(m=arguments[0],k=arguments[1]):arguments.length>=1&&(k=arguments[0]),M=k.animationManager,e=k.parentLayer,this.getLogicalSpace(m,k),f=this._lSpace,C=f.node.logicArea,A=f.node.smartTexts,this.group=g=M.setAnimation({el:this.group||"group",attr:{name:"legend-labels"},container:e,component:Z}),this.bound=t=M.setAnimation({el:this.bound||"rect",attr:f.bound,css:a,container:g,component:Z});for(var $=0;$<this.node.length;$++)this.node[$].remove();for(this.node=[],b=0,_=A.length;b<_;b++)u=A[b],u&&(o?(N.y=C.y+u.height/2,b===_-1?N.x=C.x+u.x-u.width/2:b?N.x=C.x+u.x:N.x=C.x+u.x+u.width/2):(N.x=C.x+u.height/2,b===_-1?N.y=C.y+u.y-u.width/2:b?N.y=C.y+u.y:N.y=C.y+u.y+u.width/2),this.node.push(M.setAnimation({el:"text",attr:{text:u.text,x:N.x,y:N.y,lineHeight:this._metaStyle.lineHeight,fill:s.style.fill,transform:o?"R0":"R270,"+N.x+","+N.y},container:g,component:Z})));return{group:g,bound:t,node:this.node}},c}(),S=function(){function c(l){this.conf=l,this._id=he,this.node=D,this.group=D,this.shadow=D,this.markerLine=D,this.compositionsByCategory={}}var n=c.prototype;return n.configure=function(o){this.conf=o},n.getName=function(){return"LegendAxis"},n.getType=function(){return"axis"},n.addCompositions=function(o,e){this.compositionsByCategory[e]=o},n.getLogicalSpace=function(){var o=this.conf.legendPosition==="bottom",e=arguments[0],t=arguments[2],s=this._lSpace,a=this.conf,g=a.padding,m,u,f,k=a.legendAxisHeight,b=this.compositionsByCategory,C,A,_,N,M=0;return s&&!t?(s.isImpure=!0,s):(s=this._lSpace={bound:{height:0,width:0},node:{logicArea:D}},A=K(e,{}),A.height-=2*g.v,A.width-=2*g.h,A.x+=g.h,A.y+=g.v,m=k/2+a.line.offset,u=k/2,C=b[R.RANGE],C&&(_=C.sliders.false,N=_.conf.outerCircle.rFactor*k,u+=M=Math.max(N/2-k/2,0)),o?(A.y+=M,A.height=f=u+m+M,e.height=f+2*g.v):(A.x+=M,A.width=f=u+m+M,e.width=f+2*g.v),s.node.logicArea=A,s.bound=e,e)},n.getDrawableAxisArea=function(o){var e=this.conf,t=this.conf.legendPosition==="bottom",s=o.x,a=o.y,g=t?o.width:e.legendAxisHeight,m=t?e.legendAxisHeight:o.height,u=e.legendAxisHeight/2;return{x:s,y:a,width:g,height:m,r:u}},n.preDrawingRangeParamV=function(o){var e=o.x+o.width/2,t=o.width;return{x:e,calculationBase:t,rangeStart:o.y,rangeEnd:o.y+o.height,prop:"x"}},n.preDrawingRangeParamH=function(o){var e=o.y+o.height/2,t=o.height;return{y:e,calculationBase:t,rangeStart:o.x,rangeEnd:o.x+o.width,prop:"y"}},n.preDrawingRangeParam=function(o){return this.conf.legendPosition==="bottom"?this.preDrawingRangeParamH(o):this.preDrawingRangeParamV(o)},n.getScaleMarkerPathStrH=function(o,e){var t=K(o,{}),s=this.conf,a=s.line,g,m,u,f,k,b=P.BLANKSTRING,C=P.BLANKSTRING;for(t.x+=t.r,t.width-=2*t.r,k=t.y+t.height,g=0,m=e.length;g<m;g++)u=e[g],f=t.x+u*t.width/100,b+=Pe+f+O+(k-a.grooveLength)+we+f+O+(k+a.offset);return C+=Pe+t.x+O+(k+a.offset)+we+(t.x+t.width)+O+(k+a.offset),b+C},n.getColorGradientH=function(o){return{axis:o.getBoxFill(),shadow:(0,P.toRaphaelColor)({FCcolor:{alpha:"25,0,0",angle:90,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}},n.draw=function(){var o,e=this.conf,t=e.bound||{},s=e.line,a=t.style||{},g,m,u=this.compositionsByCategory,f,k,b,C,A,_,N,M,$,V,Q;arguments.length>=2?(g=arguments[0],$=arguments[1]):arguments.length>=1&&($=arguments[0]),V=$.animationManager,o=$.parentLayer,f=$.colorRange,k=f.getCumulativeValueRatio(),this.getLogicalSpace(g,$),M=this._lSpace,this.group=C=V.setAnimation({el:this.group||"group",attr:{name:"legend-axis"},container:o,component:Z}),this.bound=V.setAnimation({el:this.bound||"rect",attr:M.bound,css:a,component:Z,container:C}),N=this.getDrawableAxisArea(M.node.logicArea),_=this.getColorGradient(f),e.style.fill=_.axis,e.shadow.style.fill=_.shadow,this.node=V.setAnimation({el:this.node||"rect",attr:N,css:e.style,container:C,component:Z}),this.shadow=V.setAnimation({el:this.shadow||"rect",attr:N,css:e.shadow.style,container:C,component:Z}),Q=this.getScaleMarkerPathStr(N,k),this.path=V.setAnimation({el:this.path||"path",attr:{path:Q},css:s.style,container:C,component:Z});for(m in u)switch(b=u[m],m){case R.RANGE:A=this.preDrawingRangeParam(N),$[A.prop]=A[A.prop],$.key=A.prop,$.rCalcBase=A.calculationBase,$.parentLayer=C,b.draw(A.rangeStart,A.rangeEnd,$)}},n.getScaleMarkerPathStr=function(o,e){return this.conf.legendPosition==="bottom"?this.getScaleMarkerPathStrH(o,e):this.getScaleMarkerPathStrV(o,e)},n.getColorGradient=function(o){return this.conf.legendPosition==="bottom"?this.getColorGradientH(o):this.getColorGradientV(o)},n.getScaleMarkerPathStrV=function(o,e){var t=K(o,{}),s=this.conf,a=s.line,g,m,u,f,k,b=P.BLANKSTRING,C=P.BLANKSTRING;for(t.y+=t.r,t.height-=2*t.r,f=t.x+t.width,g=0,u=e.length;g<u;g++)m=e[g],k=t.y+m*t.height/100,b+=Pe+(f-a.grooveLength)+O+k+we+(f+a.offset)+O+k;return C+=Pe+(f+a.offset)+O+t.y+we+(f+a.offset)+O+(t.y+t.height),b+C},n.getColorGradientV=function(o){return{axis:o.getBoxFill(!0),shadow:(0,P.toRaphaelColor)({FCcolor:{alpha:"25,0,0",angle:360,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}},c}(),L=function(){function c(l,o,e){this.conf=o.conf,this.sliderIndex=l,this.rangeGroup=o.sliderGroup,this._id=e,this.node=D,this.tracker=D,this.currPos=0,this.swing=[]}var n=c.prototype;return n.configure=function(o,e,t){this.conf=e.conf,this.sliderIndex=o,this.rangeGroup=e.sliderGroup,this._id=t,this.currPos=0,this.swing=[]},n.getType=function(){return"slider"},n.getName=function(){return"Slider"},n.updateSwingRange=function(o,e){this.swing[+o]=e},n.draw=function(o,e,t,s){var a=s.parentLayer,g=this,m=s.animationManager,u=this.conf,f=u.outerCircle,k=u.innerCircle,b,C=m.getFromEnv("chart").config,A=Math.ceil(f.rFactor*s.rCalcBase/2),_=Math.ceil(k.rFactor*s.rCalcBase/2),N=A-_,M,$=s.gLegend.getFromEnv("toolTipController"),V=this.sliderIndex,Q,te,se,ye,ce;return u.outerRadius=A,u.innerRadius=_,this._scaleVal=e,k.style["stroke-width"]=N,te=Math.ceil(f.style["stroke-width"]/2),_+=te,M=this.node=m.setAnimation({el:this.node||"group",attr:{name:"fc-gl-slider",cursor:"pointer",transform:"t0,0"},container:a,component:Z}),s.key==="x"?(se=t,ye=o,ye+=V?-_:+_):(se=o,ye=t,se+=V?-_:+_),this.oCircle=m.setAnimation({el:this.oCircle||"circle",attr:{cx:se,cy:ye,r:A},css:f.style,container:M,component:Z}),this.iCircle=m.setAnimation({el:this.iCircle||"circle",attr:{cx:se,cy:ye,r:_},css:k.style,container:M,component:Z}),ce=this.tracker=m.setAnimation({el:this.tracker||"circle",attr:{cx:se,cy:ye,r:A+5,fill:d,stroke:d,cursor:"pointer"},container:M,component:Z}),M.attr({transform:s.key==="x"?"t0,"+g.currPos:"t"+g.currPos+",0"}),b=C.showToolTip?e:"",$.enableToolTip(ce,b),this._dragAPI=Q=this.getDragAPI(s.key==="x"),ce.undrag(),ce.drag(Q.dragging,Q.dragStart,Q.dragEnd),{translateAscending:A+te}},n.getDragAPI=function(o){var e=this,t=e.node,s=e.sliderIndex,a=e.rangeGroup,g,m,u,f=e.conf.innerRadius,k=f,b;return{dragging:function(A){var _,N,M,$,V;return A.stopPropagation(),o?M=A.data[1]:M=A.data[0],s?(_=g[0]-g[1]+k,N=0):(_=0,N=g[1]-g[0]-k),V=e.currPos+M,V<_?M+=_-V:V>N&&(M-=V-N),t.attr({transform:o?"t0,"+(e.currPos+M):"t"+(e.currPos+M)+",0"}),m=M,u&&clearTimeout(u),u=setTimeout(function(){a.updateWhenInRest(e,e.currPos+M)},100),$=a.updateWhenInMove(e,e.currPos+M),e.conf.showTooltip&&e.tracker.data("__FC_tooltipText",$),b=!0,!0},dragStart:function(A){A.stopPropagation(),g=e.swing,b=!1,a.dragStarted(e)},dragEnd:function(){var A;a.dragCompleted(e,b,e.currPos+m),b&&(u&&clearTimeout(u),u=setTimeout(function(){a.updateWhenInRest(e,e.currPos)},100),e.currPos+=m,A=g[+s]+e.currPos,a.updateRange(e,A))}}},n.dispose=function(){this.node.remove(),this.oCircle.remove(),this.iCircle.remove(),this.tracker.remove(),delete this},c}(),F=function(){function c(l){var o=l,e={};this._id=ne,this.conf=l,e.conf=o,this.extremes=[],this.sliders={},this.min=D,this.max=D,e.sliderGroup=this,this.valueRange=[],this.callbacks=[],this.sliders[ie]=new L(ie,e,this._id+"_"+ +ie),this.sliders[z]=new L(z,e,this._id+"_"+ +z)}var n=c.prototype;return n.configure=function(o){var e=o,t={};this.min=D,this.max=D,this.conf=o,t.conf=e,t.sliderGroup=this,this.sliders[ie].configure(ie,t,this._id+"_"+ +ie),this.sliders[z].configure(z,t,this._id+"_"+ +z)},n.getType=function(){return"slider"},n.getName=function(){return"SliderGroup"},n.initRange=function(o,e){var t=o.sliderIndex;this.extremes[+t]=e},n.updateRange=function(o,e){var t=o.sliderIndex,s=this.sliders,a=s[!t];a.updateSwingRange(t,e)},n.reset=function(){var o={};o.conf=this.conf,o.sliderGroup=this,this.min=D,this.max=D,this.sliders[ie].configure(ie,o,this._id+"_"+ +ie),this.sliders[z].configure(z,o,this._id+"_"+ +z),this.draw.apply(this,this._drawParams)},n.draw=function(o,e,t){var s=this.sliders,a=s[ie],g=s[z],m=t.colorRange,u=m.colorRange,f,k,b,C,A,_=m.data.mapByPercent,N=t.gLegend.getFromEnv("number-formatter"),M;return this._fcChart=t.gLegend.getFromEnv("chart"),this.getValueFormPixel=function($,V,Q,te){var se=(V-$)/(te-Q);this.getValueFormPixel=function(ye){return $+se*ye}},this.updateWhenInMove=function($,V){this.updateWhenInMove=function(Q,te){var se=this.extremes,ye=Q.sliderIndex,ce,ve;return ye?ce=se[1]-se[0]+te:ce=te,ve=this.getValueFormPixel(ce),V?ve=parseFloat(ve).toFixed(2)+oe:ve=$.legendValue(ve),ve}},this._drawParams=[o,e,t],this.updateWhenInMove(N,_),b=a.conf.outerCircle,k=a.conf.innerCircle,C=Math.ceil(k.rFactor*t.rCalcBase/2),C+=Math.ceil(b.style["stroke-width"]/2),this.extremes[0]=o+C,this.extremes[1]=e-C,A=this.extremes[1]-this.extremes[0],this.min=this.min?this.min:u[0].value,this.max=this.max?this.max:u[u.length-1].value,M=u[u.length-1].value-u[0].value,a.currPos=A*(this.min-u[0].value)/M,g.currPos=A*(this.max-u[0].value)/M-A,f=a.draw(o,_?N.legendPercentValue(this.min):N.legendValue(this.min),t[t.key],t),f=g.draw(e,_?N.legendPercentValue(this.max):N.legendValue(this.max),t[t.key],t),a.swing=this.extremes.slice(0),g.swing=this.extremes.slice(0),a.swing[1]+=g.currPos,g.swing[0]+=a.currPos,this.getValueFormPixel(u[0].value,u[u.length-1].value,this.extremes[0],this.extremes[1]),f},n.updateWhenInRest=function(o,e){var t=this.sliders,s=this.extremes,a=o.sliderIndex,g,m;a?(g=t[!a].currPos,m=s[1]-s[0]+e):(g=e,m=s[1]-s[0]+t[!a].currPos),this.min=Number(this.getValueFormPixel(g).toFixed(2)),this.max=Number(this.getValueFormPixel(m).toFixed(2)),this.gLegend.fireEvent("rangeUpdated",[{min:this.min,max:this.max}])},n.dragStarted=function(o){var e=this.sliders,t=this.extremes,s=o.conf,a=this._fcChart;a.fireChartInstanceEvent("legendpointerdragstart",{pointerIndex:+o.sliderIndex,pointers:[{value:this.getValueFormPixel(e.false.currPos)},{value:this.getValueFormPixel(t[1]-t[0]+e.true.currPos)}],legendPointerHeight:s.outerRadius,legendPointerWidth:s.innerRadius,outerRadius:s.outerRadius,innerRadius:s.innerRadius},[a.id])},n.dragCompleted=function(o,e,t){var s=this.sliders,a=this.extremes,g=o.conf,m=this.getValueFormPixel(s.false.currPos),u=this.getValueFormPixel(a[1]-a[0]+s.true.currPos),f=this._fcChart,k,b;o.sliderIndex?(k=m,b=this.getValueFormPixel(a[1]-a[0]+t)):(k=this.getValueFormPixel(t),b=u),e&&f.fireChartInstanceEvent("legendrangeupdated",{previousMinValue:m,previousMaxValue:u,minValue:k,maxValue:b},[f.id]),f.fireChartInstanceEvent("legendpointerdragstop",{pointerIndex:+o.sliderIndex,pointers:[{value:k},{value:b}],legendPointerHeight:g.outerRadius,legendPointerWidth:g.innerRadius,outerRadius:g.outerRadius,innerRadius:g.innerRadius},[f.id])},n.dispose=function(){this.sliders[ie].dispose(),this.sliders[z].dispose()},c}(),h=function(c){(0,Ae.default)(n,c);function n(){var o;return o=c.call(this,arguments[0])||this,o._id=pe,o.node=[],o}var l=n.prototype;return l.configure=function(e){this.conf=e},l.getName=function(){return"LegendValues"},l.getType=function(){return"legend"},l.getLogicalSpace=function(e,t,s){var a=this.conf.legendPosition==="bottom",g=this._lSpace,m=this.conf,u=m.padding,f=t.gLegend.getFromEnv("chartConfig"),k,b,C,A,_,N,M,$,V,Q,te,se=[],ye,ce,ve,Se=[],Re,Ie,ke,Te,Ee,xe,Le,_e,Ne,Me,De;if(g&&!s)return g.isImpure=!0,g;for(k=t.colorRange,b=t.smartLabel,C=k.colorRange,M=k.getCumulativeValueRatio(),g=this._lSpace={bound:{height:0,width:0},node:{logicArea:D,smartTexts:[]}},De=g.node.smartTexts,xe=K(e,{}),xe.height-=2*u.v,xe.width-=2*u.h,xe.x+=u.h,xe.y+=u.v,b.useEllipsesOnOverflow(f.useEllipsesWhenOverflow),Me=K(m.style,{}),T(this._metaStyle=Me),b.setStyle(Me),Ne=b.getSmartText("W"),N=C.length,a?(te=$=(M[N-1]-M[0])/2*xe.width/100,_e=C[0].displayValue,A=b.getSmartText(typeof _e!="string"&&_e!==D&&_e.toString()||_e,te,xe.height),A.x=M[0]*xe.width/100,ye=A.x+A.width,se.push(A.height)):(te=$=(M[N-1]-M[0])/2*xe.height/100,A=b.getSmartText(C[0].displayValue,xe.width,te),A.y=M[0]*xe.height/100,Re=A.y+A.width,Se.push(A.width)),De[0]=A,a?(A=b.getSmartText(C[N-1].displayValue,te,xe.height),A.x=M[N-1]*xe.width/100,ve=A.x-A.width,se.push(A.height),ce=ye):(A=b.getSmartText(C[N-1].displayValue,xe.width,te),A.y=M[N-1]*xe.height/100,ke=A.y-A.height,Se.push(A.width),Ie=Re),De[N-1]=A,_=1;_<N-1;_++)A=D,Le=C[_].displayValue,a?(V=_+1===N-1?ve:M[_+1]*xe.width/100,Q=M[_]*xe.width/100,$=Math.min(Q-ce,V-Q),$>1.5*Ne.width&&(A=b.getSmartText(Le,2*$,xe.height),A.x=M[_]*xe.width/100,ce=$,se.push(A.height))):(V=_+1===N-1?ke:M[_+1]*xe.height/100,Q=M[_]*xe.height/100,$=Math.min(Q-Ie,V-Q),$>2*Ne.height&&(A=b.getSmartText(Le,xe.width,2*$),A.y=M[_]*xe.height/100,Ie=$,Se.push(A.width))),De[_]=A;return a?(Te=Math.max.apply(Math,se),xe.height=Te,e.height=Te+2*u.v):(Ee=Math.max.apply(Math,Se),xe.width=Ee,e.width=Ee+2*u.h),g.node.logicArea=xe,g.bound=e,e},l.draw=function(){var e=this.conf,t=e.legendPosition==="bottom",s=e.bound&&e.bound.style||{stroke:"none"},a={},g,m,u,f,k,b,C,A,_,N,M,$,V,Q;arguments.length>=2&&arguments[1]?(f=arguments[0],C=arguments[1]):arguments.length>=1&&(C=arguments[0]),Q=C.animationManager,g=C.parentLayer,A=C.colorRange,_=A.getCumulativeValueRatio(),this.getLogicalSpace(f,C),k=this._lSpace,b=k.node.logicArea,$=k.node.smartTexts,this.group=u=Q.setAnimation({el:this.group||"group",attr:{name:"legend-values"},container:g,component:Z}),this.bound=m=Q.setAnimation({el:this.bound||"rect",attr:k.bound,css:s,container:u,component:Z});for(var te=0;te<this.node.length;te++)this.node[te].remove();for(this.node=[],N=0,M=_.length;N<M;N++)V=$[N],V&&(t?(a.y=b.y+V.height/2,N===M-1?a.x=b.x+V.x-V.width/2:N?a.x=b.x+V.x:a.x=b.x+V.x+V.width/2):(a.x=b.x+V.width/2,N===M-1?a.y=b.y+V.y-V.height/2:N?a.y=b.y+V.y:a.y=b.y+V.y+V.height/2),this.node.push(Q.setAnimation({el:"text",attr:{text:V.text,x:a.x,y:a.y,lineHeight:this._metaStyle.lineHeight,fill:e.style.fill},container:u,component:Z})));return{group:u,bound:m}},n}(I),i=x;return Qe.default=i,Qe}var At;function Yt(){if(At)return st;At=1;var ge=Oe;st.__esModule=!0,st.default=Fe;var de=Ge(),Ae=ge(Kt()),P=ge(Nt()),Ce="none",D="gradient",R="icon";function d(ie){var z=ie.getFromEnv("dataSource").colorrange,oe=ie.getFromEnv("dataSource").chart.mapbycategory,O=ie.defaultDatasetType==="maps",B=ie.getName()==="TreeMap",j,Y=ie.getFromEnv("legend"),W=ie.getFromEnv("gLegend");switch(!z||!ie.config.showLegend?j=Ce:O?z.gradient&&Number(z.gradient)?j=D:z.color?j=R:j=Ce:B?z.gradient&&z.gradient!=="0"?j=D:j=Ce:z.gradient&&z.gradient!=="0"&&!Number(oe)?j=D:j=R,j){case"gradient":ie.deleteFromEnv("legend"),Y&&Y.remove(),(0,de.componentFactory)(ie,Ae.default,"gLegend",1),W=ie.getChildren("gLegend")[0],W.configure(),ie.addToEnv("gLegend",W);break;case"icon":ie.deleteFromEnv("gLegend"),W&&W.remove(),(0,de.componentFactory)(ie,P.default,"legend",1,{showLegend:!0}),Y=ie.getChildren("legend")[0],Y.configure(),ie.addToEnv("legend",Y);break;case"none":ie.deleteFromEnv("gLegend"),ie.deleteFromEnv("legend"),W&&W.remove(),Y&&Y.remove()}}function Fe(ie){d(ie)}return st}var Lt;function $t(){if(Lt)return We;Lt=1;var ge=Oe;We.__esModule=!0,We.default=void 0;var de=ge(ze()),Ae=ge(Mt()),P=He(),Ce=B(Ot()),D=ge(Bt()),R=St(),d=Ge(),Fe=ge(jt()),ie=ge(Dt()),z=ge(qt()),oe=ge(Yt());function O(Z){if(typeof WeakMap!="function")return null;var K=new WeakMap,q=new WeakMap;return(O=function(T){return T?q:K})(Z)}function B(Z,K){if(Z&&Z.__esModule)return Z;if(Z===null||typeof Z!="object"&&typeof Z!="function")return{default:Z};var q=O(K);if(q&&q.has(Z))return q.get(Z);var H={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in Z)if(v!=="default"&&Object.prototype.hasOwnProperty.call(Z,v)){var x=T?Object.getOwnPropertyDescriptor(Z,v):null;x&&(x.get||x.set)?Object.defineProperty(H,v,x):H[v]=Z[v]}return H.default=Z,q&&q.set(Z,H),H}var j=(0,d.extend2)({foregroundcolor:"333333",foregroundalpha:"100",foregrounddarkcolor:"111111",foregrounddarkalpha:"100",foregroundlightcolor:"666666",foregroundlightalpha:"100",backgroundlightcolor:"FFFFFF",backgroundlightalpha:"100",backgroundlightangle:90,backgroundlightratio:"",backgroundcolor:"FFFFCC",backgroundalpha:"100",backgrounddarkcolor:"ffcc66",backgrounddarkalpha:"100",backgrounddarkangle:270,backgrounddarkratio:"",shadow:1},Ce),Y="0,100",W="Map",J="maps",X="geo",E="right",ee={basefontcolor:"foregroundcolor",bordercolor:"foregrounddarkcolor",borderalpha:"foregrounddarkalpha",bgcolor:"backgroundlightcolor",bgalpha:"backgroundlightalpha",bgangle:"backgroundlightangle",bgratio:"backgroundlightratio",canvasbordercolor:"foregrounddarkcolor",canvasborderalpha:"foregrounddarkalpha",canvasbgcolor:"backgroundlightcolor",canvasbgalpha:"backgroundlightalpha",canvasbgangle:"backgroundlightangle",canvasbgratio:"backgroundlightratio",tooltipbordercolor:"foregrounddarkcolor",tooltipborderalpha:"foregrounddarkalpha",tooltipbgcolor:"backgroundlightcolor",tooltipbgalpha:"backgroundlightalpha",tooltipfontcolor:"foregroundcolor",legendbordercolor:"foregrounddarkcolor",legendborderalpha:"foregrounddarkalpha",markerbordercolor:"foregroundlightcolor",markerborderalpha:"foregroundlightalpha",markerfillcolor:"backgrounddarkcolor",markerfillalpha:"backgrounddarkalpha",markerfillangle:"backgrounddarkangle",markerfillratio:"backgrounddarkratio",plotfillcolor:"backgroundcolor",plotfillalpha:"backgroundalpha",plotfillangle:"backgroundangle",plotfillratio:"backgroundratio",plothoverfillcolor:"backgrounddarkcolor",plothoverfillalpha:"backgrounddarkalpha",plothoverfillangle:"backgrounddarkangle",plothoverfillratio:"backgrounddarkratio",plotbordercolor:"foregroundcolor",plotborderalpha:"foregroundalpha",shadow:"shadow"},le={getMapName:function(){var K=this,q=K.jsVars.instanceAPI,H=q.getName().toLowerCase();return H},getEntityList:function(){var K=this,q=K.jsVars.instanceAPI,H=q.getDatasets()||[],T,v,x,p=H.length,r=[],y,w,I,S;for(T=0;T<p;T++)if(x=H[T]||[],S=x.getName(),S==="entities"){v=x;break}y=v.components.data,p=y.length;for(T in y)y.hasOwnProperty(T)&&(w=y[T]||{},I=w.config||{},r.push({id:I.id,originalId:I.originalId||I.id,label:I.label,shortlabel:I.shortLabel,value:I.value,formattedValue:I.formattedValue,toolText:I.toolText}));return r},getMapAttribute:function(){var K=this;return(0,R.raiseWarning)(this,"12061210581","run","JavaScriptRenderer~getMapAttribute()",'Use of deprecated "getMapAttribute()". Replace with "getChartAttribute()".'),K.getChartAttribute.apply(K,arguments)},exportMap:function(){var K=this;return(0,R.raiseWarning)(this,"12061210581","run","JavaScriptRenderer~exportMap()",'Use of deprecated "exportMap()". Replace with "exportChart()".'),K.exportChart&&K.exportChart.apply(K,arguments)},addMarker:function(K){var q=this.jsVars.instanceAPI,H=q.getDatasets()||[],T=H.length,v,x,p,r;for(v=0;v<T;v++)if(x=H[v]||[],r=x.getName(),r==="markers"){p=x;break}p&&!p.addMarkerItem(K)&&(0,R.raiseWarning)(this,"1309264086","run","MapsRenderer~addMarker()","Failed to add marker. Check the options and try again.")},updateMarker:function(K,q){var H=this.jsVars.instanceAPI,T=H.getDatasets()||[],v,x=T.length,p,r,y,w;for(p=0;p<x;p++)if(r=T[p]||[],w=r.getName(),w==="markers"){y=r;break}y&&K&&(v=(K+re).toLowerCase(),y.updateMarkerItem(v,q))},removeMarker:function(K){var q=this.jsVars.instanceAPI,H=q.getDatasets()||[],T=H.length,v,x,p,r,y;for(x=0;x<T;x++)if(p=H[x]||[],y=p.getName(),y==="markers"){r=p;break}K&&(v=(K+re).toLowerCase(),r._removeMarkerItem(v))}},G,U="none",ae=", ",re="",fe="bottom",me="circle",he=window.Math,ne=he.min,pe=he.max,be=function(K,q){var H=(0,d.getMouseCoordinate)(q.getFromEnv("chart-container"),K,q),T=H.chartX,v=H.chartY,x=q.config,p=x.canvasLeft,r=x.canvasTop,y=x.canvasLeft+x.canvasWidth,w=x.canvasHeight+x.canvasTop;return H.insideCanvas=!1,H.originalEvent=K,T>p&&T<y&&v>r&&v<w&&(H.insideCanvas=!0),H},ue=function(Z){(0,de.default)(K,Z);function K(q,H){var T;T=Z.call(this)||this,T.subpalette=d.BLANKSTRING,T.key=d.BLANKSTRING,T.index=H;var v;for(v in q)T.subpalette=j[q[v]],T[v]=T.subpalette instanceof Array?T.subpalette[H]:T.subpalette,T.key=v;return T}return K}(P.ComponentInterface),Pe=function(Z){(0,de.default)(K,Z);function K(){var H;return H=Z.call(this)||this,H.friendlyName=W,H.revision=1,H.hasCanvas=!0,H.standaloneInit=!1,H.defaultDatasetType=J,H.defaultSeriesType=X,H.fireGroupEvent=!0,H.legendposition=E,H.hasGradientLegend=!0,H.isMap=!0,H.defaultPaletteOptions={paletteColors:[["A6A6A6","CCCCCC","E1E1E1","F0F0F0"],["A7AA95","C4C6B7","DEDFD7","F2F2EE"],["04C2E3","66E7FD","9CEFFE","CEF8FF"],["FA9101","FEB654","FED7A0","FFEDD5"],["FF2B60","FF6C92","FFB9CB","FFE8EE"]],bgColor:["FFFFFF","CFD4BE,F3F5DD","C5DADD,EDFBFE","A86402,FDC16D","FF7CA0,FFD1DD"],bgAngle:[270,270,270,270,270],bgRatio:[Y,Y,Y,Y,Y],bgAlpha:["100","60,50","40,20","20,10","30,30"],toolTipBgColor:["FFFFFF","FFFFFF","FFFFFF","FFFFFF","FFFFFF"],toolTipBorderColor:["545454","545454","415D6F","845001","68001B"],baseFontColor:["555555","60634E","025B6A","A15E01","68001B"],tickColor:["333333","60634E","025B6A","A15E01","68001B"],trendColor:["545454","60634E","415D6F","845001","68001B"],plotFillColor:["545454","60634E","415D6F","845001","68001B"],borderColor:["767575","545454","415D6F","845001","68001B"],borderAlpha:[50,50,50,50,50]},H.colorPaletteMap=ee,H.eiMethods=le,H.registerFactory("legend",oe.default,["canvas"]),H.registerFactory("axis",d.stubFN,["canvas"]),H.registerFactory("colormanager-decider",z.default,["legend"]),H.registerFactory("dataset",Fe.default,["colormanager-decider"]),H.registerFactory("canvas",ie.default),H}var q=K.prototype;return q._checkInvalidSpecificData=function(){return this.config.invalid=!1,!1},q.__setDefaultConfig=function(){Z.prototype.__setDefaultConfig.call(this);var T=this.config;!T.baseWidth&&(T.baseWidth=400),!T.baseHeight&&(T.baseHeight=300),!T.baseScaleFactor&&(T.baseScaleFactor=1)},K.getName=function(){return"maps"},K.getType=function(){return"chartAPI"},q.getName=function(){return this.config.name||"GEO"},q.getType=function(){return"chartAPI"},q.configureAttributes=function(T){var v=this,x=v.getChildren("colorPalette")&&v.getChildren("colorPalette")[0],p;p=T.chart=T.chart||T.graph||T.map||{},v.jsonData=T,x||(x=new ue(this.colorPaletteMap,(p.palette>0&&p.palette<6?p.palette:(0,d.pluckNumber)(v.paletteIndex,1))-1),v.attachChild(x,"colorPalette")),v.config.skipCanvasDrawing=!0,Z.prototype.configureAttributes.call(this,T),v._parseBackgroundCosmetics()},q.parseChartAttr=function(T){var v=this,x,p=v.jsonData,r=p.chart||p.map,y=p.markers,w=new ue(this.colorPaletteMap,(r.palette>0&&r.palette<6?r.palette:(0,d.pluckNumber)(v.paletteIndex,1))-1),I,S,L,F,h=(0,d.pluck)(r.entitybordercolor,r.bordercolor,w.plotbordercolor),i=(0,d.pluck)(r.entityfillcolor,r.fillcolor,w.plotfillcolor),c=(0,d.pluck)(r.entityfillalpha,r.fillalpha,w.plotfillalpha),n=(0,d.pluck)(r.entityfillratio,r.fillratio,w.plotfillratio),l=(0,d.pluck)(r.entityfillangle,r.fillangle,w.plotfillangle),o=(0,d.pluck)(r.nullentityfillcolor,r.nullentitycolor,i),e=(0,d.pluckNumber)(r.usevaluesformarkers,p.markers&&p.markers.items&&p.markers.items.length,!(p.markers&&p.markers.application&&p.markers.application.length&&p.markers.definition&&p.markers.definition.length));Z.prototype.parseChartAttr.call(this,T),x=v.config,x.origMarginTop=(0,d.pluckNumber)(r.charttopmargin,r.maptopmargin,11),x.origMarginLeft=(0,d.pluckNumber)(r.chartleftmargin,r.mapleftmargin,11),x.origMarginBottom=(0,d.pluckNumber)(r.chartbottommargin,r.mapbottommargin,11),x.origMarginRight=(0,d.pluckNumber)(r.chartrightmargin,r.maprightmargin,11),x.labelsOnTop=(0,d.pluckNumber)(r.entitylabelsontop,1),F=x.style,I=F.inCancolor,S=F.inCanfontFamily,L=F.inCanfontSize,x.entityOpts={baseScaleFactor:x.baseScaleFactor,dataLabels:{style:{fontFamily:S,fontSize:L,lineHeight:F.inCanLineHeight,color:(0,d.pluck)(r.entitylabelcolor,F.inCancolor),bgColor:(0,d.pluck)(r.entitylabelbgcolor)||re,borderColor:(0,d.pluck)(r.entitylabelbordercolor)||re}},fillColor:i,fillAlpha:c,fillRatio:n,fillAngle:l,borderColor:h,borderAlpha:(0,d.pluck)(r.entityborderalpha,r.borderalpha,v.borderAlpha,"100"),borderThickness:(0,d.pluckNumber)(r.showentityborder,r.showborder,1)?(0,d.pluckNumber)(r.entityborderthickness,r.borderthickness,1):0,scaleBorder:(0,d.pluckNumber)(r.scaleentityborder,r.scaleborder,0),hoverFillColor:(0,d.pluck)(r.entityfillhovercolor,r.hoverfillcolor,r.hovercolor,w.plothoverfillcolor),hoverFillAlpha:(0,d.pluck)(r.entityfillhoveralpha,r.hoverfillalpha,r.hoveralpha,w.plothoverfillalpha),hoverFillRatio:(0,d.pluck)(r.entityfillhoverratio,r.hoverfillratio,r.hoverratio,w.plothoverfillratio),hoverFillAngle:(0,d.pluck)(r.entityfillhoverangle,r.hoverfillangle,r.hoverangle,w.plothoverfillangle),hoverBorderThickness:(0,d.pluck)(r.entityborderhoverthickness,r.hoverborderthickness),hoverBorderColor:(0,d.pluck)(r.entityborderhovercolor,h,w.plotbordercolor),hoverBorderAlpha:(0,d.pluck)(r.entityborderhoveralpha,w.plotborderalpha),nullEntityColor:o,nullEntityAlpha:(0,d.pluck)(r.nullentityfillalpha,r.nullentityalpha,c),nullEntityRatio:(0,d.pluck)(r.nullentityfillratio,r.nullentityratio,n),nullEntityAngle:(0,d.pluck)(r.nullentityfillangle,r.nullentityangle,l),connectorColor:(0,d.pluck)(r.labelconnectorcolor,r.connectorcolor,I),connectorAlpha:(0,d.pluck)(r.labelconnectoralpha,r.connectoralpha,"100"),connectorThickness:(0,d.pluckNumber)(r.labelconnectorthickness,r.borderthickness,1),showHoverEffect:(0,d.pluckNumber)(r.showentityhovereffect,r.usehovercolor,r.showhovereffect,1),hoverOnNull:(0,d.pluckNumber)(r.hoveronnull,r.entityhoveronnull,1),labelPadding:(0,d.pluckNumber)(r.labelpadding,5),showLabels:(0,d.pluckNumber)(r.showlabels,1),labelsOnTop:(0,d.pluckNumber)(r.entitylabelsontop,1),includeNameInLabels:(0,d.pluckNumber)(r.includenameinlabels,1),includeValueInLabels:(0,d.pluckNumber)(r.includevalueinlabels,0),useSNameInTooltip:(0,d.pluckNumber)(r.usesnameintooltip,0),useShortName:(0,d.pluckNumber)(r.usesnameinlabels,1),labelSepChar:(0,d.pluck)(r.labelsepchar,ae),showTooltip:(0,d.pluckNumber)(r.showentitytooltip,r.showtooltip,1),tooltipSepChar:(0,d.pluck)(r.tooltipsepchar,", "),tooltext:r.entitytooltext,hideNullEntities:(0,d.pluckNumber)(r.hidenullentities,0),showHiddenEntityBorder:(0,d.pluckNumber)(r.showhiddenentityborder,1),showNullEntityBorder:(0,d.pluckNumber)(r.shownullentityborder,1),hiddenEntityColor:(0,d.pluck)(r.hiddenentitycolor,r.hiddenentityfillcolor,r.hiddenentityalpha||r.hiddenentityfillalpha?o:"ffffff"),hiddenEntityAlpha:(0,d.pluck)(r.hiddenentityalpha,r.hiddenentityfillalpha,.001),shadow:(0,d.pluckNumber)(r.showshadow,v.defaultPlotShadow,w.shadow)},x.markerOpts={dataLabels:{style:{fontFamily:(0,d.pluck)(r.markerfont,S),fontSize:(0,d.pluckNumber)(r.markerfontsize,parseInt(L,10)),fontColor:(0,d.pluck)(r.markerlabelcolor,r.markerfontcolor,I),labelBgColor:(0,d.pluck)(r.markerlabelbgcolor)||re,labelBorderColor:(0,d.pluck)(r.markerlabelbordercolor)||re}},showTooltip:(0,d.pluckNumber)(r.showmarkertooltip,r.showtooltip,1),showLabels:(0,d.pluckNumber)(r.showmarkerlabels,r.showlabels,1),showHoverEffect:(0,d.pluckNumber)(r.showmarkerhovereffect,1),labelPadding:(0,d.pluck)(r.markerlabelpadding,"5"),labelWrapWidth:(0,d.pluckNumber)(r.markerlabelwrapwidth,0),labelWrapHeight:(0,d.pluckNumber)(r.markerlabelwrapheight,0),fillColor:(0,d.pluck)(r.markerfillcolor,r.markerbgcolor,w.markerfillcolor),fillAlpha:(0,d.pluck)(r.markerfillalpha,w.markerfillalpha),fillAngle:(0,d.pluck)(r.markerfillangle,w.markerfillangle),fillRatio:(0,d.pluck)(r.markerfillratio,w.markerfillratio),fillPattern:(0,d.pluck)(r.markerfillpattern,w.markerbgpattern),hoverFillColor:r.markerfillhovercolor,hoverFillAlpha:r.markerfillhoveralpha,hoverFillRatio:r.markerfillhoverratio,hoverFillAngle:r.markerfillhoverangle,borderThickness:(0,d.pluck)(r.markerborderthickness,1),borderColor:(0,d.pluck)(r.markerbordercolor,w.markerbordercolor),borderAlpha:(0,d.pluckNumber)(r.markerborderalpha,w.markerborderalpha),hoverBorderThickness:r.markerborderhoverthickness,hoverBorderColor:r.markerborderhovercolor,hoverBorderAlpha:r.markerborderhoveralpha,radius:(0,d.pluckNumber)(r.markerradius&&(0,d.trimString)(r.markerradius),7),shapeId:(0,d.pluck)(r.defaultmarkershape,me),labelSepChar:(0,d.pluck)(r.labelsepchar,ae),tooltipSepChar:(0,d.pluck)(r.tooltipsepchar,", "),autoScale:(0,d.pluckNumber)(r.autoscalemarkers,0),tooltext:(0,d.pluck)(y&&y.tooltext,r.markertooltext),dataEnabled:e,valueToRadius:(0,d.pluckNumber)(r.markerradiusfromvalue,1),valueMarkerAlpha:(0,d.pluck)(r.valuemarkeralpha,"75"),hideNull:(0,d.pluckNumber)(r.hidenullmarkers,0),nullRadius:(0,d.pluckNumber)(r.nullmarkerradius,r.markerradius,7),adjustViewPort:(0,d.pluckNumber)(r.adjustviewportformarkers,0),startAngle:(0,d.pluckNumber)(r.markerstartangle,90),maxRadius:(0,d.pluckNumber)(r.maxmarkerradius,0),minRadius:(0,d.pluckNumber)(r.minmarkerradius,0),applyAll:(0,d.pluckNumber)(r.applyallmarkers,0),shadow:(0,d.pluckNumber)(r.showmarkershadow,r.showshadow,0)},x.connectorOpts={showHoverEffect:(0,d.pluckNumber)(r.showconnectorhovereffect,1),thickness:(0,d.pluckNumber)(r.connectorthickness,r.markerconnthickness,"2"),color:(0,d.pluck)(r.connectorcolor,r.markerconncolor,w.markerbordercolor),alpha:(0,d.pluck)(r.connectoralpha,r.markerconnalpha,"100"),hoverThickness:(0,d.pluckNumber)(r.connectorhoverthickness,r.connectorthickness,r.markerconnthickness,"2"),hoverColor:(0,d.pluck)(r.connectorhovercolor,r.connectorcolor,r.markerconncolor,w.markerbordercolor),hoverAlpha:(0,d.pluck)(r.connectorhoveralpha,r.connectoralpha,r.markerconnalpha,"100"),dashed:(0,d.pluckNumber)(r.connectordashed,r.markerconndashed,0),dashLen:(0,d.pluckNumber)(r.connectordashlen,r.markerconndashlen,3),dashGap:(0,d.pluckNumber)(r.connectordashgap,r.markerconndashgap,2),font:(0,d.pluck)(r.connectorfont,r.markerconnfont,S),fontColor:(0,d.pluck)(r.connectorlabelcolor,r.connectorfontcolor,r.markerconnfontcolor,I),fontSize:(0,d.pluckNumber)(r.connectorfontsize,r.markerconnfontsize,parseInt(L,10)),showLabels:(0,d.pluckNumber)(r.showconnectorlabels,r.showmarkerlabels,r.showlabels,1),labelBgColor:(0,d.pluck)(r.connectorlabelbgcolor,r.markerconnlabelbgcolor,w.plotfillcolor),labelBorderColor:(0,d.pluck)(r.connectorlabelbordercolor,r.markerconnlabelbordercolor,w.markerbordercolor),shadow:(0,d.pluckNumber)(r.showconnectorshadow,r.showmarkershadow,r.showshadow,0),showTooltip:(0,d.pluckNumber)(r.showconnectortooltip,r.showmarkertooltip,r.showtooltip,1),tooltext:(0,d.pluck)(y&&y.connectortooltext,r.connectortooltext),hideOpen:(0,d.pluckNumber)(r.hideopenconnectors,1)},x.adjustViewPortForMarkers=(0,d.pluckNumber)(r.adjustviewportformarkers,e)},q._attachMouseEvents=function(){var T=this,v=T.getFromEnv("eventListeners"),x=T.getFromEnv("chart-container");v.push(D.default.listen(x,d.hasTouch?"touchstart":"click",K.searchMouseMove,T)),v.push(D.default.listen(window.document,d.hasTouch?"touchstart":"mousemove",K.searchMouseMove,T))},q._dispose=function(){var T=this,v=T.getFromEnv("chart-container");d.hasTouch&&(D.default.unlisten(v,"touchstart",K.searchMouseMove),D.default.unlisten(window.document,"touchstart",K.searchMouseMove)),D.default.unlisten(v,"click",K.searchMouseMove),D.default.unlisten(window.document,"mousemove",K.searchMouseMove),Z.prototype._dispose.call(this)},K.searchMouseMove=function(T){var v,x=T.data,p=x.config,r=x.getDatasets(),y=r[1],w=y&&y.getFromEnv("toolTipController"),I=y&&y.config.currentToolTip,S=x.config.lastHoveredPoint,L={};!x.getFromEnv("chart-container")||x.config.lastInteractionEvent===T.originalEvent||(x.config.lastInteractionEvent=T.originalEvent,(v=be(T,x))&&v.insideCanvas?(p.lastMouseEvent=T,L={x:v.chartX,y:v.chartY},x._searchNearestNeighbour(L,T)):(S&&y&&y.hoverOutFn(S.element),x.config.lastHoveredPoint=null,w&&w.hide(I)))},q._searchNearestNeighbour=function(T,v){var x=this,p=x.getDatasets(),r=p[1],y;if(r){if(!r.components.kDTree)return;y=r.getElement(T),y?r.highlightPoint(y,v):r.highlightPoint(!1,v)}},q._createLayers=function(){Z.prototype._createLayers.call(this),this._attachMouseEvents()},q._parseBackgroundCosmetics=function(){var T=this,v=T.getChildren("background")[0],x=v.config,p=T.getChildren("colorPalette")[0],r=T.getFromEnv("chart-attrib"),y;y=x.showBorder=(0,d.pluckNumber)(r.showcanvasborder,1),x.borderWidth=y?(0,d.pluckNumber)(r.canvasborderthickness,1):0,x.borderRadius=x.borderRadius=(0,d.pluckNumber)(r.canvasborderradius,0),x.borderDashStyle=x.borderDashStyle=(0,d.pluckNumber)(r.borderdashed,0)?(0,d.getDashStyle)((0,d.pluckNumber)(r.borderdashlen,4),(0,d.pluckNumber)(r.borderdashgap,2)):U,x.borderAlpha=(0,d.pluck)(r.canvasborderalpha,p.borderAlpha),x.borderColor=x.borderColor=(0,d.convertColor)((0,d.pluck)(r.canvasbordercolor,p&&p.borderColor),x.borderAlpha)},q._getBackgroundCosmetics=function(){var T=this,v=T.getFromEnv("chart-attrib")||T.jsonData.map,x=T.getChildren("colorPalette")[0];return{FCcolor:{color:(0,d.pluck)(v.bgcolor,v.canvasbgcolor,x.bgcolor),alpha:(0,d.pluck)(v.bgalpha,v.canvasbgalpha,x.bgalpha),angle:(0,d.pluck)(v.bgangle,v.canvasbgangle,x.bgangle),ratio:(0,d.pluck)(v.bgratio,v.canvasbgratio,x.bgratio)}}},q._parseCanvasCosmetics=function(){Z.prototype._parseCanvasCosmetics.call(this);var T=this,v=T.config,x=T.getFromEnv("chart-attrib")||T.jsonData.map,p=T.getChildren("canvas")[0].config;v.origMarginTop=(0,d.pluckNumber)(x.maptopmargin,11),v.origMarginLeft=(0,d.pluckNumber)(x.mapleftmargin,11),v.origMarginBottom=(0,d.pluckNumber)(x.mapbottommargin,11),v.origMarginRight=(0,d.pluckNumber)(x.maprightmargin,11),v.origCanvasLeftMargin=(0,d.pluckNumber)(x.canvasleftmargin,0),v.origCanvasRightMargin=(0,d.pluckNumber)(x.canvasrightmargin,0),v.origCanvasTopMargin=(0,d.pluckNumber)(x.canvastopmargin,0),v.origCanvasBottomMargin=(0,d.pluckNumber)(x.canvasbottommargin,0),p.canvasBorderRadius=(0,d.pluckNumber)(x.canvasborderradius,0),p.origCanvasTopPad=(0,d.pluckNumber)(x.canvastoppadding,0),p.origCanvasBottomPad=(0,d.pluckNumber)(x.canvasbottompadding,0),p.origCanvasLeftPad=(0,d.pluckNumber)(x.canvasleftpadding,0),p.origCanvasRightPad=(0,d.pluckNumber)(x.canvasrightpadding,0)},q.preliminaryScaling=function(){for(var T=this,v=T.jsonData,x=v.markers&&v.markers.items||[],p=x&&x.length||0,r=1/0,y=1/0,w=-1/0,I=-1/0,S,L,F;p--;)F=x[p],S=Number(F.x),L=Number(F.y),r=ne(r,S),y=ne(y,L),w=pe(w,S),I=pe(I,L);return{x:r,y,x1:w,y1:I}},q.getScalingParameters=function(T,v,x,p){var r=this,y=T/v,w=x/(T*r.config.baseScaleFactor),I=p/(v*r.config.baseScaleFactor),S=0,L=0,F,h;return w>I?(F=I,S+=(x-p*y)/2,h=200/(v*F)):(F=w,L+=(p-x/y)/2,h=200/(T*F)),{scaleFactor:F,strokeWidth:h,translateX:S,translateY:L}},q.calculateMarkerBounds=function(T,v,x){var p=this,r=p.config,y=r.markerOpts,w=p.getDatasets(),I=p.getDataLimits(),S=I.dataMin,L=I.dataMax,F=y.hideNull,h=y.nullRadius,i=y.valueToRadius,c,n,l,o,e,t,s,a,g,m=1/0,u=1/0,f=-1/0,k=-1/0,b,C,A,_,N;for(t=0,g=w.length;t<g;t++)a=w[t],s=a.getName(),s==="markers"&&(c=a);if(c){c.calculateMarkerRadiusLimits(),n=c.config||{},l=n.minRadius,o=n.maxRadius,e=c.components&&c.components.markerObjs||{};for(t in e){if(N=e[t],r=N.config,_=r.definition||{},r.cleanValue!==null)i&&_.radius===G&&(r.radius=l+(o-l)*(r.cleanValue-S)/(L-S));else{F?r.__hideMarker=!0:r.radius===null&&(r.radius=h);continue}A=Number(r.radius),b=(Number(_.x)+v)*T,C=(Number(_.y)+x)*T,m=ne(m,b-A),u=ne(u,C-A),f=pe(f,b+A),k=pe(k,C+A)}}return{x:m,y:u,x1:f,y1:k}},q._spaceManager=function(){var T,v=this,x=v.config,p=v.getChildren("legend")&&v.getChildren("legend")[0],r=v.getChildren("gLegend")&&v.getChildren("gLegend")[0],y=p&&p.config.legendPos?p.config.legendPos.split("-"):r&&r.conf.legendPosition?r.conf.legendPosition.split("-"):[],w,I=v.getFromEnv("chart-attrib"),S=x.showBorder,L=x.origMarginLeft,F=x.origMarginTop,h=v.config.baseWidth,i=v.config.baseHeight,c,n,l,o,e={},t=0,s=0,a,g,m,u,f=x.markerOpts,k=x.borderWidth=S?(0,d.pluckNumber)(I.borderthickness,1):0;v._allocateSpace({top:k,bottom:k,left:k,right:k}),v._allocateSpace(v._manageActionBarSpace&&v._manageActionBarSpace(x.availableHeight*.225)||{}),y[0]==="right"||y[0]==="left"?m=x.canvasWidth*.3:m=x.canvasHeight*.3,w=y[0]===d.POSITION_TOP||y[0]===fe?x.canvasHeight:x.canvasWidth,x.showLegend&&v._manageLegendSpace(m),T=y[0]===fe||y[0]===d.POSITION_TOP?x.canvasHeight*.225:x.canvasWidth*.225,y[0]==="top"&&(F+=w-x.canvasHeight),u=v._manageChartMenuBar(T),y[0]==="left"&&(L+=w-x.canvasWidth),n=x.canvasWidth,l=x.canvasHeight,f.dataEnabled?(x.adjustViewPortForMarkers?(e=v.preliminaryScaling(),e.x1>h&&(h=e.x1),e.x<0&&(h+=-e.x,t=-e.x),e.y1>i&&(i=e.y1),e.y<0&&(i+=-e.y,s=-e.y),c=v.getScalingParameters(h,i,n,l),e=v.calculateMarkerBounds(c.scaleFactor*v.config.baseScaleFactor,t,s),a=l,g=n,e.x<0&&(L+=-e.x,n+=e.x),e.y<0&&(F+=-e.y,l+=e.y),e.x1>g&&(n-=e.x1-g),e.y1>a&&(l-=e.y1-a)):(c=v.getScalingParameters(h,i,n,l),v.calculateMarkerBounds(c.scaleFactor*v.config.baseScaleFactor,t,s)),c=v.getScalingParameters(h,i,n,l),L+=t*c.scaleFactor*v.config.baseScaleFactor,F+=s*c.scaleFactor*v.config.baseScaleFactor):c=v.getScalingParameters(h,i,n,l),v.config.scalingParams=c,o=c.scaleFactor,c.translateX=c.translateX+L,c.translateY=c.translateY+F+u.top||0,c.sFactor=o*v.config.baseScaleFactor*100/100,c.transformStr=["t",c.translateX,",",c.translateY,"s",o,",",o,",0,0"].join(""),v.config.annotationConfig={id:"Geo",showbelow:0,autoscale:0,grpxshift:c.translateX?c.translateX:0,grpyshift:c.translateY?c.translateY:0,xscale:(o?o*v.config.baseScaleFactor:1)*100,yscale:(o?o*v.config.baseScaleFactor:1)*100,scaletext:1,options:{useTracker:!0}}},q.getDataLimits=function(){var T=this,v=T.getDatasets(),x=v.length,p,r=1/0,y=-1/0,w,I;for(I=0;I<x;I++)p=v[I],w=p.getDataLimits(),r=ne(r,w.min),y=pe(y,w.max);return{dataMin:r,dataMax:y}},q.getEntityPaths=function(T){var v={},x=this.config.entities,p;if(T){for(p in x)v[p]=x[p];return v}return x},q.checkComplete=function(){var T=this;T.config.entityFlag&&T.config.entitiesReady&&(T.config.entityFlag=!1,T.config.markersDrawn=!0,T.fireChartInstanceEvent("internal.mapdrawingcomplete",{renderer:T}))},K}(Ae.default),we=Pe;return We.default=we,We}var Zt=Oe;Je.__esModule=!0;var It=Je.default=void 0,Pt=Zt($t()),Qt=Je.Maps=Pt.default,Jt={name:"maps",type:"package",requiresFusionCharts:!0,extension:function(de){return de.addDep(Pt.default)}};It=Je.default=Jt;const tr=Gt({__proto__:null,Maps:Qt,get default(){return It}},[Je]);export{tr as i};
