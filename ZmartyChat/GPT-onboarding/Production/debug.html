<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug - Deployment Check</title>
    <style>
        body {
            font-family: monospace;
            padding: 20px;
            background: #1a1a1a;
            color: #0fa;
        }
        .info {
            background: #000;
            padding: 20px;
            border: 1px solid #0fa;
            margin: 10px 0;
        }
        h1 { color: #fff; }
        .timestamp { color: #fa0; }
    </style>
</head>
<body>
    <h1>üîç Deployment Debug Info</h1>

    <div class="info">
        <h2>Build Information</h2>
        <p>Build Time: <span class="timestamp">2024-09-29 04:21:00 UTC</span></p>
        <p>Version: 1.0.3-debug</p>
        <p>Deploy ID: debug-check-${Date.now()}</p>
    </div>

    <div class="info">
        <h2>Client Information</h2>
        <p>User Agent: <span id="userAgent"></span></p>
        <p>Screen: <span id="screen"></span></p>
        <p>Platform: <span id="platform"></span></p>
        <p>Current Time: <span id="currentTime"></span></p>
        <p>Cache Status: <span id="cacheStatus"></span></p>
    </div>

    <div class="info">
        <h2>Environment Check</h2>
        <p>Window Location: <span id="windowLocation"></span></p>
        <p>Document Referrer: <span id="referrer"></span></p>
        <p>Service Worker: <span id="serviceWorker"></span></p>
        <p>Local Storage: <span id="localStorage"></span></p>
    </div>

    <div class="info">
        <h2>Network Tests</h2>
        <p>Fetch Test: <span id="fetchTest">Testing...</span></p>
        <p>Cache Headers: <span id="cacheHeaders">Checking...</span></p>
    </div>

    <script>
        // Display client information
        document.getElementById('userAgent').textContent = navigator.userAgent;
        document.getElementById('screen').textContent = `${screen.width}x${screen.height}`;
        document.getElementById('platform').textContent = navigator.platform;
        document.getElementById('currentTime').textContent = new Date().toISOString();
        document.getElementById('windowLocation').textContent = window.location.href;
        document.getElementById('referrer').textContent = document.referrer || 'Direct';

        // Check for service worker
        document.getElementById('serviceWorker').textContent =
            'serviceWorker' in navigator ? 'Supported' : 'Not supported';

        // Check localStorage
        try {
            localStorage.setItem('test', 'test');
            localStorage.removeItem('test');
            document.getElementById('localStorage').textContent = 'Available';
        } catch(e) {
            document.getElementById('localStorage').textContent = 'Not available';
        }

        // Check cache status
        document.getElementById('cacheStatus').textContent =
            performance.navigation.type === 1 ? 'Page reloaded' :
            performance.navigation.type === 2 ? 'Page from cache' : 'Fresh load';

        // Test fetch
        fetch('/index.html', { cache: 'no-cache' })
            .then(response => {
                document.getElementById('fetchTest').textContent = `Status: ${response.status}`;

                // Check cache headers
                const cacheControl = response.headers.get('cache-control');
                const etag = response.headers.get('etag');
                const lastModified = response.headers.get('last-modified');

                document.getElementById('cacheHeaders').textContent =
                    `Cache-Control: ${cacheControl || 'none'}, ETag: ${etag ? 'yes' : 'no'}`;
            })
            .catch(err => {
                document.getElementById('fetchTest').textContent = `Error: ${err.message}`;
            });

        // Log everything to console
        console.log('Debug page loaded at:', new Date().toISOString());
        console.log('Deploy version: 1.0.3-debug');
    </script>
</body>
</html>