-- Create BTC risk grid table and load data for 10 symbols
-- Total symbols: 10
-- Total data points: 410 (should be 410 = 10 Ã— 41)
-- Generated: 2025-09-16

-- Create table for BTC risk grids if it doesn't exist
CREATE TABLE IF NOT EXISTS cryptoverse_btc_risk_grid (
    id SERIAL PRIMARY KEY,
    symbol VARCHAR(10) NOT NULL,
    price_btc DECIMAL(20, 10) NOT NULL,
    btc_risk DECIMAL(5, 3) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(symbol, btc_risk)
);

-- Clear existing BTC risk data (optional - remove if you want to keep existing data)
TRUNCATE TABLE cryptoverse_btc_risk_grid;

-- Insert all BTC risk grid points
INSERT INTO cryptoverse_btc_risk_grid (symbol, price_btc, btc_risk) VALUES
    ('AAVE', 0.00109900, 0.000),
    ('AAVE', 0.00116500, 0.025),
    ('AAVE', 0.00123400, 0.050),
    ('AAVE', 0.00130800, 0.075),
    ('AAVE', 0.00138600, 0.100),
    ('AAVE', 0.00147000, 0.125),
    ('AAVE', 0.00155700, 0.150),
    ('AAVE', 0.00165100, 0.175),
    ('AAVE', 0.00175000, 0.200),
    ('AAVE', 0.00185500, 0.225),
    ('AAVE', 0.00196600, 0.250),
    ('AAVE', 0.00208400, 0.275),
    ('AAVE', 0.00218400, 0.300),
    ('AAVE', 0.00224800, 0.325),
    ('AAVE', 0.00231400, 0.350),
    ('AAVE', 0.00238300, 0.375),
    ('AAVE', 0.00245400, 0.400),
    ('AAVE', 0.00252600, 0.425),
    ('AAVE', 0.00260100, 0.450),
    ('AAVE', 0.00267700, 0.475),
    ('AAVE', 0.00275600, 0.500),
    ('AAVE', 0.00283800, 0.525),
    ('AAVE', 0.00292200, 0.550),
    ('AAVE', 0.00300800, 0.575),
    ('AAVE', 0.00309700, 0.600),
    ('AAVE', 0.00318800, 0.625),
    ('AAVE', 0.00328300, 0.650),
    ('AAVE', 0.00338000, 0.675),
    ('AAVE', 0.00347900, 0.700),
    ('AAVE', 0.00358200, 0.725),
    ('AAVE', 0.00371200, 0.750),
    ('AAVE', 0.00393500, 0.775),
    ('AAVE', 0.00417200, 0.800),
    ('AAVE', 0.00442300, 0.825),
    ('AAVE', 0.00468900, 0.850),
    ('AAVE', 0.00497100, 0.875),
    ('AAVE', 0.00527000, 0.900),
    ('AAVE', 0.00558400, 0.925),
    ('AAVE', 0.00592100, 0.950),
    ('AAVE', 0.00627900, 0.975),
    ('AAVE', 0.00665600, 1.000),
    ('ADA', 0.00000400, 0.000),
    ('ADA', 0.00000400, 0.025),
    ('ADA', 0.00000500, 0.050),
    ('ADA', 0.00000500, 0.075),
    ('ADA', 0.00000600, 0.100),
    ('ADA', 0.00000600, 0.125),
    ('ADA', 0.00000700, 0.150),
    ('ADA', 0.00000700, 0.175),
    ('ADA', 0.00000700, 0.200),
    ('ADA', 0.00000700, 0.225),
    ('ADA', 0.00000800, 0.250),
    ('ADA', 0.00000800, 0.275),
    ('ADA', 0.00000800, 0.300),
    ('ADA', 0.00000900, 0.325),
    ('ADA', 0.00000900, 0.350),
    ('ADA', 0.00000900, 0.375),
    ('ADA', 0.00001000, 0.400),
    ('ADA', 0.00001000, 0.425),
    ('ADA', 0.00001100, 0.450),
    ('ADA', 0.00001100, 0.475),
    ('ADA', 0.00001100, 0.500),
    ('ADA', 0.00001200, 0.525),
    ('ADA', 0.00001200, 0.550),
    ('ADA', 0.00001300, 0.575),
    ('ADA', 0.00001300, 0.600),
    ('ADA', 0.00001400, 0.625),
    ('ADA', 0.00001400, 0.650),
    ('ADA', 0.00001500, 0.675),
    ('ADA', 0.00001600, 0.700),
    ('ADA', 0.00001600, 0.725),
    ('ADA', 0.00001700, 0.750),
    ('ADA', 0.00001800, 0.775),
    ('ADA', 0.00001900, 0.800),
    ('ADA', 0.00002100, 0.825),
    ('ADA', 0.00002300, 0.850),
    ('ADA', 0.00002400, 0.875),
    ('ADA', 0.00002700, 0.900),
    ('ADA', 0.00002900, 0.925),
    ('ADA', 0.00003100, 0.950),
    ('ADA', 0.00003400, 0.975),
    ('ADA', 0.00003700, 1.000),
    ('AVAX', 0.00018900, 0.000),
    ('AVAX', 0.00019900, 0.025),
    ('AVAX', 0.00020600, 0.050),
    ('AVAX', 0.00021400, 0.075),
    ('AVAX', 0.00022300, 0.100),
    ('AVAX', 0.00023100, 0.125),
    ('AVAX', 0.00024000, 0.150),
    ('AVAX', 0.00024900, 0.175),
    ('AVAX', 0.00025900, 0.200),
    ('AVAX', 0.00026900, 0.225),
    ('AVAX', 0.00027900, 0.250),
    ('AVAX', 0.00029000, 0.275),
    ('AVAX', 0.00030100, 0.300),
    ('AVAX', 0.00031200, 0.325),
    ('AVAX', 0.00032400, 0.350),
    ('AVAX', 0.00033700, 0.375),
    ('AVAX', 0.00035000, 0.400),
    ('AVAX', 0.00036300, 0.425),
    ('AVAX', 0.00037700, 0.450),
    ('AVAX', 0.00039200, 0.475),
    ('AVAX', 0.00040700, 0.500),
    ('AVAX', 0.00042300, 0.525),
    ('AVAX', 0.00043900, 0.550),
    ('AVAX', 0.00045600, 0.575),
    ('AVAX', 0.00047400, 0.600),
    ('AVAX', 0.00049200, 0.625),
    ('AVAX', 0.00051100, 0.650),
    ('AVAX', 0.00053100, 0.675),
    ('AVAX', 0.00055100, 0.700),
    ('AVAX', 0.00057300, 0.725),
    ('AVAX', 0.00059500, 0.750),
    ('AVAX', 0.00061800, 0.775),
    ('AVAX', 0.00064200, 0.800),
    ('AVAX', 0.00066700, 0.825),
    ('AVAX', 0.00069300, 0.850),
    ('AVAX', 0.00071900, 0.875),
    ('AVAX', 0.00074700, 0.900),
    ('AVAX', 0.00079800, 0.925),
    ('AVAX', 0.00086300, 0.950),
    ('AVAX', 0.00093300, 0.975),
    ('AVAX', 0.00101000, 1.000),
    ('BNB', 0.00548400, 0.000),
    ('BNB', 0.00577600, 0.025),
    ('BNB', 0.00604300, 0.050),
    ('BNB', 0.00620200, 0.075),
    ('BNB', 0.00636600, 0.100),
    ('BNB', 0.00653300, 0.125),
    ('BNB', 0.00670500, 0.150),
    ('BNB', 0.00688100, 0.175),
    ('BNB', 0.00706100, 0.200),
    ('BNB', 0.00724700, 0.225),
    ('BNB', 0.00743800, 0.250),
    ('BNB', 0.00763300, 0.275),
    ('BNB', 0.00783400, 0.300),
    ('BNB', 0.00804000, 0.325),
    ('BNB', 0.00825100, 0.350),
    ('BNB', 0.00846800, 0.375),
    ('BNB', 0.00869100, 0.400),
    ('BNB', 0.00892000, 0.425),
    ('BNB', 0.00915400, 0.450),
    ('BNB', 0.00939500, 0.475),
    ('BNB', 0.00980200, 0.500),
    ('BNB', 0.01032500, 0.525),
    ('BNB', 0.01087300, 0.550),
    ('BNB', 0.01145300, 0.575),
    ('BNB', 0.01206600, 0.600),
    ('BNB', 0.01270500, 0.625),
    ('BNB', 0.01338300, 0.650),
    ('BNB', 0.01409900, 0.675),
    ('BNB', 0.01484700, 0.700),
    ('BNB', 0.01563900, 0.725),
    ('BNB', 0.01647400, 0.750),
    ('BNB', 0.01735200, 0.775),
    ('BNB', 0.01827900, 0.800),
    ('BNB', 0.01925000, 0.825),
    ('BNB', 0.02027400, 0.850),
    ('BNB', 0.02135900, 0.875),
    ('BNB', 0.02249700, 0.900),
    ('BNB', 0.02369600, 0.925),
    ('BNB', 0.02495900, 0.950),
    ('BNB', 0.02629300, 0.975),
    ('BNB', 0.02769100, 1.000),
    ('DOT', 0.00003800, 0.000),
    ('DOT', 0.00004200, 0.025),
    ('DOT', 0.00004300, 0.050),
    ('DOT', 0.00004300, 0.075),
    ('DOT', 0.00004400, 0.100),
    ('DOT', 0.00004500, 0.125),
    ('DOT', 0.00004500, 0.150),
    ('DOT', 0.00004600, 0.175),
    ('DOT', 0.00004600, 0.200),
    ('DOT', 0.00004700, 0.225),
    ('DOT', 0.00004700, 0.250),
    ('DOT', 0.00004800, 0.275),
    ('DOT', 0.00004900, 0.300),
    ('DOT', 0.00004900, 0.325),
    ('DOT', 0.00005000, 0.350),
    ('DOT', 0.00005100, 0.375),
    ('DOT', 0.00005100, 0.400),
    ('DOT', 0.00005200, 0.425),
    ('DOT', 0.00005300, 0.450),
    ('DOT', 0.00005300, 0.475),
    ('DOT', 0.00005400, 0.500),
    ('DOT', 0.00005500, 0.525),
    ('DOT', 0.00005500, 0.550),
    ('DOT', 0.00005600, 0.575),
    ('DOT', 0.00005700, 0.600),
    ('DOT', 0.00005700, 0.625),
    ('DOT', 0.00005800, 0.650),
    ('DOT', 0.00005900, 0.675),
    ('DOT', 0.00006000, 0.700),
    ('DOT', 0.00006000, 0.725),
    ('DOT', 0.00006100, 0.750),
    ('DOT', 0.00006200, 0.775),
    ('DOT', 0.00006300, 0.800),
    ('DOT', 0.00006400, 0.825),
    ('DOT', 0.00006400, 0.850),
    ('DOT', 0.00006500, 0.875),
    ('DOT', 0.00006600, 0.900),
    ('DOT', 0.00006700, 0.925),
    ('DOT', 0.00006800, 0.950),
    ('DOT', 0.00006900, 0.975),
    ('DOT', 0.00007000, 1.000),
    ('ETH', 0.01930400, 0.000),
    ('ETH', 0.02062500, 0.025),
    ('ETH', 0.02202500, 0.050),
    ('ETH', 0.02353200, 0.075),
    ('ETH', 0.02513200, 0.100),
    ('ETH', 0.02658500, 0.125),
    ('ETH', 0.02747900, 0.150),
    ('ETH', 0.02840600, 0.175),
    ('ETH', 0.02935900, 0.200),
    ('ETH', 0.03034600, 0.225),
    ('ETH', 0.03137300, 0.250),
    ('ETH', 0.03242600, 0.275),
    ('ETH', 0.03352000, 0.300),
    ('ETH', 0.03464700, 0.325),
    ('ETH', 0.03581400, 0.350),
    ('ETH', 0.03701400, 0.375),
    ('ETH', 0.03826700, 0.400),
    ('ETH', 0.03955400, 0.425),
    ('ETH', 0.04088100, 0.450),
    ('ETH', 0.04226800, 0.475),
    ('ETH', 0.04368800, 0.500),
    ('ETH', 0.04516200, 0.525),
    ('ETH', 0.04668200, 0.550),
    ('ETH', 0.04825500, 0.575),
    ('ETH', 0.04988200, 0.600),
    ('ETH', 0.05156200, 0.625),
    ('ETH', 0.05330900, 0.650),
    ('ETH', 0.05509600, 0.675),
    ('ETH', 0.05744300, 0.700),
    ('ETH', 0.06139100, 0.725),
    ('ETH', 0.06563100, 0.750),
    ('ETH', 0.07019200, 0.775),
    ('ETH', 0.07504600, 0.800),
    ('ETH', 0.08022000, 0.825),
    ('ETH', 0.08582100, 0.850),
    ('ETH', 0.09174200, 0.875),
    ('ETH', 0.09814300, 0.900),
    ('ETH', 0.10497000, 0.925),
    ('ETH', 0.11227800, 0.950),
    ('ETH', 0.12011900, 0.975),
    ('ETH', 0.12854700, 1.000),
    ('LINK', 0.00013700, 0.000),
    ('LINK', 0.00014600, 0.025),
    ('LINK', 0.00015600, 0.050),
    ('LINK', 0.00016100, 0.075),
    ('LINK', 0.00016600, 0.100),
    ('LINK', 0.00017200, 0.125),
    ('LINK', 0.00017800, 0.150),
    ('LINK', 0.00018400, 0.175),
    ('LINK', 0.00019000, 0.200),
    ('LINK', 0.00019600, 0.225),
    ('LINK', 0.00020300, 0.250),
    ('LINK', 0.00021000, 0.275),
    ('LINK', 0.00021700, 0.300),
    ('LINK', 0.00022400, 0.325),
    ('LINK', 0.00023200, 0.350),
    ('LINK', 0.00023900, 0.375),
    ('LINK', 0.00024700, 0.400),
    ('LINK', 0.00025600, 0.425),
    ('LINK', 0.00026400, 0.450),
    ('LINK', 0.00027300, 0.475),
    ('LINK', 0.00028300, 0.500),
    ('LINK', 0.00029200, 0.525),
    ('LINK', 0.00030200, 0.550),
    ('LINK', 0.00031200, 0.575),
    ('LINK', 0.00032300, 0.600),
    ('LINK', 0.00033400, 0.625),
    ('LINK', 0.00034500, 0.650),
    ('LINK', 0.00035700, 0.675),
    ('LINK', 0.00036900, 0.700),
    ('LINK', 0.00038100, 0.725),
    ('LINK', 0.00039900, 0.750),
    ('LINK', 0.00042700, 0.775),
    ('LINK', 0.00045600, 0.800),
    ('LINK', 0.00048800, 0.825),
    ('LINK', 0.00052200, 0.850),
    ('LINK', 0.00055900, 0.875),
    ('LINK', 0.00059800, 0.900),
    ('LINK', 0.00063900, 0.925),
    ('LINK', 0.00068400, 0.950),
    ('LINK', 0.00073300, 0.975),
    ('LINK', 0.00078400, 1.000),
    ('LTC', 0.00097800, 0.000),
    ('LTC', 0.00100000, 0.025),
    ('LTC', 0.00102200, 0.050),
    ('LTC', 0.00104500, 0.075),
    ('LTC', 0.00106900, 0.100),
    ('LTC', 0.00109300, 0.125),
    ('LTC', 0.00111700, 0.150),
    ('LTC', 0.00114200, 0.175),
    ('LTC', 0.00116800, 0.200),
    ('LTC', 0.00119400, 0.225),
    ('LTC', 0.00122100, 0.250),
    ('LTC', 0.00124800, 0.275),
    ('LTC', 0.00127600, 0.300),
    ('LTC', 0.00130500, 0.325),
    ('LTC', 0.00133400, 0.350),
    ('LTC', 0.00136400, 0.375),
    ('LTC', 0.00139500, 0.400),
    ('LTC', 0.00142600, 0.425),
    ('LTC', 0.00145800, 0.450),
    ('LTC', 0.00149100, 0.475),
    ('LTC', 0.00152400, 0.500),
    ('LTC', 0.00155800, 0.525),
    ('LTC', 0.00159400, 0.550),
    ('LTC', 0.00162900, 0.575),
    ('LTC', 0.00166600, 0.600),
    ('LTC', 0.00170300, 0.625),
    ('LTC', 0.00174100, 0.650),
    ('LTC', 0.00178100, 0.675),
    ('LTC', 0.00182100, 0.700),
    ('LTC', 0.00186200, 0.725),
    ('LTC', 0.00190300, 0.750),
    ('LTC', 0.00194600, 0.775),
    ('LTC', 0.00199000, 0.800),
    ('LTC', 0.00203500, 0.825),
    ('LTC', 0.00208000, 0.850),
    ('LTC', 0.00212700, 0.875),
    ('LTC', 0.00217500, 0.900),
    ('LTC', 0.00222400, 0.925),
    ('LTC', 0.00227400, 0.950),
    ('LTC', 0.00232500, 0.975),
    ('LTC', 0.00237800, 1.000),
    ('SOL', 0.00053200, 0.000),
    ('SOL', 0.00058300, 0.025),
    ('SOL', 0.00063800, 0.050),
    ('SOL', 0.00069900, 0.075),
    ('SOL', 0.00076500, 0.100),
    ('SOL', 0.00083800, 0.125),
    ('SOL', 0.00091700, 0.150),
    ('SOL', 0.00100400, 0.175),
    ('SOL', 0.00109900, 0.200),
    ('SOL', 0.00120300, 0.225),
    ('SOL', 0.00131800, 0.250),
    ('SOL', 0.00144300, 0.275),
    ('SOL', 0.00152700, 0.300),
    ('SOL', 0.00159800, 0.325),
    ('SOL', 0.00167200, 0.350),
    ('SOL', 0.00175000, 0.375),
    ('SOL', 0.00183100, 0.400),
    ('SOL', 0.00191600, 0.425),
    ('SOL', 0.00200500, 0.450),
    ('SOL', 0.00211600, 0.475),
    ('SOL', 0.00231700, 0.500),
    ('SOL', 0.00253600, 0.525),
    ('SOL', 0.00277700, 0.550),
    ('SOL', 0.00304000, 0.575),
    ('SOL', 0.00332800, 0.600),
    ('SOL', 0.00364600, 0.625),
    ('SOL', 0.00399100, 0.650),
    ('SOL', 0.00437000, 0.675),
    ('SOL', 0.00478500, 0.700),
    ('SOL', 0.00524000, 0.725),
    ('SOL', 0.00573900, 0.750),
    ('SOL', 0.00628500, 0.775),
    ('SOL', 0.00688100, 0.800),
    ('SOL', 0.00753700, 0.825),
    ('SOL', 0.00825400, 0.850),
    ('SOL', 0.00903700, 0.875),
    ('SOL', 0.00990100, 0.900),
    ('SOL', 0.01084600, 0.925),
    ('SOL', 0.01187700, 0.950),
    ('SOL', 0.01300900, 0.975),
    ('SOL', 0.01424800, 1.000),
    ('XRP', 0.00000600, 0.000),
    ('XRP', 0.00000600, 0.025),
    ('XRP', 0.00000700, 0.050),
    ('XRP', 0.00000700, 0.075),
    ('XRP', 0.00000800, 0.100),
    ('XRP', 0.00000800, 0.125),
    ('XRP', 0.00000900, 0.150),
    ('XRP', 0.00001000, 0.175),
    ('XRP', 0.00001000, 0.200),
    ('XRP', 0.00001100, 0.225),
    ('XRP', 0.00001200, 0.250),
    ('XRP', 0.00001300, 0.275),
    ('XRP', 0.00001400, 0.300),
    ('XRP', 0.00001500, 0.325),
    ('XRP', 0.00001700, 0.350),
    ('XRP', 0.00001700, 0.375),
    ('XRP', 0.00001800, 0.400),
    ('XRP', 0.00001900, 0.425),
    ('XRP', 0.00001900, 0.450),
    ('XRP', 0.00002000, 0.475),
    ('XRP', 0.00002100, 0.500),
    ('XRP', 0.00002200, 0.525),
    ('XRP', 0.00002200, 0.550),
    ('XRP', 0.00002300, 0.575),
    ('XRP', 0.00002400, 0.600),
    ('XRP', 0.00002500, 0.625),
    ('XRP', 0.00002600, 0.650),
    ('XRP', 0.00002700, 0.675),
    ('XRP', 0.00002800, 0.700),
    ('XRP', 0.00002900, 0.725),
    ('XRP', 0.00003000, 0.750),
    ('XRP', 0.00003200, 0.775),
    ('XRP', 0.00003300, 0.800),
    ('XRP', 0.00003400, 0.825),
    ('XRP', 0.00003700, 0.850),
    ('XRP', 0.00004000, 0.875),
    ('XRP', 0.00004300, 0.900),
    ('XRP', 0.00004700, 0.925),
    ('XRP', 0.00005100, 0.950),
    ('XRP', 0.00005500, 0.975),
    ('XRP', 0.00005900, 1.000)
ON CONFLICT (symbol, btc_risk) DO UPDATE
SET price_btc = EXCLUDED.price_btc;

-- Verify the load
SELECT
    symbol,
    COUNT(*) as points,
    MIN(btc_risk) as min_risk,
    MAX(btc_risk) as max_risk,
    MIN(price_btc) as min_price_btc,
    MAX(price_btc) as max_price_btc
FROM cryptoverse_btc_risk_grid
GROUP BY symbol
ORDER BY symbol;

-- Summary statistics
SELECT
    COUNT(DISTINCT symbol) as total_symbols,
    COUNT(*) as total_points,
    ROUND(COUNT(*)::numeric / COUNT(DISTINCT symbol), 1) as avg_points_per_symbol
FROM cryptoverse_btc_risk_grid;

-- Show combined view of both FIAT and BTC risk for symbols that have both
SELECT
    f.symbol,
    f.fiat_risk as risk_level,
    f.price_usd,
    b.price_btc,
    ROUND(f.price_usd / b.price_btc, 2) as implied_btc_price
FROM cryptoverse_risk_grid f
JOIN cryptoverse_btc_risk_grid b
    ON f.symbol = b.symbol
    AND f.fiat_risk = b.btc_risk
WHERE f.symbol IN ('ETH', 'SOL', 'BNB')
    AND f.fiat_risk IN (0.25, 0.50, 0.75)
ORDER BY f.symbol, f.fiat_risk;
