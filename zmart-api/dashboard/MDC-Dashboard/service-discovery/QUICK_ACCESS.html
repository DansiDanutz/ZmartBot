<!DOCTYPE html>
<html>
<head>
    <title>Service Discovery - Quick Access</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            background: #0a0a0a; 
            color: #e0e0e0; 
            padding: 50px; 
            text-align: center;
        }
        .big-button {
            background: #4fd1c7;
            color: #000;
            border: none;
            padding: 20px 40px;
            font-size: 18px;
            font-weight: bold;
            border-radius: 10px;
            cursor: pointer;
            margin: 20px;
            text-decoration: none;
            display: inline-block;
        }
        .demo-button {
            background: #28a745;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 16px;
            border-radius: 8px;
            cursor: pointer;
            margin: 10px;
        }
        .info-box {
            background: #1e2832;
            border: 1px solid #2d3748;
            border-radius: 10px;
            padding: 30px;
            margin: 30px auto;
            max-width: 600px;
            text-align: left;
        }
    </style>
</head>
<body>
    <h1>🚀 Service Discovery & MDC Generation</h1>
    
    <div class="info-box">
        <h2>✅ System Status: OPERATIONAL</h2>
        <p><strong>Service Discovery Server:</strong> Running on port 8550</p>
        <p><strong>MDC Files Generated:</strong> 3 complete implementations</p>
        <p><strong>AI Analysis:</strong> Functional with real recommendations</p>
    </div>
    
    <h2>🌐 Access the Dashboard</h2>
    <a href="/" class="big-button">📊 Open Service Discovery Dashboard</a>
    
    <div class="info-box">
        <h3>📋 How to Generate MDC Files:</h3>
        <ol>
            <li>Click the dashboard link above</li>
            <li>Scroll to the "🤖 ChatGPT AI Analysis" section</li>
            <li>Click "🧠 Run AI Analysis" button</li>
            <li>Wait for results (2-3 seconds)</li>
            <li>The "📄 Generate MDC File" button will appear</li>
            <li>Click it to generate complete implementation specs</li>
        </ol>
    </div>
    
    <h2>⚡ Quick Demo</h2>
    <button class="demo-button" onclick="testAPI()">🧠 Test AI Analysis API</button>
    <button class="demo-button" onclick="generateMDC()">📄 Generate Sample MDC</button>
    <button class="demo-button" onclick="listFiles()">📁 List Generated Files</button>
    
    <div id="results" style="margin-top: 30px; text-align: left;"></div>

    <script>
        async function testAPI() {
            const results = document.getElementById('results');
            results.innerHTML = '<div style="color: #4fd1c7;">🔄 Testing AI Analysis API...</div>';
            
            try {
                const response = await fetch('/api/discovery/ai-analysis');
                const data = await response.json();
                
                results.innerHTML = `
                    <div style="background: #1e2832; padding: 20px; border-radius: 8px;">
                        <h3>✅ AI Analysis API Working!</h3>
                        <p><strong>Recommendations Found:</strong> ${data.connection_recommendations.length}</p>
                        <p><strong>First Recommendation:</strong> ${data.connection_recommendations[0].service_a} ↔ ${data.connection_recommendations[0].service_b}</p>
                        <p><strong>Priority:</strong> ${data.connection_recommendations[0].priority}</p>
                    </div>
                `;
            } catch (error) {
                results.innerHTML = `<div style="color: #dc3545;">❌ Error: ${error.message}</div>`;
            }
        }
        
        async function generateMDC() {
            const results = document.getElementById('results');
            results.innerHTML = '<div style="color: #4fd1c7;">🔄 Generating MDC File...</div>';
            
            try {
                const response = await fetch('/api/generate-mdc', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        service_a: "TestServiceA",
                        service_b: "TestServiceB",
                        ai_analysis: "Quick demo of MDC generation functionality",
                        compatibility_score: 8.5,
                        service_type_a: "api",
                        service_type_b: "database"
                    })
                });
                
                const data = await response.json();
                
                if (data.status === 'success') {
                    results.innerHTML = `
                        <div style="background: rgba(40, 167, 69, 0.2); border: 1px solid #28a745; padding: 20px; border-radius: 8px;">
                            <h3>✅ MDC File Generated!</h3>
                            <p><strong>Integration Name:</strong> ${data.integration_name}</p>
                            <p><strong>File Path:</strong> ${data.file_path}</p>
                            <p><strong>Generated:</strong> ${new Date(data.generated_at).toLocaleString()}</p>
                        </div>
                    `;
                } else {
                    results.innerHTML = `<div style="color: #dc3545;">❌ Error: ${data.message}</div>`;
                }
            } catch (error) {
                results.innerHTML = `<div style="color: #dc3545;">❌ Error: ${error.message}</div>`;
            }
        }
        
        async function listFiles() {
            const results = document.getElementById('results');
            results.innerHTML = '<div style="color: #4fd1c7;">🔄 Loading generated files...</div>';
            
            try {
                const response = await fetch('/api/generated-files');
                const data = await response.json();
                
                let html = `<div style="background: #1e2832; padding: 20px; border-radius: 8px;">
                    <h3>📁 Generated MDC Files (${data.total_count})</h3>`;
                
                data.generated_files.forEach(file => {
                    const size = (file.size_bytes / 1024).toFixed(1);
                    const date = new Date(file.created_at).toLocaleString();
                    html += `
                        <div style="background: rgba(45, 55, 72, 0.6); padding: 10px; margin: 10px 0; border-radius: 6px;">
                            <strong>${file.filename}</strong><br>
                            Size: ${size} KB | Created: ${date}<br>
                            <small>${file.file_path}</small>
                        </div>
                    `;
                });
                
                html += '</div>';
                results.innerHTML = html;
            } catch (error) {
                results.innerHTML = `<div style="color: #dc3545;">❌ Error: ${error.message}</div>`;
            }
        }
    </script>
</body>
</html>