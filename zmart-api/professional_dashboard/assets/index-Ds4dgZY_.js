import{i as Oe,r as ze,a as He,b as St,c as ut,d as Ge,e as Et,f as Tt,g as It,h as Nt,j as Ot,k as Bt,l as Dt,m as Gt}from"./index-BZh9DY1M.js";function Vt(ke,pe){for(var Fe=0;Fe<pe.length;Fe++){const O=pe[Fe];if(typeof O!="string"&&!Array.isArray(O)){for(const Ce in O)if(Ce!=="default"&&!(Ce in ke)){const K=Object.getOwnPropertyDescriptor(O,Ce);K&&Object.defineProperty(ke,Ce,K.get?K:{enumerable:!0,get:()=>O[Ce]})}}}return Object.freeze(Object.defineProperty(ke,Symbol.toStringTag,{value:"Module"}))}var et={},We={},it={},Ke={},Ue={},ft;function dt(){if(ft)return Ue;ft=1,Ue.__esModule=!0,Ue.default=void 0;var ke="plot",pe="final",Fe=[{initialAttr:function(){return{opacity:0}},finalAttr:function(){return{opacity:1}}}],O=function(){return Fe[0].slot=ke,Fe},Ce=function(z){return[{finalAttr:function(){return z.finalAttr}}]},K=function(){return Fe[0].slot=pe,Fe},B=function(){return[{initialAttr:{opacity:0},finalAttr:{opacity:1},slot:"final"}]},u=function(){return Fe[0].slot=pe,Fe},Ae=function(z){return[{finalAttr:function(){return z.finalAttr}}]},ge=function(z){return[{initialAttr:function(){return Object.assign({opacity:0},z.attr)},finalAttr:function(){return z.attr},slot:"plot"}]},X=function(z){return[{initialAttr:function(){return Object.assign({opacity:0},z.attr)},finalAttr:function(){return z.attr},slot:"plot"}]},de={"initial.dataset.entities":function(){return{"path.appearing":O,"path.updating":Ce,"labelConnectors.appearing":K,"labelConnectors.updating":null,"entityLabel.appearing":B,"*":null}},"initial.dataset.markers":function(){return{markers:null,"markerItem.appearing":u,"markerItem.updating":Ae}},"initial.group.mapGroup":function(){return{"group.appearing":ge,"group.updating":X,"*":null}}};return Ue.default=de,Ue}var lt={},pt;function zt(){if(pt)return lt;pt=1,lt.__esModule=!0,lt.default=ke;function ke(pe){var Fe=window,O,Ce=Fe.parseFloat,K="array",B="",u=",",Ae=" ",ge="none",X=pe._createNode,de=pe._setFillAndStroke,j=pe.el.constructor,z="litepath",$="position:absolute;left:0;top:0;width:21600px;height:21600px;",ee="21600 21600",Q={Q:"L",Z:"X",q:"l",z:"x",",":" "},J=/,?([achlmqrstvxz]),?/gi,P,A=function(){return this.join(u).replace(J,P)},R,W;pe.svg?(P="$1",R=function(){var N=this,Z=pe.is(arguments[0],K)?arguments[0]:Array.prototype.slice.call(arguments);Z?typeof Z=="string"?Z=Z.replace(J,P):Z.toString=A:Z="M0,0",N.node.setAttribute("d",Z.toString())},pe._engine.litepath=function(M,N,Z,te,he){var ue=X("path"),se;return(te||N).canvas.appendChild(ue),se=new j(ue,N,te),se.type=z,se.id=ue.raphaelid=pe._oid++,ue.raphael=!0,de(se,he||{fill:ge,stroke:"#000"}),se},pe._getPath.litepath=function(M){return pe.parsePathString(M.node.getAttribute("d"))}):pe.vml&&(P=function(N,Z){return Q[Z]||Z},W=function(){var N=this;return N._transform.apply(N,arguments),N._.bcoord&&(N.node.coordsize=N._.bcoord),N},R=function(N){var Z=this,te=N;return te?typeof te=="string"?te=te.replace(J,P):te.toString=A:te="M0,0",Z.node.path=te,Z},pe._engine.litepath=function(M,N,Z,te,he){var ue=X("shape"),se=ue.style,re=new j(ue,N,te),ce=he||{fill:ge,stroke:"#000"},ve,oe=Z;return se.cssText=$,oe=Ce(oe),isNaN(oe)?ue.coordsize=ee:(re._.bzoom=oe,se.width="1px",se.height="1px",ue.coordsize=re._.bcoord=oe+Ae+oe),ue.coordorigin=N.coordorigin,re.type=z,re.id=ue.raphaelid=pe._oid++,ue.raphael=!0,re._transform=re.transform,re.transform=W,pe._setFillAndStroke(re,ce),(te||N).canvas.appendChild(ue),ve=X("skew"),ve.on=!0,ue.appendChild(ve),re.skew=ve,re},pe._getPath.litepath=function(M){return pe.parsePathString(M.node.path||B)}),pe.fn[z]=function(M,N,Z){var te=this,he,ue,se,re=M,ce=N,ve=Z;return typeof re=="object"&&re.constructor!==j&&(he=re,re=re.litepath,ue=re.zoom,ve=re.group),ce&&ce.constructor===j?(ve=ce,ue=O):ue=ce,re&&re.constructor===j&&(ve=re,re=B),se=pe._engine[z](re,this,ue,ve,he),se.ca[z]=R,re&&se.attr(z,pe.is(re,K)?[re]:re),te.__set__&&this.__set__.push(se),te._elementsById[se.id]=se}}return lt}var mt;function Pt(){if(mt)return Ke;mt=1;var ke=Oe;Ke.__esModule=!0,Ke.default=void 0;var pe=ke(ze()),Fe=He(),O=ke(St()),Ce=ut(),K=ke(dt()),B=Ge(),u=Et(),Ae=ke(zt()),ge=(0,Ce.getDep)("redraphael","plugin"),X,de=window.navigator.userAgent,j=/msie/i.test(de)&&!window.opera,z=",",$="",ee="top",Q="bottom",J="right",P="left",A="middle",R="center",W="entityLabel",M="text",N="crisp",Z=window.Math,te=Z.min,he=Z.max,ue=/stroke/gi,se=/AppleWebKit/.test(de),re=Z.ceil,ce=function(E,m){var x={FCcolor:E};return x.toString=B.toRaphaelColor,x},ve=function(E,m){var x,f={},r;if(r=m||1,!E||typeof E!="object")return f;for(x in E)ue.test(x)||(x==="stroke-width"?(f[x]=Number(E[x])/r,se&&(f[x]=f[x]&&re(f[x])||0)):f[x]=E[x]);return f},oe={right:function(){return arguments[1]},left:function(E,m){return E-m},center:function(E,m){return te(m,E-m)*2}},fe={top:function(){return arguments[1]},middle:function(E,m){return te(m,E-m)*2},bottom:function(E,m){return E-m}},ie=function(E,m){E&&E.graphics.outlines.attr(m)},q=function(E){for(var m=E&&E.length||0,x={},f;m--;)f=E[m],f.id!==X&&(x[f.id.toLowerCase()]=f);return x};(0,Ce.addDep)({name:"mapsAnimation",type:"animationRule",extension:K.default}),(0,Ae.default)(ge);var U=function(V){(0,pe.default)(E,V);function E(){var x;return x=V.call(this)||this,x.components={},x}var m=E.prototype;return m.getName=function(){return"entities"},m.getType=function(){return"dataset"},m.configureAttributes=function(f){if(f){this.JSONData={data:f};var r=this,b=r.getFromEnv("chart"),w=b.jsonData,T=r.config,_=w.map||w.chart,F,L,h,l,c,a=[],n,o,e,t=r.getFromEnv("colorManager"),s=w.entitydef||[];!T.attachEvent&&t&&(r.addExtEventListener("legendUpdate",function(){if(e=arguments[1],e.component==="legend")r.legendInteractivity(e.legendItem,e.colorObj);else for(a=e.maxMinArray,n=a.length,o=0;o<n;o++)r.updateEntityColors(a[o].min,a[o].max)},t),T.attachEvent=!0),w.data&&w.data[0]&&w.data[0].data?F=r.JSONData=w.data[0].data||[]:F=r.JSONData=w.data||[],T.useSNameAsId=(0,B.pluckNumber)(_.usesnameasid,0),this._redefineEntities(s),L=r.components.data,T.showTooltip=(0,B.pluckNumber)(_.showtooltip,1),T.showHoverEffect=(0,B.pluckNumber)(_.showhovereffect,0),F=q(F),r.calculateDataLimits(),!w.colorrange&&r._detachChild(r.getChildren("colorRange")&&r.getChildren("colorRange")[0]);for(c in L)h=F[c],l=L[c],h?this._configureEntity(c,l,(0,B.imprint)(E._sanitizeEntityOptions((0,B.extend2)({},h)),l.config)):this._configureEntity(c,l,l.config)}},m.updateEntityColors=function(f,r){var b=this,w=b.components.data,T=b.getFromEnv("chart"),_=T.config.entityOpts,F=_.nullEntityAlpha,L=_.nullEntityColor,h,l,c,a,n,o,e=ce({fill:L,alpha:F}),t={"fill-opacity":0};for(a in w)w.hasOwnProperty(a)&&(h=w[a],l=h.config,c=l.cleanValue,n=l.alphaArr||[],o={"fill-opacity":n[0]/100||1},c==null?(ie(h,e),h.hidden=!1):c<f||c>r?(ie(h,t),h.hidden=!0):(ie(h,o),h.hidden=!1))},m.legendInteractivity=function(f,r){var b=this,w=b.getFromEnv("chart"),T=b.components.data,_,F,L=f.config,h=f.hasState("hidden"),l,c=b.getFromEnv("colorManager"),a,n={},o,e={"fill-opacity":0},t;w.getFromEnv("animationManager").setAnimationState("legendInteraction");for(_ in T)T.hasOwnProperty(_)&&(F=T[_],L=F.config,l=L.cleanValue,t=c.getColorObj(l),a=L.visibleEntityAttr,n["fill-opacity"]=a["fill-opacity"],o=h?n:e,r.code===(!t.outOfRange&&t.code)&&(F.hidden=!h,ie(F,o),h?f&&f.removeLegendState("hidden"):f.setLegendState("hidden")))},m.calculateDataLimits=function(){var f=this,r=f.getFromEnv("chart"),b=f.config,w=r.jsonData,T=w.data||[],_=this.getFromEnv("number-formatter"),F,L,h=1/0,l=-1/0,c,a;for(a=0,c=T.length;a<c;a++)L=T[a].value,F=_.getCleanValue(L),h=te(h,F),l=he(l,F);b.max=l,b.min=h},m._configureEntity=function(f,r,b){var w=this,T=w.getFromEnv("chart"),_=w.config,F=this.getFromEnv("number-formatter"),L=T.config,h=L.entityOpts,l=r.config,c=r.labelConfig,a=b.value,n=l.cleanValue=F.getCleanValue(a),o=l.formattedValue=n!==X?F.dataLabels(n):X,e=(0,B.pluckNumber)(b.showtooltip,h.showTooltip),t=this._getDefaultTooltip(r,b,w),s={formattedValue:o,sName:b.shortLabel,lName:b.label},i=h.dataLabels.style,g=l.toolText=e?(0,B.parseUnsafeString)((0,B.pluck)((0,B.parseTooltext)((0,B.pluck)(b.tooltext,h.tooltext,t),[1,2,7,38,39],s,b)),!1):$,v=l.borderColor=(0,B.pluck)(b.bordercolor,h.borderColor),d=l.borderAlpha=(0,B.pluck)(b.borderalpha,h.borderAlpha),p=l.borderThickness=(0,B.pluckNumber)(b.borderthickness,h.borderThickness),C=h.hoverOnNull,k=l.useHoverColor=(0,B.pluckNumber)(b.showhovereffect,b.usehovercolor,C?h.showHoverEffect:isNaN(a)?0:h.showHoverEffect),y=l.labelAlignment,S=w.getFromEnv("colorManager"),I,D,G,ae,Y,ne,le,me,Le,be,ye,Ee,Re,Pe,xe,Ie,Te,we,_e,Se,Me,Ne;if(r.hidden=!1,l.showLabel=(0,B.pluckNumber)(b.showlabel,h.showLabels),l.labelPadding=(0,B.pluckNumber)(b.labelpadding,h.labelPadding),l.fontFamily=(0,B.pluck)(b.font,i.fontFamily),l.fontSize=(0,B.pluckNumber)(parseInt(b.fontsize,10),parseInt(i.fontSize,10)),l.fontBold=(0,B.pluckNumber)(b.fontbold,0),l.fontColor=(0,B.pluck)(b.labelcolor,b.fontcolor,i.color),l.labelBgColor=(0,B.pluck)(b.labelbgcolor,i.bgColor)||$,l.labelBorderColor=(0,B.pluck)(b.labelbordercolor,i.borderColor)||$,l.connectorColor=(0,B.pluck)(b.labelconnectorcolor,h.connectorColor),l.connectorAlpha=(0,B.pluck)(b.labelconnectoralpha,h.connectorAlpha),l.hoverBorderThickness=(0,B.pluckNumber)(b.borderhoverthickness,b.hoverborderthickness,h.hoverBorderThickness),l.hoverBorderColor=(0,B.pluck)(b.borderhovercolor,b.hoverbordercolor,h.hoverBorderColor,l.borderColor),l.hoverBorderAlpha=(0,B.pluck)(b.borderhoveralpha,b.hoverborderalpha,h.hoverBorderAlpha,l.borderAlpha),l.connectorThickness=(0,B.pluckNumber)(b.labelconnectorthickness,h.connectorThickness),l.origConnectorThickness=l.connectorThickness,l.borderThickness=p,l.link=b.link,l.isVisible=!0,l.id=f,l.originalId=b.origId,n!==null&&(I=S&&S.getColor(n),I&&!I.outOfRange&&(Ie=I.code,I.oriAlpha!==X&&(Te=I.oriAlpha+""))),(0,B.pluck)(b.color,b.alpha,b.angle,b.ratio)!==X?(Y=(0,B.pluck)(b.color,Ie,h.fillColor),ne=(0,B.pluck)(b.alpha,Te,h.fillAlpha),le=(0,B.pluck)(b.angle,h.fillAngle),me=(0,B.pluck)(b.ratio,h.fillRatio),Le=ce({color:Y,alpha:ne,angle:le,ratio:me})):(Pe=ce({color:(0,B.pluck)(Ie,h.fillColor),alpha:(0,B.pluck)(Te,h.fillAlpha),angle:(0,B.pluck)(h.fillAngle),ratio:(0,B.pluck)(h.fillRatio)}),Re=ce({color:(0,B.pluck)(h.nullEntityColor),alpha:(0,B.pluck)(h.nullEntityAlpha),angle:(0,B.pluck)(h.nullEntityAngle),ratio:(0,B.pluck)(h.nullEntityRatio)}),Le=n===null?Re:Pe,Y=Le.FCcolor.color,ne=Le.FCcolor.alpha,le=Le.FCcolor.angle,me=Le.FCcolor.ratio),g===$&&(_.showTooltip=0),l.visibleEntityAttr={stroke:(0,B.convertColor)(v,d),fill:(l.fillColor=Le).toString(),"fill-opacity":ne/100},Ne=ne.split(z),l.alphaArr=Ne,k&&((0,B.pluck)(b.fillhovercolor,b.fillhoveralpha,b.fillhoverangle,b.fillhoverratio,b.hoverfillcolor,b.hoverfillalpha,b.hoverfillratio,b.hoverfillangle)!==X?(Y=(0,B.pluck)(b.fillhovercolor,b.hoverfillcolor,h.hoverFillColor),ne=(0,B.pluck)(b.fillhoveralpha,b.hoverfillalpha,h.hoverFillAlpha),le=(0,B.pluck)(b.fillhoverangle,b.hoverfillangle,h.hoverFillAngle),me=(0,B.pluck)(b.fillhoverratio,b.hoverfillratio,h.hoverFillRatio),xe=ce({color:Y,alpha:ne,angle:le,ratio:me})):(h.hoverColorObject||(h.hoverColorObject=ce({color:h.hoverFillColor,alpha:h.hoverFillAlpha,angle:h.hoverFillAngle,ratio:h.hoverFillRatio})),xe=h.hoverColorObject),l.hoverColor=xe),!c&&(c=r.labelConfig={}),be=l.fontColor,ye=l.fontFamily,Ee=l.fontBold,g=l.toolText,D=l.link,y?(G=y[0],ae=y[1]):(G=R,ae=A),c.align=G,c.vAlign=ae,c.fontColor=be,c.bgColor=l.labelBgColor,c.borderColor=l.labelBorderColor,c.fontFamily=ye,c.fontBold=Ee,c.toolText=g,c.link=D,typeof l.options=="object")for(we=l.entityLabels=l.entityLabels||[],Se=l.labels||[],Me=Se.length;Me--;)we[Me]||(we[Me]={config:{}}),c=we[Me].config,y=Se[Me].labelAlignment,y?(G=y[0],ae=y[1]):(G=R,ae=A),c.align=G,c.vAlign=ae,c.displayValue=w.getDisplayValue(r,Se[Me],l.options.isDataEnabled,!Me,b),c.toolText=g,c.align=G,c.vAlign=ae,c.bgColor=l.labelBgColor,c.borderColor=l.labelBorderColor,c.fontColor=be,c.fontFamily=ye,c.fontBold=Ee,c.toolText=g;else _e={shortText:l.shortLabel,text:l.label},c.displayValue=w.getDisplayValue(r,_e,!0,!0,b)},m.getDisplayValue=function(f,r,b,w,T){var _=this.getFromEnv("chart"),F=_.config.entityOpts,L=f.config,h=L.cleanValue,l=L.formattedValue,c=F.labelSepChar,a;return b?w&&typeof T.displayvalue<"u"?a=T.displayvalue:(a=(0,B.pluck)(F.includeNameInLabels?F.useShortName?r.shortText:r.text:""),F.includeValueInLabels&&h!==null&&(a=a===X?l:a+c+l)):a=L.label,a},E._sanitizeEntityOptions=function(f){return delete f.outlines,delete f.label,delete f.shortlabel,delete f.labelposition,delete f.labelalignment,delete f.labelconnectors,f},m._redefineEntities=function(f){var r=this,b=r.config,w=r.getFromEnv("chart"),T={},_={},F=w.config.entities,L=b.useSNameAsId,h,l,c,a,n,o,e,t,s=0,i,g,v,d;for(h=f.length;h--;)if(l=f[h],c=l.internalid,a=l.newid?l.newid:c,n=l.sname,o=l.lname,d=F[c],c=(0,B.trimString)(c),a=(0,B.trimString)(a),a=a&&a.toLowerCase(),d){T[a]=t={origId:c},_[c]=!0;for(v in d)t[v]=d[v];t.shortLabel=n||d.shortLabel,t.label=o||d.label,t.showhovereffect=l.showhovereffect,t.fillhovercolor=l.fillhovercolor,t.fillhoveralpha=l.fillhoveralpha,t.fillhoverangle=l.fillhoverangle,t.fillhoverratio=l.fillhoverratio,t.borderhoverthickness=l.borderhoverthickness}g=r.components.data,g||(g=r.components.data={});for(e in T)e=e.toLowerCase(),g[e]||(g[e]={config:{}}),g[e].config=T[e],s+=1;i=g;for(e in F)if(t=F[e],e=(0,B.trimString)(e),!_[e]){L?(d=i[t.shortLabel.toLowerCase()],d||(d=i[t.shortLabel.toLowerCase()]={}),d.config={},d.origId=t.shortLabel):(d=i[e.toLowerCase()],d||(d=i[e.toLowerCase()]={}),d.config={},d.config.origId=e);for(v in t)d.config[v]=t[v];s+=1}b.entityCount=s},m.draw=function(){var f=this,r=f.config,b=f.getFromEnv("chart"),w=B.hasSVG?200:10,T;f.createContainer(),this.config.ready=!1,r.BATCH_SIZE=w,r.labelBatchSize=B.hasSVG?200:20,T=this._batchRender(),T(0),b.config.entityFlag=!0,b.checkComplete()},m._batchRender=function(){var f=this,r=f.config,b=f.getFromEnv("chart"),w=b.config.entities.firstEntity,T=f.components.data,_=r.BATCH_SIZE,F=r.entityKeys=w?f._getKeys(w,T):Object.keys(T),L=r.entityLength=F.length,h,l,c,a,n,o=function e(t){for(h=t,c=0;F[h]!==X;)if(l=T[F[h]],n=f.drawEntity(l,_),c+=n,l.config.drawn&&(a=h===L-1?l:T[F[h-1]],a&&(a.config.drawn=!1,a.config.outlineStartIndex=X),h++),c>=_){f.addJob("entityDraw",e.bind(f,h),u.priorityList.entitydraw);break}h===L&&(f._addEventListenersToEntities(0),f.initComplete())};return o},m._addEventListenersToEntities=function(f){var r=this,b=r.components.data,w=r.config,T=w.BATCH_SIZE,_=w.entityKeys,F,L=w.entityLength,h,l=0,c,a;for(F=f;F<L;F++)if(h=b[_[F]],a=h.config,c=a.options,c&&c.isDataEnabled===!1||r.addMouseGestures(h),l++,l===T){r.addJob("_addEventListenersToEntities",r._addEventListenersToEntities.bind(this,F),u.priorityList.entitydraw);break}},E._getKeys=function(f,r){for(var b=[f],w=f;r[w];)w=r[w].nextId,b.push(w);return b},m._getDefaultTooltip=function(f,r){var b=this,w=f.config.cleanValue,T=f.config.formattedValue,_=b.getFromEnv("chart").config.entityOpts,F,L;if(typeof f.config.options=="object"){if(L=r.labels&&r.labels[0],!L)return X;F=(_.useSNameInTooltip?L.shortText:L.text)+(w===null?$:_.tooltipSepChar+T)}else F=(_.useSNameInTooltip?r.shortLabel:r.label)+(w===null?$:_.tooltipSepChar+T);return F},m.drawEntity=function(f,r){var b=this,w=b.getFromEnv("chart"),T=w.getFromEnv("animationManager"),_=f.config,F=B.hasSVG||!j?"litepath":"path",L=w.config.entityOpts,h=_.outlines,l=b.getFromEnv("toolTipController"),c=this.getLinkedParent().getChildContainer("plot"),a=this.getLinkedParent().getChildContainer("plotShadow"),n=_.toolText,o=L.shadow,e,t=[],s,i,g,v,d,p,C,k={},y;if(b._configureEntityDrawingParams(f),_=f.config,i=_.visibleEntityAttr,y=_.shadowOptions,e=_.outlineStartIndex===X?h.length:_.outlineStartIndex,f.graphics||(f.graphics={}),p=0,t=_.outlinePath||(_.outlinePath=[]),C=_.customStrokeWidthModifier,typeof _.options=="object"){for(;e--;)if(t=h[e].outline,_.options.isDataEnabled===!0?g=i:g=(0,B.extend2)((0,B.extend2)({},i),ve(h[e].style,C)),v=f.graphics.outlines,v||(v=f.graphics.outlines=[]),!v[e]&&(v[e]={}),d=v[e].outline,g[F]=t,d=v[e].outline=T.setAnimation({el:F,container:c,attr:g,component:b,label:"path"}),d.shadow(o?y:!1,a),l.enableToolTip(d,n),p++,_.outlineStartIndex=e,p===r)return p;return _.drawn=!0,p}for(;e--;)if(s=h[e],t=s.concat(t),p++,_.outlineStartIndex=e,p===r)return _.outlinePath=t,p;return!f.graphics.outlines&&(i[F]=t),Object.assign(k,i,f.hidden&&{"fill-opacity":0}||{}),f.graphics.outlines=T.setAnimation({el:f.graphics.outlines||F,container:c,attr:k,component:b,label:"path"}),_.drawn=!0,_.outlineStartIndex=0,_.outlinePath=[],f.graphics.outlines.shadow(o?y:!1,a),l.enableToolTip(f.graphics.outlines,n),p},m._configureEntityDrawingParams=function(f){var r=this,b=r.getFromEnv("chart"),w=f.config,T=b.config.entityOpts,_=b.config.scalingParams,F=!j||B.hasSVG,L=_.scaleFactor,h=_.strokeWidth,l=(F?b.baseScaleFactor:1)*h,c=T.scaleBorder===1,a=w.borderThickness,n=w.alphaArr,o=w.origConnectorThickness,e=w.hoverBorderThickness,t=w.visibleEntityAttr,s=t["fill-opacity"],i;w.shadowOptions={scalefactor:[L,L*b.config.baseScaleFactor],opacity:he.apply(Z,n)/100,useFilter:0},w.fillOpacity=f.hidden?0:s,F?(a=w.entityBorderThickness=c?a*l:a/L,o=o/L,i=c?L:_.sFactor,e&&(e=w.hoverBorderThickness=c?e*l:e/L)):(a=c?a*h:a,i=c?_.scaleFactor:b.baseScaleFactor),w.entityBorderThickness=a,w.connectorThickness=o,w.customStrokeWidthModifier=i,t["stroke-width"]=a,t.transform=B.hasSVG||!j?"":_.transformStr},m.drawLabels=function(f){var r=this,b=f,w=r.getFromEnv("chart"),T=r.config,_=T.labelBatchSize,F=T.entityLength,L=[],h,l,c=w.getChildContainer("upperAnnotationGroup"),a,n,o=0,e=r.getChildren("mapLabelAnnotations")&&r.getChildren("mapLabelAnnotations")[o],t=0,s=0,i=w.config.annotationConfig;e||(n=new O.default,r.attachChild(n,"mapLabelAnnotations"),e=r.getChildren("mapLabelAnnotations")[o],e.addCustomGroup(c)),e.destroy(),e._renderer&&(e._renderer=null),i.showbelow=0;for(h in b){if(r.drawLabel(b[h],L),t++,t===_){for(l=0;l<L.length;l++)L[l].animationLabel=W;for(a=e.addGroup(Object.assign(i,{id:"entityLabels"+o,items:L,animationLabel:"entityLabelGroup"}),r),l=0;l<a.items.length;l++)a.items[l].addEventListener("fc-mouseover",L[l].onmouseover),a.items[l].addEventListener("fc-mouseout",L[l].onmouseout),a.items[l].addEventListener("fc-click",L[l].onclick);o++,e=r.getChildren("mapLabelAnnotations")&&r.getChildren("mapLabelAnnotations")[o],e||(n=new O.default,r.attachChild(n,"mapLabelAnnotations"),e=r.getChildren("mapLabelAnnotations")[o],e.addCustomGroup(c)),e.destroy(),e._renderer&&(e._renderer=null),t=0,L=[]}else if(s===F-1){for(l=0;l<L.length;l++)L[l].animationLabel=W;for(a=e.addGroup(Object.assign(i,{id:"entityLabels"+o,items:L,animationLabel:"entityLabelGroup"}),r),l=0;l<a.items.length;l++)a.items[l].addEventListener("fc-mouseover",L[l].onmouseover),a.items[l].addEventListener("fc-mouseout",L[l].onmouseout),a.items[l].addEventListener("fc-click",L[l].onclick)}s++}r.drawLabelConnFn(0)},m.drawLabelConnFn=function(f){var r=this,b=r.config,w=r.components.data,T=b.BATCH_SIZE,_=b.entityKeys,F,L,h=_.length,l,c,a,n=0;for(L=f;L<h;L++){if(a=w[_[L]],c=a.config,typeof c.options=="object")for(l=c.labels,F=l&&l.length||0;F--;)l[F].labelConnectors&&(r.drawLabelConnectors(a,l[F].labelConnectors,r),n++);else c.labelConnectors&&(r.drawLabelConnectors(a,c.labelConnectors,r),n++);if(n===T){r.addJob("drawLabelConnectors",r.drawLabelConnFn.bind(this,L),u.priorityList.entitydraw);break}}},m._getLabelObject=function(f,r,b){var w=this,T=w.getFromEnv("chart"),_=w.getFromEnv("chart-attrib"),F=f.config,L,h=T.config.scalingParams,l,c,a=f.graphics&&f.graphics.outlines,n,o=F.fontSize,e=F.labelPadding,t=F.labels||[],s=F.entityLabels||[],i,g,v,d,p,C,k,y,S,I,D,G;return r!==X?(D=t[r],G=s[r],L=G.config,n=L.style=D.style,l=D.labelPosition,c=D.labelAlignment):(L=f.labelConfig,l=F.labelPosition,c=F.labelAlignment),l?(v=l[0],d=l[1]):(p=a.getBBox(),v=p.x+p.width/2,d=p.y+p.height/2),c?(C=c[0],k=c[1],C===J?v-=e:C===P&&(v+=e),k===ee?d-=e:k===Q&&(d+=e)):(C=R,k=A),y=parseFloat(o)/h.sFactor,!b&&n&&(n.color&&(L.fontColor=n.color),n["font-size"]&&(y=parseFloat(n["font-size"])/h.sFactor),n["font-family"]&&(L.fontFamily=n["font-family"]),n["font-weight"]!==X&&(L.fontBold=n["font-weight"]==="bold")),L.x=v.toString(),L.y=d.toString(),L.wrap=1,L.type=M,L.fontSize=y,{x:v.toString(),y:d.toString(),wrapwidth:oe[C](i,v+S)-e,wrapheight:fe[k](g,d+I)-e,wrap:1,type:"text",align:L.align,valign:L.vAlign,text:L.displayValue,tooltext:L.toolText,outlineText:(0,B.pluckNumber)(_.textoutline,0),css:L.link!==X&&{cursor:"pointer",_cursor:"hand"},bgcolor:L.bgColor,bordercolor:L.borderColor,fillcolor:L.fontColor,fontsize:L.fontSize,font:L.fontFamily,bold:L.fontBold,onclick:function(Y){var ne=f.graphics.outlines,le,me;if(ne instanceof Array)for(le=0,me=ne.length;le<me;le++)w.entityClick(ne[le].outline,Y);else w.entityClick(ne,Y)},onmouseover:function(Y){var ne=f.graphics.outlines,le,me;if(ne instanceof Array)for(le=0,me=ne.length;le<me;le++)w.entityRollOver(ne[le].outline,Y);else w.entityRollOver(ne,Y)},onmouseout:function(Y){var ne=f.graphics.outlines,le,me;if(ne instanceof Array)for(le=0,me=ne.length;le<me;le++)w.entityRollOut(ne[le].outline,Y);else w.entityRollOut(ne,Y)},ontouchstart:function(Y){var ne=f.graphics.outlines,le,me;if(ne instanceof Array)for(le=0,me=ne.length;le<me;le++)w.entityRollOver(ne[le].outline,Y);else w.entityRollOver(ne,Y);w.entityRollOver(ne,Y)}}},m.drawLabel=function(f,r){var b=this,w=f.config,T=w.showLabel,_,F,L;if(T)if(typeof w.options=="object")for(L=w.labels,F=L&&L.length||0,_=w.options.isDataEnabled;F--;)r.push(b._getLabelObject(f,F,_,!F));else r.push(b._getLabelObject(f,X,!0,!0))},m.drawLabelConnectors=function(f,r,b){for(var w=f.config,T=this,_=T.getFromEnv("chart"),F=_.getFromEnv("animationManager"),L=_.config.scalingParams,h=b.getLinkedParent().getChildContainer("plot"),l=r&&r.length||0,c,a,n=w.showLabel;l--;)a=r[l],c=f.graphics.connectorElem,n?f.graphics.connectorElem=c=F.setAnimation({el:f.graphics.connectorElem||"path",attr:{path:a,opacity:1,transform:B.hasSVG||!j?"":L.transformStr,stroke:(0,B.convertColor)(w.connectorColor,w.connectorAlpha),"shape-rendering":N,"stroke-width":w.connectorThickness},container:h,component:T,label:"labelConnectors"}):c&&c.hide()},m.entityClick=function(f,r){var b=f.node.__entity,w=this,T=w.getFromEnv("chart"),_=T.config.scalingParams,F=f.getBBox(),L=T.getFromEnv("linkClickFN"),h=b.config,l=h.link;F.width=F.width*_.scaleFactor,F.height=F.height*_.scaleFactor,F.x=F.x*_.scaleFactor+_.translateX,F.y=F.y*_.scaleFactor+_.translateY,F.x2=F.x+F.width,F.y2=F.y+F.height,T.fireChartInstanceEvent("entityclick",h.eventArgs,r),l!==X&&L.call({link:l,entity:b,entityBox:F},!0)},m.entityRollOver=function(f,r){var b=f.node.__entity,w=this,T=b.config,_=w.getFromEnv("chart"),F=_.getFromEnv("animationManager"),L=T.hoverAttr;_.plotEventHandler(f,r,"entityRollOver"),f.data("hovered")?clearTimeout(b.config.timer):T.useHoverColor&&T.isVisible&&!b.hidden&&L&&(_.config.hoverEntity=f,F.setAnimation({el:f,attr:L,component:w,state:"updating",label:"path"}),f.data("hovered",!0))},m.entityRollOut=function(f,r){var b=f.node.__entity,w=this,T,_=w.getFromEnv("chart"),F=_.getFromEnv("animationManager"),L=b.config,h=L.revertAttr;_.plotEventHandler(f,r,"entityRollOut"),b.config.timer=setTimeout(function(){T=b.hidden,T!==!0&&h&&(F.setAnimation({el:f,attr:h,component:w,state:"updating",label:"path"}),f.data("hovered",!1))},100)},m.addMouseGestures=function(f){var r=f.config,b=r.originalId,w=this,T=f.graphics,_=r.useHoverColor,F=r.hoverBorderThickness,L=r.hoverBorderColor,h=r.hoverBorderAlpha,l=r.entityBorderThickness,c=r.borderColor,a=r.borderAlpha,n=r.link,o=r.visibleEntityAttr,e="groupId"+b,t,s,i,g,v,d=function(C){n!==X&&C.css({cursor:"pointer",_cursor:"hand"}),C.data("eventArgs",r.eventArgs),C.data("groupId",e),C.node.__entity=f,f._listenersBinded||C.on("fc-click",w.entityClick.bind(w,C)).hover(w.entityRollOver.bind(w,C),w.entityRollOut.bind(w,C))};r.eventArgs={value:r.cleanValue,label:r.label,shortLabel:r.shortLabel,originalId:r.origId,id:r.id||r.origId},r.legacyEventArgs={value:r.value,lName:r.label,sName:r.shortLabel,id:r.originalId||r.id},_&&(r.hoverAttr={fill:(0,B.toRaphaelColor)(r.hoverColor)},r.revertAttr={fill:(0,B.toRaphaelColor)(r.fillColor),stroke:(0,B.toRaphaelColor)(r.borderColor,r.borderAlpha)},r.revertAttr["fill-opacity"]=o["fill-opacity"],F!==l&&(r.hoverAttr["stroke-width"]=(0,B.pluckNumber)(F,l),r.revertAttr["stroke-width"]=l),(L!==c||h!==a)&&(r.hoverAttr.stroke=(0,B.convertColor)(L,h),r.revertAttr.stroke=(0,B.convertColor)(c,a)));for(t in T)if(T.hasOwnProperty(t))if(T[t]instanceof Array){for(v=T[t],s=0,g=v.length;s<g;s++)i=v[s].outline,d(i);f._listenersBinded=!0}else i=T[t],d(i),f._listenersBinded=!0},m.getDataLimits=function(){var f=this,r=f.config;return{max:r.max,min:r.min}},m.createContainer=function(){var f=this,r=f.getLinkedParent(),b=f.getFromEnv("animationManager"),w=r.getChildContainer("layer0");!f.getChildContainer("abovePlotGroup")&&f.addChildContainer("abovePlotGroup",b.setAnimation({el:"group",attr:{name:"abovePlotGroup",opacity:1},container:w,component:f,label:"group"})),!f.getChildContainer("belowPlotGroup")&&f.addChildContainer("belowPlotGroup",b.setAnimation({el:"group",attr:{name:"belowPlotGroup",opacity:1},container:w,component:f,label:"group"}))},m.initComplete=function(){var f=this,r=f.getFromEnv("chart"),b=f.components.data;this.drawLabels(b),r.config.entitiesReady=!0,r.checkComplete()},E}(Fe.ComponentInterface),H=U;return Ke.default=H,Ke}var Xe={},Ye={},bt;function Ht(){if(bt)return Ye;bt=1,Ye.__esModule=!0,Ye.default=void 0;var ke,pe=function(P,A,R,W,M){return Math.pow(R-P,2)+Math.pow(W-A,2)<=Math.pow(M,2)},Fe=Math.PI,O=Math.cos,Ce=Math.sin,K=Math.max,B=Math.min,u=Fe/180,Ae=function(P){return P%360*u},ge=function(P,A,R,W,M,N){var Z=W-A,te=M-R,he=R-P,ue=N-W,se,re,ce;return se=Z*te,re=he*ue,isNaN(se)&&(se=0),isNaN(re)&&(re=0),ce=se-re,ce===0?0:ce>0?1:2},X=function(P,A,R,W,M,N){return R<=K(P,M)&&R>=B(P,M)&&W<=K(A,N)&&W>=B(A,N)},de=function(P,A,R,W,M,N,Z,te){var he=ge(P,A,R,W,M,N),ue=ge(P,A,R,W,Z,te),se=ge(M,N,Z,te,P,A),re=ge(M,N,Z,te,R,W);return!!(he!==ue&&se!==re||he===0&&X(P,A,M,N,R,W)||ue===0&&X(P,A,Z,te,R,W)||se===0&&X(M,N,P,A,Z,te)||re===0&&X(M,N,R,W,Z,te))},j=function(P,A,R,W,M,N,Z){var te,he=1/0,ue,se=0,re,ce,ve,oe,fe,ie=!1;if(pe(P,A,R,W,M)&&N>=3){for(ue=Z===ke?Fe*.5:Ae(Z),fe=2*Fe/N,re=R+M*O(-ue),oe=W+M*Ce(-ue),te=0;te<N;te++){if(ue+=fe,ce=R+M*O(-ue),ve=W+M*Ce(-ue),de(re,oe,ce,ve,P,A,he,A)){if(ge(re,oe,P,A,ce,ve)===0)return X(re,oe,P,A,ce,ve);se++}re=ce,oe=ve}ie=se%2!==0}return ie},z=function(P,A){return!P||P&&A&&A.i>P.i?A:P};function $(J){var P=J,A=P&&P[0]&&P[0].r||5,R,W=Math.max,M=Math.floor,N=Math.sqrt,Z=Math.min,te=Math.log,he=Math.exp,ue=Math.pow,se,re;function ce(oe,fe,ie){var q=oe[fe];oe[fe]=oe[ie],oe[ie]=q}for(se=function(fe,ie,q,U){for(var H,V,E,m,x,f,r,b,w,T,_=q,F=U;F>_;){for(F-_>600&&(H=F-_+1,V=ie-_+1,E=te(H),m=.5*he(2*E/3),x=.5*N(E*m*(H-m)/H)*(V-H/2<0?-1:1),f=W(_,M(ie-V*m/H+x)),r=Z(F,M(ie+(H-V)*m/H+x)),se(fe,ie,f,r)),b=fe[ie],w=_,T=F,ce(fe,_,ie),fe[F].x>b.x&&ce(fe,_,F);w<T;){for(ce(fe,w,T),w++,T--;fe[w].x<b.x;)w++;for(;fe[T].x>b.x;)T--}fe[_].x===b.x?ce(fe,_,T):(T++,ce(fe,T,F)),T<=ie&&(_=T+1),ie<=T&&(F=T-1)}},re=function(fe,ie,q,U){for(var H,V,E,m,x,f,r,b,w,T,_=q,F=U,L=fe;F>_;){for(F-_>600&&(H=F-_+1,V=ie-_+1,E=te(H),m=.5*he(2*E/3),x=.5*N(E*m*(H-m)/H)*(V-H/2<0?-1:1),f=W(_,M(ie-V*m/H+x)),r=Z(F,M(ie+(H-V)*m/H+x)),re(L,ie,f,r)),b=L[ie],w=_,T=F,ce(L,_,ie),L[F].y>b.y&&ce(L,_,F);w<T;){for(ce(L,w,T),w++,T--;L[w].y<b.y;)w++;for(;L[T].y>b.y;)T--}L[_].y===b.y?ce(L,_,T):(T++,ce(L,T,F)),T<=ie&&(_=T+1),ie<=T&&(F=T-1)}},P=P||[],R=P.length;R--;)P[R].r>A&&(A=P[R].r),P[R].i=R,P[R].x=+P[R].x,P[R].y=+P[R].y;function ve(oe,fe,ie,q){var U={},H,V=q?"y":"x";return fe===ie?(U.point=oe[fe],U):ie-fe===1?(oe[fe][V]>oe[ie][V]?(U.point=oe[fe],U.left={point:oe[ie]}):(U.point=oe[ie],U.left={point:oe[fe]}),U):(H=fe+ie>>1,q?re(oe,H,fe,ie):se(oe,H,fe,ie),U.point=oe[H],U.left=ve(oe,fe,H-1,!q),U.right=ve(oe,H+1,ie,!q),U)}return{tree:P.length===0?{}:ve(P,0,P.length-1,!1),search:function(fe,ie,q,U){var H=this.tree,V=U,E,m=fe-A,x=fe+A,f=ie-A,r=ie+A,b=!1,w=0,T,_;V=V||{};function F(a,n,o,e){return N(ue(a-o,2)+ue(n-e,2))}function L(a,n){return q==="circle"?F(a,n,fe,ie)<=m:a>=m&&a<=x&&n>=f&&n<=r}function h(a,n,o){return a>=n&&a<=o}function l(a){var n=h(fe,a.x1,a.x2)&&h(ie,a.y1,a.y2),o=F(fe,ie,a.point.x,a.point.y);if(!E){E=a,b=n,w=o;return}n?b?a.point.i>E.point.i&&(E=a,b=n,w=o):(E=a,b=n,w=o):b||o<w&&(E=a,b=n,w=o)}function c(a,n){q==="circle"?m=a:(m=fe-a||0,x=fe+a||0,f=ie-n||0,r=ie+n||0)}return _=function(n){var o,e;!n||!n.point||(o=V.rx||n.point.r,e=V.ry||n.point.r,c(o,e),L(n.point.x,n.point.y)&&l(n),f<=n.point.y&&T(n.left),r>=n.point.y&&T(n.right))},T=function(n){var o,e;!n||!n.point||(o=V.rx||n.point.r,e=V.ry||n.point.r,c(o,e),L(n.point.x,n.point.y)&&l(n),m<=n.point.x&&_(n.left),x>=n.point.x&&_(n.right))},T(H),E&&E.point||E}}}var ee=function(){function J(A){var R=this;R.configure(A)}var P=J.prototype;return P.configure=function(R){var W=this;W.validatorFn=R?W.shapeValidator():W.defaultValidator()},P.defaultValidator=function(){var R=this;return function(W){var M=R.mousePoint;return!!(W&&Math.pow((W.x-M.x)/R.xLimit,2)+Math.pow((W.y-M.y)/R.yLimit,2)<=1)}},P.shapeValidator=function(){var R=this;return function(W){var M=R.mousePoint,N=W&&W.shapeInfo,Z=!1,te,he,ue,se=M.x,re=M.y,ce,ve,oe,fe,ie,q;switch(te=N&&N.type,te){case"circle":ue=N.radius,Z=pe(se,re,W.x,W.y,ue);break;case"arc":he=N.innerradius,ue=N.radius,Z=!pe(se,re,W.x,W.y,he)&&pe(se,re,W.x,W.y,ue);break;case"polygon":ue=N.radius,ve=N.startAngle,ce=N.sides,Z=j(se,re,W.x,W.y,ue,ce,ve);break;case"rect":case"rectangle":oe=W.x,ie=W.y,fe=oe+(N.width||0),q=ie+(N.height||0),Z=se>=oe&&se<=fe&&re>=ie&&re<=q;break;case"default":Z=!1;break}return Z}},P.buildKdTree=function(R){return this.kdTree=$(R),this.tree=this.kdTree.tree,this},P.getNeighbour=function(R,W,M){var N=this,Z=N.tree,te=N.validatorFn;if(N.mousePoint=R,W)return this.kdTree&&this.kdTree.search(R.x,R.y,M,R.options);if(Z)return N._searchBtwnLimit(Z,!0,te)},P._searchBtwnLimit=function(R,W,M){var N,Z,te=this,he=W?"x":"y",ue={x1:R.point.x-R.point.shapeInfo.width,x2:R.point.x+R.point.shapeInfo.width,y1:R.point.y-R.point.shapeInfo.height,y2:R.point.y+R.point.shapeInfo.height},se=W?ue.x1:ue.y1,re=W?ue.x2:ue.y2;if(N=R&&R.point&&R.point[he],N!==ke)return M(R.point)&&(Z=R.point),N>=se&&R.left&&(Z=z(Z,te._searchBtwnLimit(R.left,!W,M))),N<=re&&R.right&&(Z=z(Z,te._searchBtwnLimit(R.right,!W,M))),Z},P._setSearchLimit=function(R,W){var M=this;M.xLimit=R,M.yLimit=W},J}();ee.prototype.constructor=ee;var Q=ee;return Ye.default=Q,Ye}var vt;function jt(){if(vt)return Xe;vt=1;var ke=Oe;Xe.__esModule=!0,Xe.default=void 0;var pe=ke(ze()),Fe=ke(Pt()),O=ke(Ht()),Ce=ke(St()),K=ut(),B=ke(dt()),u=Ge(),Ae=Tt(),ge=Et(),X,de="",j="top",z="bottom",$="right",ee="left",Q="middle",J="center",P="line",A="text",R="polygon",W="arc",M="circle",N="center",Z=.6,te=window.Math,he=te.min,ue=te.max,se="items",re=function(_){var F=this,L=F.getFromEnv("chart"),h=F.getChildren("mapAnnotations")[0],l=_.markerShape,c=l.groupConfig,a=l.data("unfilteredConfig"),n=a._markerEventArgs,o,e=_.config;a.hovereffect&&(l.config.type==="circle"&&(o=(0,u.extend2)({fillcolor:a.hoverfillcolor,fillalpha:a.hoverfillalpha,fillangle:a.hoverfillangle,fillratio:a.hoverfillratio,gradientUnits:"objectBoundingBox",radialGradient:1},a._hoverattrs)),o=(0,u.extend2)({},a._hoverattrs),h.update(l.getId(),o)),n||(n=a._markerEventArgs={x:+a.x,y:+a.y,scaledX:a.x*c.scaleX,scaledY:a.y*c.scaleY,chartX:a.x*c.scaleX+c.grpXShift,chartY:a.y*c.scaleY+c.grpYShift,id:a.id,label:a.label}),(0,Ae.raiseEventGroup)(e.options.id,"markerRollOver",n,L.getFromEnv("chartInstance"),e,X,X,X)},ce=function(_){var F=this,L=F.getFromEnv("chart"),h=F.getChildren("mapAnnotations")[0],l=_.markerShape,c=l.getElement(),a=_.config,n=l.data("unfilteredConfig"),o;c&&n.hovereffect&&(l.config.type==="circle"&&(o=(0,u.extend2)({fillcolor:l.config.rawColor,fillalpha:l.config.rawAlpha,fillangle:l.config.rawAngle,fillratio:l.config.rawRatio,gradientUnits:"objectBoundingBox",radialGradient:l.config.rawFillPattern==="radial"},n._defaultattrs)),o=(0,u.extend2)({},n._defaultattrs),h.update(l.getId(),o)),(0,Ae.raiseEventGroup)(a.id,"markerRollOut",n._markerEventArgs,L.getFromEnv("chartInstance"),X,X,X)},ve=function(_,F){var L=this,h=F.config.options,l=L.getFromEnv("chart"),c=F.markerShape,a=c.config,n=c.groupConfig,o=L.getFromEnv("linkClickFN"),e=c.config.link,t=a._markerEventArgs;e&&o&&o.call({link:e},!0),t||(t=a._markerEventArgs={x:+a.x,y:+a.y,scaledX:a.x*n.scaleX,scaledY:a.y*n.scaleY,chartX:a.x*n.scaleX+n.grpXShift,chartY:a.y*n.scaleY+n.grpYShift,id:h.id,label:h.label}),l.fireChartInstanceEvent("markerClick",t,_)},oe=function(_,F){var L=_&&_.length||!1,h="id",l={},c;if(!_)return _;for(;L--;)c=_[L],c[h]!==X&&(l[c[h].toLowerCase()]=c);return l},fe=function(_,F,L){return{x:_.toString(),y:(F-L).toString(),align:J,valign:j}},ie=function(_,F,L){return{x:(_-L).toString(),y:F.toString(),align:$,valign:Q}},q=function(_,F,L){return{x:(_+L).toString(),y:F.toString(),align:ee,valign:Q}},U=function(_,F,L){return{x:_.toString(),y:(F+L).toString(),align:J,valign:z}},H=function(_,F){return{x:_.toString(),y:F.toString(),align:J,valign:Q}},V=function(){return arguments[1]},E=function(_,F){return _-F},m=function(_,F){return he(F,_-F)*2},x=function(){return arguments[1]},f=function(_,F){return he(F,_-F)*2},r=function(_,F){return _-F};(0,K.addDep)({name:"mapsAnimation",type:"animationRule",extension:B.default});var b=function(T){(0,pe.default)(_,T);function _(){var L;return L=T.call(this)||this,L.components={},L.getLabelAlignment={top:fe,left:ie,right:q,bottom:U,center:H},L.getWrapWidth={right:V,left:E,center:m},L.getWrapHeight={top:x,middle:f,bottom:r},L.hoverFn=re,L.hoverOutFn=ce,L.clickFn=ve,L}var F=_.prototype;return F.getName=function(){return"markers"},F.getType=function(){return"dataset"},F.configureAttributes=function(h){if(h){this.JSONData=h;var l=this,c,a=l.getChildren("mapAnnotations")&&l.getChildren("mapAnnotations")[0],n=l.getFromEnv("chart"),o=n.config.markerOpts;a||(c=new Ce.default,l.attachChild(c,"mapAnnotations"),a=l.getChildren("mapAnnotations")[0]),a.destroy(),l.calculateDataLimits(),o.dataEnabled?this._parseMarkers():this.defineMarkersNShapes(),this.configureConnectors()}},F.calculateMarkerRadiusLimits=function(){if(this.JSONData){var h=this,l=h.JSONData,c=h.config,a=h.getFromEnv("chart"),n=a.config.width,o=a.config.height,e=l.markermaxradius,t=l.markerminradius,s=_.getMarkerRadiusLimits(n,o,e,t);c.minRadius=s.min,c.maxRadius=s.max}},F.calculateDataLimits=function(){var h=this,l=h.getFromEnv("chart"),c=h.config,a=l.jsonData,n=a.markers||{},o=n[se]||[],e=this.getFromEnv("number-formatter"),t=1/0,s=-1/0,i,g,v,d,p;for(p=0,v=o.length;p<v;p++)i=o[p],d=i.value,g=e.getCleanValue(d),g!==null&&(t=he(g,t),s=ue(g,s));c.min=t,c.max=s},F._parseMarkers=function(){var h=this,l=h.getFromEnv("chart"),c=l.jsonData,a=c.markers,n=a[se],o=a.shapes,e=l.config.markerOpts,t=e.dataLabels.style,s=this.getFromEnv("number-formatter"),i=h.components.shapeObjs={},g=h.components.markerObjs={},v,d,p,C,k,y,S,I;if(!(!n||!n.length)){if(o&&o.length)for(d=o.length;d;d-=1)C=o[d-1],(I=C.id.toLowerCase())&&(i[I]=C);for(d=n.length;d--;)C=n[d],(I=C.id&&C.id.toLowerCase())&&(v=C.value,v!==X&&v!==""&&(v=parseFloat(v)),p=_._initializeMarkerItem(I,C,null,l),k=p.config.options.shapeid,k&&typeof k=="string"&&(k=k.toLowerCase()),y=p.config,S=y.options,y.cleanValue=s.getCleanValue(v),y.cleanValue!==null?y.formattedValue=s.dataLabels(v):y.formattedValue=X,y.fillColor=(0,u.pluck)(S.fillcolor,S.color,e.fillColor),y.fillAlpha=(0,u.pluck)(S.fillalpha,S.alpha,e.fillAlpha),y.fillRatio=(0,u.pluck)(S.fillratio,e.fillRatio),y.fillAngle=(0,u.pluck)(S.fillangle,e.fillAngle),y.borderThickness=(0,u.pluckNumber)(S.borderthickness,e.borderThickness),y.borderColor=(0,u.pluck)(S.bordercolor,e.borderColor),y.borderAlpha=(0,u.pluck)(S.borderalpha,e.borderAlpha),y.labelPadding=S.labelpadding||e.labelPadding,y.fontColor=(0,u.pluck)(S.labelcolor,t.fontColor),y.labelBgColor=(0,u.pluck)(S.labelbgcolor,t.labelBgColor)||de,y.labelBorderColor=(0,u.pluck)(S.labelbordercolor,t.labelBorderColor)||de,C.__hideMarker&&(p._isHidden=!0),k&&(p.shapeObj=i[k]),g[I]=p)}},F.defineMarkersNShapes=function(){var h=this,l=h.getFromEnv("chart"),c=l.jsonData,a=c.markers,n=a.definition,o=this.getFromEnv("number-formatter"),e=l.config.markerOpts,t=e.dataLabels.style,s=oe(n)||{},i=oe(a.application)||{},g=a.shapes,v=h.components.shapeObjs=h.components.shapeObjs||(h.components.shapeObjs={}),d=h.components.markerObjs=h.components.markerObjs||(h.components.markerObjs={}),p={},C={},k,y,S,I,D,G,ae,Y;if(!(!n||!n.length)){for(I in v)p[I]=!1;for(I in d)C[I]=!1;if(g&&g.length)for(I=g.length;I;I-=1)G=g[I-1],(Y=G.id.toLowerCase())&&(v[Y]=G,p[Y]=!0);for(Y in s)G=s[Y],D=d[Y]=_._initializeMarkerItem(Y,G,i[Y],l),C[Y]=!0,ae=D.config.options.shapeid,y=D.config,S=G.value,y.cleanValue=o.getCleanValue(S),k=y.options,y.cleanValue!==null?y.formattedValue=o.dataLabels(S):y.formattedValue=X,y.fillColor=(0,u.pluck)(k.fillcolor,k.color,e.fillColor),y.fontColor=(0,u.pluck)(k.labelcolor,t.fontColor),y.fillAlpha=(0,u.pluck)(k.fillalpha,k.alpha,e.fillAlpha),y.fillRatio=(0,u.pluck)(k.fillratio,e.fillRatio),y.fillAngle=(0,u.pluck)(k.fillangle,e.fillAngle),y.borderThickness=(0,u.pluckNumber)(k.borderthickness,e.borderThickness),y.borderColor=(0,u.pluck)(k.bordercolor,e.borderColor),y.borderAlpha=(0,u.pluck)(k.borderalpha,e.borderAlpha),y.labelPadding=k.labelpadding||e.labelPadding,y.options.tooltext=(0,u.pluck)(k.tooltext,e.tooltext),y.link=k.link,ae&&(D.shapeObj=v[ae.toLowerCase()]);for(I in p)p[I]||delete v[I];for(I in d)C[I]||delete d[I]}},_.getMarkerRadiusLimits=function(h,l,c,a){var n=he(h,l),o=.02,e=3.5,t=o*n,s=o*e*n,i,g;if(i=parseFloat(a),g=parseFloat(c),!isNaN(i)&&!isNaN(g))return i<g?{min:i,max:g}:{min:g,max:i};if(isNaN(i)){if(!isNaN(g))return{min:parseInt(g/10,10),max:g}}else return{min:i,max:10*i};return{min:t,max:s}},F.getDataLimits=function(){var h=this,l=h.config;return{min:l.min,max:l.max}},_._initializeMarkerItem=function(h,l,c){var a={},n=a.config,o;return n||(n=a.config={}),n.id=h,n.definition=l,n.application=c,n.hasValue=null,n.value=null,n.options=null,n.label=null,n.markerShape=null,n.markerLabel=null,n.drawOptions={shape:null,label:null},n.drawComplete=!1,o=a.config.options=(0,u.extend2)({},n.definition),n.dataEnabled?!isNaN(o.value)&&o.value!==""&&(a.value=parseFloat(o.value),a.hasValue=!0):(n.applyAll||c)&&(n.options=(0,u.extend2)(o,n.application)),a},F.configureConnectors=function(){var h=this,l=h.getFromEnv("chart"),c=h.getChildren("mapAnnotations")[0],a=l.jsonData,n=h.components,o=a.markers||{},e=o.connector||o.connectors||[],t=n.markerObjs,s=e.length,i=h.components.connectors,g=function(Pe){return function(xe){var Ie=this,Te=Ie.data("unfilteredConfig");Te.hoverEffect&&c.update(Ie.getId(),Te._hoverAttrs),l.fireChartInstanceEvent("connectorrollover",Pe,xe)}},v=function(Pe){return function(xe){var Ie=this,Te=Ie.data("unfilteredConfig");Te.hoverEffect&&c.update(Ie.getId(),Te._defaultAttrs),l.fireChartInstanceEvent("connectorrollout",Pe,xe)}},d=function(Pe){return function(xe){l.fireChartInstanceEvent("connectorClick",Pe,xe)}},p=l.config.connectorOpts,C={},k,y,S,I,D,G,ae,Y,ne,le,me,Le,be,ye,Ee;for(i=h.components.connectors=[],Ee=0;Ee<s;Ee++)ye=e[Ee],!(!ye.from&&!ye.to)&&(S=t[ye.from.toLowerCase()],I=t[ye.to.toLowerCase()],!(!S||!I)&&(D=e[Ee].label,C=i[Ee],!C&&(C=i[Ee]={}),!C.config&&(k=C.config={}),!C.graphics&&(C.graphics={}),k=C.config=(0,u.extend2)({},ye),k.fromMarker=S,k.toMarker=I,k.link=ye.link,k.showTooltip=(0,u.pluckNumber)(ye.showtooltip,p.showTooltip),G=k.tooltext=k.showTooltip?(0,u.pluck)(ye.tooltext,p.tooltext):de,ae=k.thickness=(0,u.pluck)(ye.thickness,p.thickness),Y=k.color=(0,u.pluck)(ye.color,p.color),ne=k.alpha=(0,u.pluck)(ye.alpha,p.alpha),k.hoverEffect=(0,u.pluckNumber)(ye.showhovereffect,p.showHoverEffect),le=(0,u.pluck)(ye.hovercolor,p.hoverColor,Y),me=(0,u.pluck)(ye.hoveralpha,p.hoverAlpha,ne),Le=(0,u.pluck)(ye.hoverthickness,p.hoverThickness,ae),k.dashed=(0,u.pluck)(ye.dashed,p.dashed),k.dashLen=(0,u.pluckNumber)(ye.dashlen,p.dashlen),k.dashGap=(0,u.pluckNumber)(ye.dashgap,p.dashgap),G&&(k.tooltext=G=(0,u.parseUnsafeString)((0,u.parseTooltext)(G,[3,40,41,42,43],{label:D,fromId:S.config.definition.id,toId:I.config.definition.id,fromLabel:S.config.definition.label,toLabel:I.config.definition.label},y),!1)),k.eventArgs={fromMarkerId:S.config.id,toMarkerId:I.config.id,label:D},k._hoverAttrs={color:le,alpha:me,thickness:Le},k._defaultAttrs={color:Y,alpha:ne,thickness:ae},k.type=P,k.onclick=d(k.eventArgs),k.onmouseover=g(k.eventArgs),k.onmouseout=v(k.eventArgs),D&&(be=C.labelConfig,!be&&(be=C.labelConfig={}),be.type=A,be.text=D,be.align=J,be.valign=Q,be.font=p.font,be.fillcolor=(0,u.pluck)(ye.labelcolor,p.fontColor),be.bgcolor=(0,u.pluck)(ye.labelbgcolor,p.labelBgColor),be.bordercolor=(0,u.pluck)(ye.labelbordercolor,p.labelBorderColor),be.tooltext=k.tooltext)))},F.draw=function(){var h=this,l=h.getFromEnv("chart"),c=h.config,a=h.getChildren("mapAnnotations")[0],n=h.components.markerObjs,o=l.config,e=o.markerOpts,t=o.scalingParams,s=l.config.annotationConfig,i=[],g=[],v,d,p,C,k,y,S,I,D={};a.destroy(),h.createContainer(),h._drawConnectors(),h.imageLoadCount=0,h.imageCount=0,c.autoScale=e.autoScale?t.sFactor:1;for(k in n)v=null,d=n[k],C=d.config,C.conIsHidden||(v=this._drawMarkerItem(d)),v&&(D[k]=v,C._annotationIndex=i.length,v.markerShape&&(p=Object.assign({align:"center",valign:"middle",animationLabel:"markerItem",autoscale:v.markerShape.type==="image"?0:1},v.markerShape),i.push(p)),v.markerLabel&&(p=Object.assign({animationLabel:"markerItem",id:v.markerShape.id},v.markerLabel),g.push(p)));I=a.addGroup(Object.assign(s,{id:"markers",fillalpha:"100",items:i,scaleimages:1}),h),S=a.addGroup(Object.assign(s,{id:"markerLabels",items:g,scaleimages:1}),h),h.components.markerGroup=I,h.components.markerLabelGroup=S,y=0;for(k in n)D[k]&&(d=n[k],d.markerShape=I.retrieveItem(i[y].id),d.markerShape.data("unfilteredConfig",i[y]),D[k].markerLabel&&(d.markerLabel=S.retrieveItem(i[y].id),d.markerLabel.data("unfilteredConfig",g[y])),y++);h.addJob("buildKdtree",h._buildKdTree.bind(h),ge.priorityList.kdTree)},F._buildKdTree=function(){var h=this,l=h.components.kdArrayMap,c=h.components.markerGroup,a=[],n,o,e=c&&c.items,t=e&&e.length||0;for(o=0;o<t;o++)n=e[o].config.id,l[n]&&a.push(l[n]);h.components.kDTree||(h.components.kDTree=new O.default(!0)),h.components.kDTree._setSearchLimit(1/0,1/0),h.components.kDTree.buildKdTree(a)},F._drawMarkerItem=function(h){var l=this,c=l.getFromEnv("chart"),a=c.config,n=l.config,o=a.scalingParams,e=h.config,t=e.options,s=e.definition,i=a.markerOpts,g=i.dataLabels.style,v=t.shapeid,d=t.scale||1,p=t.label||de,C=c.config.scalingParams.scaleFactor*c.config.baseScaleFactor,k=(t.labelpos||j).toLowerCase(),y=e.formattedValue===X?X:e.formattedValue,S=t.tooltext||i.tooltext,I=(0,u.pluckNumber)(s.radius,e.radius,i.radius)*d*n.autoScale||1e-4,D=e.fillColor,G=e.fillAlpha,ae=e.fillRatio,Y=e.fillAngle,ne=e.borderThickness,le=e.borderColor,me=e.borderAlpha,Le=l.getChildren("mapAnnotations")[0],be,ye,Ee,Re,Pe,xe,Ie,Te,we,_e,Se,Me,Ne,De,Be,Ve,tt,je,rt=l.components.kdArrayMap||(l.components.kdArrayMap={}),ot=h.config.id;if(e.autoScale=i.autoScale?C:1,!!v)return S?S=(0,u.parseUnsafeString)((0,u.parseTooltext)(S,[1,2,3],{formattedValue:y,label:p},t),!1):S=y?p+i.tooltipSepChar+y:p,y!==X&&y!==null?p=p+i.labelSepChar+y:isNaN(d)?d=1:d<0?d=0:d>5&&(d=5),(0,u.extend2)(t,{x:t.x&&t.x.toString(),y:t.y&&t.y.toString(),fillcolor:D,fillalpha:G,fillratio:ae,fillangle:Y,borderthickness:ne,bordercolor:le,borderalpha:me,hovereffect:(0,u.pluck)(i.showHoverEffect),radius:I&&I.toString(),link:t.link,showshadow:(0,u.pluckNumber)(t.showshadow,e.shadow),_markerLabel:p,_markerId:t.id,id:(t.id+de).toLowerCase()}),delete t.tooltext,e.tooltext=i.showTooltip?S:!1,Ne=Number(t.x)*o.sFactor+o.translateX,De=Number(t.y)*o.sFactor+o.translateY,I=t.radius,v==="triangle"?((0,u.extend2)(t,{type:"polygon",sides:3,startangle:i.startAngle}),je=R,tt=3):v==="diamond"?((0,u.extend2)(t,{type:"polygon",sides:4,startangle:i.startAngle}),je=R,tt=4):v==="arc"?(Ve=I*Z,(0,u.extend2)(t,{type:"arc",startangle:0,endangle:360,innerradius:Ve}),je=W):v==="circle"?(t.type=M,je=M):(Se=l.getShapeArgs.call(h),!i.dataEnabled||!i.valueToRadius||t.radius===X?(!Se.radius&&(Se.radius=i.radius),Se.radius*=d*e.autoScale):delete Se.radius,(0,u.extend2)(t,Se),t.id=t._markerId&&t._markerId.toLowerCase(),Ve=Se.innerradius,Se.radius&&(I=Se.radius),je=Se.type&&Se.type.toLowerCase(),tt=Se.sides,I=Number(I),I&&Ve&&I<Ve&&(Me=I,t.radius=I=Ve,t.innerradius=Ve=Me)),t.type=t.type&&t.type.toLowerCase(),(0,u.extend2)(t,{hoverfillcolor:(0,u.pluck)(t.fillhovercolor,i.hoverFillColor,t.fillcolor),hoverfillalpha:(0,u.pluck)(t.fillhoveralpha,i.hoverFillAlpha,t.fillalpha),hoverfillratio:(0,u.pluck)(t.fillhoverratio,i.hoverFillRatio,t.fillratio),hoverfillangle:(0,u.pluck)(t.fillhoverangle,i.hoverFillAngle,t.fillangle),hoverborderthickness:(0,u.pluckNumber)(t.borderhoverthickness,i.hoverBorderThickness,t.borderthickness),hoverbordercolor:(0,u.pluck)(t.borderhovercolor,i.hoverBorderColor,t.bordercolor),hoverborderalpha:(0,u.pluck)(t.borderhoveralpha,i.hoverBorderAlpha,t.borderalpha)}),t._hoverattrs={fillalpha:t.hoverfillalpha,fillcolor:t.hoverfillcolor,fillangle:t.hoverfillangle,fillratio:t.hoverfillratio,borderThickness:t.showborder!=="0"?t.hoverborderthickness:0,borderColor:t.hoverbordercolor,borderAlpha:t.hoverborderalpha},t._defaultattrs={fillalpha:t.fillalpha,fillcolor:t.fillcolor,fillangle:t.fillangle,fillratio:t.fillratio,borderThickness:t.showborder!=="0"?t.borderthickness:0,borderColor:t.bordercolor,borderAlpha:t.borderalpha},t.type==="image"?(t.borderthickness=t.borderthickness||0,t.onload=function(gt){var ht=this,at=gt.width,nt=gt.height;Be={},t=ht.config,Ne=(Number(t.derivedX)-at/(2*o.sFactor))*o.sFactor,De=(Number(t.derivedY)-nt/(2*o.sFactor))*o.sFactor,Be=rt[ot]||(rt[ot]={}),Be.x=Ne+o.translateX,Be.y=De+o.translateY,Be.element=h,Be.shapeInfo={type:"rect",width:at,height:nt},at&&nt&&Le.update(ht.getId(),{x:Ne,y:De,width:at,height:nt,autoscale:0}),l.imageLoadCount++,l.imageLoadCount===l.imageCount&&l._buildKdTree()},t.onerror=function(){l.imageLoadCount++,l.imageLoadCount===l.imageCount&&l._buildKdTree()},l.imageCount++):(Be=rt[ot]||(rt[ot]={}),Be.x=Ne,Be.y=De,Be.element=h,Be.shapeInfo={type:je,sides:tt,radius:Number(I)+t.borderthickness/2,innerradius:Ve}),e.drawOptions.shape=t,i.showLabels?(_e=t.labelpadding||i.labelPadding,be=l._getLabelOptions(k,_e,t),ye=be.align,Ee=be.valign,Re=e._labelBaseWidth,Pe=e._labelBaseHeight,xe=e._labelXOffset,Ie=e._labelYOffset,Te=i.labelWrapWidth?i.labelWrapWidth:l.getWrapWidth[ye](Re,Number(be.x)+xe),we=i.labelWrapHeight?i.labelWrapHeight:l.getWrapHeight[Ee](Pe,Number(be.y)+Ie),Te>_e&&(Te-=_e),we>_e&&(we-=_e),e.drawOptions.label=(0,u.extend2)({type:"text"},{text:p,tooltext:t.tooltext,x:be.x,y:be.y,align:ye,valign:be.valign,wrap:1,wrapwidth:Te,wrapheight:we,fontsize:g.fontSize/o.sFactor,font:g.fontFamily,color:e.fontColor,bgcolor:e.labelBgColor||de,bordercolor:e.labelBorderColor||de}),{markerShape:t,markerLabel:e.drawOptions.label}):{markerShape:t}},F.highlightPoint=function(h,l){var c=h.element,a=this,n=l.originalEvent,o=a.getFromEnv("chart"),e=a.getFromEnv("toolTipController"),t=a.config.currentToolTip,s=o.config.lastHoveredPoint;s&&s!==h&&(s&&a.hoverOutFn(s.element),o.config.lastHoveredPoint=null,e.hide(t)),h!==!1&&(l.type==="click"||l.type==="touchstart"?(o.config.lastHoveredPoint!==h&&a.hoverFn(c),a.clickFn(l,c)):l.type==="mousemove"&&o.config.lastHoveredPoint!==h&&a.hoverFn(c),c.config.tooltext&&(t?e.draw(n,c.config.tooltext,t):t=a.config.currentToolTip=e.draw(n,c.config.tooltext)),o.config.lastHoveredPoint=h)},F._drawConnectors=function(){var h=this,l=h.getFromEnv("chart"),c=l.config.annotationConfig,a=h.components,n=a.connectors||(h.components.connectors=[]),o,e,t=n.length,s=l.config.scalingParams,i=l.config.connectorOpts,g=i.showLabels,v=h.getChildren("mapAnnotations")[0],d,p,C=[],k=[],y,S,I,D,G,ae,Y,ne,le,me=[],Le={};for(me.push({id:"connectorLabels",fillalpha:"100",items:k}),me.push({id:"connectors",fillalpha:"100",items:C}),d=0;d<t;d++)n[d]&&(Le[d]=!0,G=n[d].config.fromMarker.config,ae=n[d].config.toMarker.config,y=G.options.x,S=G.options.y,I=ae.options.x,D=ae.options.y,n[d].config.x=y,n[d].config.y=S,n[d].config.tox=I,n[d].config.toy=D,le=Object.assign({animationLabel:"markerItem"},n[d].config),C.push(le),n[d].labelConfig&&g&&(n[d].labelConfig.x=((Number(y)+Number(I))/2).toString(),n[d].labelConfig.y=((Number(S)+Number(D))/2).toString(),n[d].labelConfig.fontsize=i.fontSize/(s.scaleFactor*l.config.baseScaleFactor),le=Object.assign({animationLabel:"markerItem"},n[d].labelConfig),k.push(le)));for(Y=v.addGroup(Object.assign(c,me[1]),h),ne=v.addGroup(Object.assign(c,me[0]),h),d=0,p=0;d<t;d++)Le[d]&&(o=Y.items[p],o&&(o.data("unfilteredConfig",C[p]),o.addEventListener("fc-mouseover",n[d].config.onmouseover),o.addEventListener("fc-mouseout",n[d].config.onmouseout),o.addEventListener("fc-click",n[d].config.onclick)),n[d].labelConfig&&g&&(e=ne.items[p],e&&e.data("unfilteredConfig")),p++)},F.getShapeArgs=function(){var h=this,l=h.config,c=(0,u.extend2)({},h.shapeObj),a;return l.autoScale=1,c?(c.type==="polygon"?c.sides<3?c.type=M:c.startangle=l.startAngle:c.type==="arc"&&(a=(c.radius||l.markerRadius)*l.autoScale,c.radius=a,c.innerradius=c.innerradius&&c.innerradius*l.autoScale||a*Z),c):null},F._getLabelOptions=function(h,l,c,a,n){var o=this,e,t,s,i=h&&h.toLowerCase();return o.getLabelAlignment[i]||(i=N),t=Number(c.x),s=Number(c.y),a===X||n===X?e=c.radius||0:e=/^(top|bottom)$/gi.test(i)&&n*.5||/^(left|right)$/gi.test(i)&&a*.5||0,e=Number(e)+Number(l),o.getLabelAlignment[i](t,s,e)},F.addMarkerItem=function(h){var l=this,c=l.getFromEnv("chart"),a=h,n,o=l.components.markerObjs,e=l.components.shapeObjs,t=l.components.markerGroup,s=l.components.markerLabelGroup,i,g=l.getChildren("mapAnnotations")[0],v=l.getFromEnv("number-formatter"),d=c.config.markerOpts,p,C,k,y,S,I;if(I=a.id.toLowerCase()){if(o[I])return;delete a.value,l.imageLoadCount=0,n=_._initializeMarkerItem(I,a,null),n.dataset=l,S=n.config.options.shapeid,C=n.config,y=a.value,C.cleanValue=v.getCleanValue(y),i=C.options,C.cleanValue!==null?C.formattedValue=v.dataLabels(y):C.formattedValue=X,C.fillColor=(0,u.pluck)(i.fillcolor,i.color,d.fillColor),C.fillAlpha=(0,u.pluck)(i.fillalpha,i.alpha,d.fillAlpha),C.fillRatio=(0,u.pluck)(i.fillratio,d.fillRatio),C.fillAngle=(0,u.pluck)(i.fillangle,d.fillAngle),C.borderThickness=(0,u.pluckNumber)(i.borderthickness,d.borderThickness),C.borderColor=(0,u.pluck)(i.bordercolor,d.borderColor),C.borderAlpha=(0,u.pluck)(i.borderalpha,d.borderAlpha),C.labelPadding=i.labelpadding||d.labelPadding,C.options.tooltext=(0,u.pluck)(i.tooltext,d.tooltext),C.link=i.link,S&&(n.shapeObj=e[S&&S.toLowerCase()]),o[I]=n,p=l._drawMarkerItem(n),t&&s&&(p.markerShape&&(k=Object.assign({align:"center",valign:"middle",animationLabel:"markerItem",autoscale:p.markerShape.type==="image"?0:1},p.markerShape),n.markerShape=g.addItem(t.getId(),k,l),n.markerShape.data("unfilteredConfig",k)),p.markerLabel&&(k=Object.assign({animationLabel:"markerItem"},p.markerLabel),n.markerLabel=g.addItem(s.getId(),k,l),n.markerLabel.data("unfilteredConfig",k))),l._buildKdTree()}},F.updateMarkerItem=function(h,l){var c=this,a=c.getFromEnv("chart"),n=c.getChildren("mapAnnotations")[0],o=c.components.markerObjs,e=a.config.markerOpts,t,s,i,g={},v=o[h],d;if(v){t=v.config.options,(0,u.extend2)(t,l),c.imageLoadCount=0,i=v.config;for(s in l)g[s.toLowerCase()]=l[s]&&l[s].toString();i.fillColor=(0,u.pluck)(g.fillcolor,g.color,e.fillColor),i.fillAlpha=(0,u.pluck)(g.fillalpha,g.alpha,e.fillAlpha),i.fillRatio=(0,u.pluck)(g.fillratio,e.fillRatio),i.fillAngle=(0,u.pluck)(g.fillangle,e.fillAngle),i.borderThickness=(0,u.pluckNumber)(g.borderthickness,e.borderThickness),i.borderColor=(0,u.pluck)(g.bordercolor,e.borderColor),i.borderAlpha=(0,u.pluck)(g.borderalpha,e.borderAlpha),i.labelPadding=g.labelpadding||e.labelPadding,i.options.tooltext=(0,u.pluck)(g.tooltext,e.tooltext),i.link=g.link,d=c._drawMarkerItem(v).markerShape,c._buildKdTree(),n.update(h,d)}},F.createContainer=function(){var h=this,l=h.getLinkedParent(),c=h.getFromEnv("animationManager"),a=l.getChildContainer("layer1");!h.getChildContainer("abovePlotGroup")&&h.addChildContainer("abovePlotGroup",c.setAnimation({el:"group",attr:{name:"abovePlotGroup",opacity:1},container:a,component:h,label:"group"})),!h.getChildContainer("belowPlotGroup")&&h.addChildContainer("belowPlotGroup",c.setAnimation({el:"group",attr:{name:"belowPlotGroup",opacity:1},container:a,component:h,label:"group"}))},F._removeMarkerItem=function(h){var l=this,c=l.components,a=c.markerObjs,n=a[h],o=c.kdArrayMap,e=l.getChildren("mapAnnotations")[0],t,s;n&&(t=n.markerShape,s=n.markerLabel,t&&e.destroy(t.getId()),s&&e.destroy(s.getId()),delete o[h],l._buildKdTree()),delete a[h]},F.getElement=function(h){var l=this;if(l.components.kDTree)return l.components.kDTree.getNeighbour(h)},_}(Fe.default),w=b;return Xe.default=w,Xe}var qe={},kt;function Wt(){if(kt)return qe;kt=1;var ke=Oe;qe.__esModule=!0,qe.default=void 0;var pe=ke(ze()),Fe=He(),O=Ge(),Ce=ut(),K=ke(dt()),B=function(X){X.configure&&X.configure()};(0,Ce.addDep)({name:"mapsAnimation",type:"animationRule",extension:K.default});var u=function(ge){(0,pe.default)(X,ge);function X(){return ge.apply(this,arguments)||this}var de=X.prototype;return de.getType=function(){return"group"},de.getName=function(){return"mapGroup"},de.configure=function(){var z=this;z._mapChildren(B)},de.createContainer=function(){var z=this,$=z.getLinkedParent(),ee=z.getFromEnv("animationManager"),Q,J=$.getChildContainer();Q=J.plotGroup,!z.getChildContainer("plotShadow")&&z.addChildContainer("plotShadow",ee.setAnimation({el:"group",attr:{name:"manager-plot-shadow",opacity:1},container:Q,component:z,label:"group"})),!z.getChildContainer("plot")&&z.addChildContainer("plot",ee.setAnimation({el:"group",attr:{name:"manager-plot",opacity:1},container:Q,component:z,label:"group"})),!z.getChildContainer("layer0")&&z.addChildContainer("layer0",ee.setAnimation({el:"group",attr:{name:"ann-layer0",opacity:1},container:J.abovePlotGroup,component:z,label:"group"})),!z.getChildContainer("layer1")&&z.addChildContainer("layer1",ee.setAnimation({el:"group",attr:{name:"ann-layer1",opacity:1},container:J.abovePlotGroup,component:z,label:"group"})),$.config.labelsOnTop?z.getChildContainer("layer0").toFront():z.getChildContainer("layer0").toBack()},de._transformGroup=function(){var z=this,$=this.getFromEnv("chart"),ee=$.getFromEnv("chartInstance"),Q=z.getFromEnv("animationManager"),J=$.jsonData,P=z.getChildContainer("plot"),A=z.getChildContainer("plotShadow"),R=$.config.scalingParams,W=function(){return function(N){N.detachHandler(),O.hasSVG&&(ee.args.link&&ee.args.clickedEntityBox&&J.chart.linkedcharttransition==="scale"?(P&&Q.setAnimation({el:P,attr:{transform:R.transformStr},component:z,label:"group"}),A&&Q.setAnimation({el:A,attr:{transform:R.transformStr},component:z,label:"group"})):(P&&Q.setAnimation({el:P,attr:{transform:R.transformStr},component:z,label:"group"}),A&&Q.setAnimation({el:A,attr:{transform:R.transformStr},component:z,label:"group"}))),P.show(),A.show()}};P.hide(),A.hide(),$.config.entitiesReady=!1,ee.addEventListener("internal.mapdrawingcomplete",W()),$.checkComplete()},de.draw=function(){this.createContainer(),this._transformGroup()},de.getDataLimits=function(z){var $=this,ee=1/0,Q=-1/0,J,P=0,A=function(W){Q=Math.max(Q,W.max),ee=Math.min(ee,W.min)};return $._mapChildren(function(R){if(R.getState("removed")||R.getState("visible")===!1){z&&(J=R.getDataLimits(z),A(J));return}P++,J=R.getDataLimits(z),A(J)}),P?$.setState("visible",!0):$.setState("visible",!1),this.config.range||(this.config.range={},this.config.range.min=this.config.dataMin,this.config.range.max=this.config.dataMax),{max:Q,min:ee}},X}(Fe.ComponentInterface),Ae=u;return qe.default=Ae,qe}var Ct;function Kt(){if(Ct)return it;Ct=1;var ke=Oe;it.__esModule=!0,it.default=K;var pe=Ge(),Fe=ke(Pt()),O=ke(jt()),Ce=ke(Wt());function K(B){var u,Ae=B.getFromEnv("dataSource"),ge=Ae.data||{},X=Ae.markers;(0,pe.componentFactory)(B,Ce.default,"mapGroup"),u=B.getChildren("mapGroup")[0],(0,pe.datasetFactory)(u,Fe.default,"entities",1,[ge]),X?(0,pe.datasetFactory)(u,O.default,"markers",1,[X]):B.getDatasets()[1]&&B.getDatasets()[1].remove()}return it}var st={},$e={},Ze={},yt;function Ut(){if(yt)return Ze;yt=1;var ke=Oe;Ze.__esModule=!0,Ze.default=void 0;var pe=ke(It()),Fe=ke(ze()),O=Ge(),Ce=He(),K=function(de,j){return+de.minvalue==+j.minvalue?de.maxvalue-j.maxvalue:de.minvalue-j.minvalue},B=function(de,j,z){var $=de[0],ee=de[1],Q=de[2],J=$+(j[0]-$)*z,P=ee+(j[1]-ee)*z,A=Q+(j[2]-Q)*z;return{hex:(O.COLOR_BLACK+(J<<16|P<<8|A).toString(16)).slice(-6),rgb:[J,P,A]}},u,Ae=function(X){(0,Fe.default)(de,X);function de(){var z;z=X.call(this)||this;var $=(0,pe.default)(z);return $.mapByCategory=!1,$.colorArr=[],$.noValidRange=!0,$.sortLegend=!1,z}var j=de.prototype;return j.__setDefaultConfig=function(){X.prototype.__setDefaultConfig.call(this),this.config.defaultObj={code:"CCCCCC",alpha:"100"}},j.getType=function(){return"colorComponent"},j.getName=function(){return"colorBucket"},j.configure=function($){if($){var ee=this,Q=ee.mapByCategory,J=$.numberFormatter,P=$.colorRange||{},A=(0,O.extend2)([],P.color),R=this.getLinkedParent(),W=Math.min(Math.max((0,O.pluckNumber)(ee.getFromEnv("dataSource").chart.palette,0)-1,0),4),M=R.defaultPaletteOptions&&R.defaultPaletteOptions.paletteColors[W],N=(0,O.pluckNumber)(J.getCleanValue(P.maxvalue),1/0),Z=(0,O.pluckNumber)(J.getCleanValue(P.minvalue),-1/0),te=ee.colorArr,he,ue,se,re,ce,ve,oe,fe,ie,q,U;if($.mapByCategory!==u&&(Q=ee.mapByCategory=!!Number($.mapByCategory)),Q?A=A.filter(function(H){return H.code||H.color}):A=A.filter(function(H){return H.minvalue||H.maxvalue}),A.forEach(function(H){H.minvalue&&H.maxvalue&&+H.maxvalue<+H.minvalue&&(fe=H.maxvalue,H.maxvalue=H.minvalue,H.minvalue=fe),H.minvalue?H.maxvalue?(q=J.getCleanValue(H.minvalue),ie=J.getCleanValue(H.maxvalue),H.rangeLabel=J.dataLabels(q)+"-"+J.dataLabels(ie)):(q=J.getCleanValue(H.minvalue),H.maxvalue=ie=N,H.rangeLabel=ie===1/0?">"+J.dataLabels(q):J.dataLabels(q)+"-"+J.dataLabels(ie)):(H.minvalue=q=Z,ie=J.getCleanValue(H.maxvalue),H.rangeLabel=q===-1/0?"<"+J.dataLabels(ie):J.dataLabels(q)+"-"+J.dataLabels(ie))}),A.sort(K),A&&(he=A.length)){for(te.length=0,ue=0;ue<he;ue+=1)oe=A[ue],se=(0,O.pluck)(oe.color,oe.code,M&&M[ue]),re=(0,O.pluck)(oe.alpha),ve=(0,O.pluck)(oe.bordercolor),ce=(0,O.pluck)(oe.borderalpha,100),ie=(0,O.pluckNumber)(oe.maxvalue),q=(0,O.pluckNumber)(oe.minvalue),U=(0,O.pluck)(oe.label,oe.displayvalue,oe.rangeLabel),(se&&ie>=q||Q&&U)&&te.push({code:se,alpha:re||"100",oriAlpha:re,maxvalue:ie,minvalue:q,label:(0,O.parseUnsafeString)(U),labelId:U.toLowerCase(),bordercolor:ve,borderAlpha:ce,name:oe.name,tllabelfont:oe.tllabelfont,tllabelfontsize:oe.tllabelfontsize,tllabelfontcolor:oe.tllabelfontcolor,trlabelfont:oe.trlabelfont,trlabelfontsize:oe.trlabelfontsize,trlabelfontcolor:oe.trlabelfontcolor,bllabelfont:oe.bllabelfont,bllabelfontsize:oe.bllabelfontsize,bllabelfontcolor:oe.bllabelfontcolor,brlabelfont:oe.brlabelfont,brlabelfontsize:oe.brlabelfontsize,brlabelfontcolor:oe.brlabelfontcolor});ee.sortedColorArr=ee.colorArr.slice(0)}else ee.noValidRange=!0,ee.colorArr=[],ee.sortedColorArr=[]}},j.getColorObj=function($){if($===u)return{outOfRange:!0};var ee=this,Q,J=ee.sortedColorArr,P=ee.gradient?1:0,A=J[P],R,W,M=$;if(ee.mapByCategory){for(M=(0,O.parseUnsafeString)(M).toLowerCase()||M.toString().toLowerCase();A;){if(A.labelId===M||A.maxvalue>=M&&A.minvalue<=M)return{code:A.code,alpha:A.alpha||"100",oriAlpha:A.oriAlpha,seriesIndex:P,legendItemId:A.legendItemId,tlLabelFont:A.tllabelfont,tlLabelFontSize:A.tllabelfontsize,tlLabelFontColor:A.tllabelfontcolor,trLabelFont:A.trlabelfont,trLabelFontSize:A.trlabelfontsize,trLabelFontColor:A.trlabelfontcolor,blLabelFont:A.bllabelfont,blLabelFontSize:A.bllabelfontsize,blLabelFontColor:A.bllabelfontcolor,brLabelFont:A.brlabelfont,brLabelFontSize:A.brlabelfontsize,brLabelFontColor:A.brlabelfontcolor};P+=1,A=J[P]}return{outOfRange:!0}}else if(ee.gradient){if(ee.scaleMin<=M&&ee.scaleMax>=M){for(;A&&A.maxvalue<M;)P+=1,A=J[P];return W=(M-A.minvalue)/A.range,{code:B(J[P-1].codeRGB,A.codeRGB,W).hex}}return{outOfRange:!0}}for(;A;){if(M<A.minvalue&&!Q&&(P===0?R={code:A.code,alpha:A.alpha||"100",oriAlpha:A.oriAlpha,seriesIndex:P,name:A.name,label:A.label,outOfRange:!0,bordercolor:A.bordercolor,borderalpha:A.borderAlpha}:R={code:J[P-1].code,alpha:J[P-1].alpha||"100",oriAlpha:J[P-1].oriAlpha,seriesIndex:P,name:J[P-1].name,label:J[P-1].label,outOfRange:!0,bordercolor:J[P-1].bordercolor,borderalpha:J[P-1].borderAlpha}),M>A.maxvalue&&P===J.length-1&&(R={code:A.code,alpha:A.alpha||"100",oriAlpha:A.oriAlpha,seriesIndex:P,name:A.name,label:A.label,outOfRange:!0,bordercolor:A.bordercolor,borderalpha:A.borderAlpha}),A.maxvalue>M&&A.minvalue<=M?R={code:A.code,alpha:A.alpha||"100",oriAlpha:A.oriAlpha,seriesIndex:P,name:A.name,label:A.label,bordercolor:A.bordercolor,borderalpha:A.borderAlpha}:M===A.maxvalue&&(Q={code:A.code,alpha:A.alpha||"100",oriAlpha:A.oriAlpha,seriesIndex:P,name:A.name,label:A.label,bordercolor:A.bordercolor,borderalpha:A.borderAlpha,tlLabelFont:A.tllabelfont,tlLabelFontSize:A.tllabelfontsize,tlLabelFontColor:A.tllabelfontcolor,trLabelFont:A.trlabelfont,trLabelFontSize:A.trlabelfontsize,trLabelFontColor:A.trlabelfontcolor,blLabelFont:A.bllabelfont,blLabelFontSize:A.bllabelfontsize,blLabelFontColor:A.bllabelfontcolor,brLabelFont:A.brlabelfont,brLabelFontSize:A.brlabelfontsize,brLabelFontColor:A.brlabelfontcolor}),P===J.length-1&&Q)return Q;if(R)return R.tlLabelFont=A.tllabelfont,R.tlLabelFontSize=A.tllabelfontsize,R.tlLabelFontColor=A.tllabelfontcolor,R.trLabelFont=A.trlabelfont,R.trLabelFontSize=A.trlabelfontsize,R.trLabelFontColor=A.trlabelfontcolor,R.blLabelFont=A.bllabelfont,R.blLabelFontSize=A.bllabelfontsize,R.blLabelFontColor=A.bllabelfontcolor,R.brLabelFont=A.brlabelfont,R.brLabelFontSize=A.brlabelfontsize,R.brLabelFontColor=A.brlabelfontcolor,R;P+=1,A=J[P]}if(!J.length)return{outOfRange:!0}},j.getColorRangeArr=function($,ee){var Q,J,P,A,R,W,M=[],N,Z,te=$,he=ee;if(!this.defaultAsigned&&(te>he&&(Q=te,te=he,he=Q),te<he&&(A=this.getColorObj(te),W=this.getColorObj(he),A&&W))){for(R=te,J=A.seriesIndex,P=W.seriesIndex;J<=P;J+=1)N=(0,O.extend2)({},this.colorArr[J]),N.minvalue!==R&&(N.minvalue=R),M.push(N),Z=N,R=N.maxvalue;Z&&(Z.maxvalue=he)}return M},de}(Ce.ComponentInterface),ge=Ae;return Ze.default=ge,Ze}var Qe={},xt;function Xt(){if(xt)return Qe;xt=1;var ke=Oe;Qe.__esModule=!0,Qe.default=void 0;var pe=ke(ze()),Fe=He(),O=Ge(),Ce=",",K=function(ge,X,de){var j=ge.value,z=(0,O.HEXtoRGB)(ge.code),$=(0,O.HEXtoRGB)(X.code),ee;return ee=X.value-j,(0,O.RGBtoHex)([Math.round(z[0]+($[0]-z[0])/ee*(de-j)),Math.round(z[1]+($[1]-z[1])/ee*(de-j)),Math.round(z[2]+($[2]-z[2])/ee*(de-j))])},B=function(Ae){(0,pe.default)(ge,Ae);function ge(){var de;return de=Ae.call(this)||this,de.colorRange={},de.valueRatio={},de.data={},de.mapByPercent=O.UNDEF,de}var X=ge.prototype;return X.getType=function(){return"colorComponent"},X.getName=function(){return"gradientColorRange"},X.configure=function(j){if(j){var z=this,$,ee,Q;for(z.data=j,z.appender=O.BLANKSTRING,Q=z.colorRange=j.colorRange.sort(function(P,A){return P.value-A.value}),z.valueRatio=O.UNDEF,z.values=[],$=0,ee=Q.length;$<ee;$++)z.values.push(Q[$].value)}},X.getValueRatio=function(){var j=this.colorRange,z,$,ee=j.length,Q=this.valueRatio,J=j[ee-1].value,P=j[0].value,A=J-P,R,W=0;if(Q)return Q;for(Q=this.valueRatio=[],$=0;$<ee;$++)z=j[$],R=(z.value-P)/A,Q.push((R-W)*100),W=R;return Q},X.getCumulativeValueRatio=function(){var j=this.colorRange,z,$,ee=j.length,Q=j[0].value,J=j[ee-1].value,P=[];for($=0;$<ee;$++)z=j[$],P.push((z.value-Q)/(J-Q)*100);return P},X.getBoxFill=function(j){var z=this.colorRange,$,ee,Q=z.length,J=[],P;for(P=j?90:0,ee=0;ee<Q;ee++)$=z[ee],J.push($.code);return(0,O.toRaphaelColor)({FCcolor:{alpha:"100,100,100",angle:P,color:J.join(Ce),ratio:this.getValueRatio().join(Ce)}})},X.getColorByValue=function(j){var z=this.values,$=this.colorRange,ee,Q,J,P;if(!(j===O.UNDEF||j===null)){for(Q=0,ee=z.length;Q<ee;Q++)if(j===z[Q]){P=$[Q].code;break}else if(!Q&&j<z[Q]){J=!0;break}else if(Q===ee-1&&j>z[Q]){J=!0;break}else if(j>z[Q]&&j<z[Q+1]){P=K($[Q],$[Q+1],j);break}if(!J)return P}},X.getLabelByValue=function(j){var z=this.values,$=this.colorRange,ee,Q,J,P;if(!(j===O.UNDEF||j===null)){for(Q=0,ee=z.length;Q<ee;Q++)if(j===z[Q]){P=$[Q].label;break}else if(!Q&&j<z[Q]){J=!0;break}else if(Q===ee-1&&j>z[Q]){J=!0;break}else if(j>z[Q]&&j<z[Q+1]){P=$[Q].label;break}if(!J)return P}},ge}(Fe.ComponentInterface),u=B;return Qe.default=u,Qe}var Ft;function Yt(){if(Ft)return $e;Ft=1;var ke=Oe;$e.__esModule=!0,$e.default=void 0;var pe=ke(ze()),Fe=He(),O=ke(Ut()),Ce=ke(Xt()),K=Ge(),B="gradient",u="icon",Ae="none";function ge(P){return(0,K.getLightColor)(P,1)}function X(P){var A=P||$;return(0,K.getValidColor)(A)||$}var de="rgba(192,192,192,"+(K.isIE?.002:1e-6)+")",j,z="%",$="#000000",ee=function(){var P,A={};A.legendCarpetConf={spreadFactor:.85,allowDrag:!1,captionAlignment:"center",padding:{v:3,h:3},style:{fill:"#e4d9c1",stroke:"#c4b89d"}},A.legendCaptionConf={spreadFactor:.2,padding:{v:2,h:2},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"bold",fontStyle:"normal"},bound:{style:{stroke:"none"}}},A.legendBodyConf={spreadFactor:.8,padding:{v:2,h:2},bound:{style:{stroke:"none"}}},A.legendAxisConf={legendAxisHeight:11,spreadFactor:.4,padding:{v:1,h:1},style:{stroke:"none","stroke-opacity":0,"stroke-width":1},line:{grooveLength:3,offset:8,style:{stroke:"rgba(255, 255, 255, 0.65)","stroke-width":1.5}},shadow:{style:{stroke:"none",fill:(0,K.toRaphaelColor)({FCcolor:{alpha:"25,0,0",angle:360,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}},bound:{style:{stroke:"none"}}},A.sliderGroupConf={showTooltip:1,outerCircle:{rFactor:1.4,style:{fill:de,stroke:"#757575","stroke-width":3}},innerCircle:{rFactor:.65,style:{fill:de,stroke:"#FFFFFF"}}},A.axisTextItemConf={spreadFactor:.3,padding:{v:1,h:1},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"normal",fontStyle:"normal"}};function R(W){var M=P.getFromEnv("number-formatter"),N,Z,te;for(N=0,Z=W.length;N<Z;N++)te=W[N].maxvalue,te&&(W[N].maxvalue=M.getCleanValue(te))}return{init:function(M){P=M.chart},legacyDataParser:function(M,N){var Z={},te=P.getFromEnv("number-formatter"),he=P.getFromEnv("dataSource"),ue=he.data,se,re,ce,ve,oe,fe,ie,q,U,H,V,E,m=N||{};if(!M)return!1;for(P.defaultDatasetType==="maps"&&(m.min===j||m.max===j)?(m={min:1/0,max:-1/0},ue&&ue.forEach(function(x){m.min=Math.min(m.min,(0,K.pluckNumber)(x.value,m.min)),m.max=Math.max(m.max,(0,K.pluckNumber)(x.value,m.min))})):P.getName()==="HeatMap"&&(m.min===j||m.max===j)&&(m={min:1/0,max:-1/0},he.dataset.forEach(function(x){x.data&&x.data.forEach(function(f){m.min=Math.min(m.min,(0,K.pluckNumber)(f.value,m.min)),m.max=Math.max(m.max,(0,K.pluckNumber)(f.value,m.max))})})),Z.mapByPercent=V=!!(0,K.pluckNumber)(M.mapbypercent,0),se=M.color||[],M.minvalue===j&&(M.minvalue=m.min!==j?V?0:m.min:0),M.maxvalue===j&&(M.maxvalue=m.max!==j?V?100:m.max:100),(M.maxvalue===M.minvalue||m.min===1/0||m.max===-1/0)&&(M.minvalue=0,M.maxvalue=100),E=!1,oe=0,ie=se.length;oe<ie;oe++)if(se[oe].maxvalue){E=!0;break}for(E||(se=[]),ce=M.code,q=Z.colorRange=[],Z.gradient=!!(0,K.pluckNumber)(M.gradient,1),se.length?ce=X(ce):(ce?(ve=X(ce),ce=X()):(ce=X(),ve=ge(ce)),se.push({code:ve,maxvalue:M.maxvalue,label:j})),R(se),se=se.sort(function(f,r){return f.maxvalue-r.maxvalue}),U=H=M.minvalue&&te.getCleanValue(M.minvalue),H=(U!==j||U!==null)&&(V?U+z:te.legendValue(U)),q.push({code:(0,K.dehashify)(ce),value:U,displayValue:H,label:M.startlabel}),oe=0,ie=se.length;oe<ie;oe++)re=se[oe],fe=X(re.code||re.color),U=H=re.maxvalue,!isNaN(parseInt(U,10))&&(H=(U!==j||U!==null)&&(V?U+z:te.legendValue(U)),q.push({code:(0,K.dehashify)(fe),value:U,displayValue:H,label:re.label||re.displayvalue}));return q[q.length-1].label=M.endlabel||re.label,Z},getDefaultConf:function(M){return A[M]}}}(),Q=function(P){(0,pe.default)(A,P);function A(){var W;return W=P.call(this)||this,W.datasource={},W.config.legendItemIds=[],W}var R=A.prototype;return R.configure=function(){var M=this,N=this.getFromEnv("chart"),Z,te,he=this.getFromEnv("dataSource").chart.mapbycategory,ue,se=N.config.showLegend,re=N.getChildren("colorRange")&&N.getChildren("colorRange")[0];switch(N.addToEnv("colorManager",M),M.datasource=N.getFromEnv("dataSource"),Z=M.datasource.colorrange,re&&re.remove({instant:!0}),se||(M.config.legendItemIds=[]),N.defaultDatasetType==="maps"?Z.gradient&&Number(Z.gradient)?te=B:Z.color?te=u:te=Ae:N.getName()==="TreeMap"||Z.gradient&&Z.gradient!=="0"&&!Number(he)?te=B:te=u,te){case B:ee.init({chart:N}),ue=ee.legacyDataParser(Z),(0,K.componentFactory)(N,Ce.default,"colorRange",1,[ue]),re=N.getChildren("colorRange")[0],N.addToEnv("colorRange",re),ue||(re._dontPlot=!0),M.config.legendItemIds=[],M._configureGradientLegend(re);break;case"icon":(0,K.componentFactory)(N,O.default,"colorRange",1,[{colorRange:Z,sortLegend:0,mapByCategory:(0,K.pluckNumber)(he,0),defaultColor:"cccccc",numberFormatter:N.getFromEnv("number-formatter")}]),N.addToEnv("colorRange",N.getChildren("colorRange")[0]),se&&M._addLegendItems();break;case"none":N.deleteFromEnv("colorManager"),M.config.legendItemIds=[]}},R._configureGradientLegend=function(M){var N=this,Z=N.getFromEnv("chart").getFromEnv("gLegend");Z&&(Z.setColorRange(M),N.addExtEventListener("rangeUpdated",function(te,he){N.fireEvent("legendUpdate",{"original-event":te,maxMinArray:he,component:"gradientlegend"})},Z))},R._addLegendItems=function(){var M=this,N=M.config,Z=M.getFromEnv("chart"),te=Z.getChildren("legend")[0],he=Z.getFromEnv("colorRange").colorArr,ue,se,re=he.length,ce,ve,oe;for(ve=0;ve<re;ve++)oe={label:(0,K.pluck)(he[ve].label,he[ve].displayvalue),datasetObj:he[ve],index:ve},se=(0,K.getLightColor)(he[ve].code,40),ue={FCcolor:{color:he[ve].code+","+he[ve].code+","+se,ratio:"0,70,30",angle:270,alpha:"100,100,100"}},ce=te.getItem(N.legendItemIds[ve]),ce||(N.legendItemIds.push(te.createItem(M)),ce=te.getItem(N.legendItemIds[ve]),ce.addEventListener("fc-click",ce.itemClickFn)),ce.removeLegendState("hidden"),he[ve].legendItemId=ce&&ce.getId(),ce.configure(oe),ce.setStateCosmetics("default",{symbol:{fill:(0,K.toRaphaelColor)(ue),rawFillColor:he[ve].code}});for(ve=re;ve<N.legendItemIds.length;ve++)te.disposeItem(N.legendItemIds[ve]);N.legendItemIds.splice(re)},R.legendInteractivity=function(M){var N=this,Z=N.getFromEnv("colorRange").colorArr[M.config.index];N.fireEvent("legendUpdate",{legendItem:M,colorObj:Z,component:"legend"})},R.getColor=function(M){var N=this;return!Number(N.datasource.chart.mapbycategory)&&Number(N.datasource.colorrange.gradient)?{code:N.getColorByValue(M),label:N.getLabelByValue(M)}:N.getColorObj(M)},R.getValueRatio=function(){return this.getFromEnv("colorRange").getValueRatio()},R.getCumulativeValueRatio=function(){return this.getFromEnv("colorRange").getCumulativeValueRatio()},R.getBoxFill=function(M){return this.getFromEnv("colorRange").getBoxFill(M)},R.getColorByValue=function(M){return this.getFromEnv("colorRange").getColorByValue(M)},R.getColorObj=function(M){return this.getFromEnv("colorRange").getColorObj(M)},R.getLabelByValue=function(M){return this.getFromEnv("colorRange").getLabelByValue(M)},A}(Fe.ComponentInterface),J=Q;return $e.default=J,$e}var Lt;function qt(){if(Lt)return st;Lt=1;var ke=Oe;st.__esModule=!0,st.default=O;var pe=ke(Yt());function Fe(Ce){var K=Ce.getChildren("colorManager");if(!Ce.getFromEnv("dataSource").colorrange){K&&(K[0].config.legendItemIds=[]),Ce.deleteFromEnv("colorManager");return}if(K){Ce.addToEnv("colorManager",K[0]),K[0].configure();return}K=new pe.default,Ce.attachChild(K,"colorManager"),Ce.addToEnv("colorManager",K),K.configure()}function O(Ce){Fe(Ce)}return st}var ct={},Je={},At;function $t(){if(At)return Je;At=1;var ke=Oe;Je.__esModule=!0,Je.default=void 0;var pe=ke(It()),Fe=ke(ze()),O=Ge(),Ce=He(),K,B={},u="rgba(192,192,192,"+(O.isIE?.002:1e-6)+")",Ae,ge=!1,X=!0,de="%",j=",",z="#000000",$="canvasWidth",ee="canvasLeft",Q="canvasHeight",J="canvasTop",P="vertical",A="absolute",R="top",W="bottom",M="left",N="right",Z="GL_CARPET",te="GL_CAPTION",he="GL_BODY",ue="GL_LABELS",se="FL_AXIS",re="GL_SG1",ce="GL_VALUES",ve="fc-gradient-legend",oe={}.hasOwnProperty,fe="M",ie="L",q;function U(c,a){return function n(o,e){var t,s;for(s in o)oe.call(o,s)&&(t=o[s],e[s]===K?e[s]=t:typeof t=="object"&&t!==null&&n(t,e[s]))}(c,a),a}function H(c){var a=c||z;return(0,O.getValidColor)(a)||z}function V(c){return(0,O.getLightColor)(c,1)}function E(c){var a=c.fontSize+"",n;return a&&(n=a.replace(/(\d+)(px)*/,"$1px"),c.fontSize=n),c}function m(c){return!!(c===K||typeof c>"u"||c===null||isNaN(c))}B.CAPTION="CAPTION",B.LEGEND_BODY="LEGEND_BODY",B.AXIS_LABEL="LEGEND_LABEL",B.LEGEND_AXIS="LEGEND_AXIS",B.RANGE="RANGE",B.AXIS_VALUE="AXIS_VALUE",Ae=function(){var c,a={};a.legendCarpetConf={spreadFactor:.85,allowDrag:!1,captionAlignment:"center",padding:{v:3,h:3},style:{fill:"#e4d9c1",stroke:"#c4b89d"}},a.legendCaptionConf={spreadFactor:.2,padding:{v:2,h:2},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"bold",fontStyle:"normal"},bound:{style:{stroke:"none"}}},a.legendBodyConf={spreadFactor:.8,padding:{v:2,h:2},bound:{style:{stroke:"none"}}},a.legendAxisConf={legendAxisHeight:11,spreadFactor:.4,padding:{v:1,h:1},style:{stroke:"none","stroke-opacity":0,"stroke-width":1},line:{grooveLength:3,offset:8,style:{stroke:"rgba(255, 255, 255, 0.65)","stroke-width":1.5}},shadow:{style:{stroke:"none",fill:(0,O.toRaphaelColor)({FCcolor:{alpha:"25,0,0",angle:360,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}},bound:{style:{stroke:"none"}}},a.sliderGroupConf={showTooltip:1,outerCircle:{rFactor:1.4,style:{fill:u,stroke:"#757575","stroke-width":3}},innerCircle:{rFactor:.65,style:{fill:u,stroke:"#FFFFFF"}}},a.axisTextItemConf={spreadFactor:.3,padding:{v:1,h:1},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"normal",fontStyle:"normal"}};function n(o){var e=c.getFromEnv("number-formatter"),t,s,i;for(t=0,s=o.length;t<s;t++)i=o[t].maxvalue,i&&(o[t].maxvalue=e.getCleanValue(i))}return{init:function(e){c=e.chart},legacyDataParser:function(e,t){var s={},i=c.getFromEnv("number-formatter"),g,v,d,p,C,k,y,S,I,D,G,ae;if(!e)return!1;for(s.mapByPercent=G=!!(0,O.pluckNumber)(e.mapbypercent,0),g=e.color||[],e.minvalue===K&&(e.minvalue=t.min!==K?G?0:t.min:0),e.maxvalue===K&&(e.maxvalue=t.max!==K?G?100:t.max:100),ae=!1,C=0,y=g.length;C<y;C++)if(g[C].maxvalue){ae=!0;break}for(ae||(g=[]),d=e.code,S=s.colorRange=[],s.gradient=!!(0,O.pluckNumber)(e.gradient,1),g.length?d=H(d):(d?(p=H(d),d=H()):(d=H(),p=V(d)),g.push({code:p,maxvalue:e.maxvalue,label:K})),n(g),g=g.sort(function(Y,ne){return Y.maxvalue-ne.maxvalue}),I=D=e.minvalue&&i.getCleanValue(e.minvalue),D=(I!==K||I!==null)&&(G?I+de:i.legendValue(I)),S.push({code:(0,O.dehashify)(d),value:I,displayValue:D,label:e.startlabel}),C=0,y=g.length;C<y;C++)v=g[C],k=H(v.code||v.color),I=D=v.maxvalue,!isNaN(parseInt(I,10))&&(D=(I!==K||I!==null)&&(G?I+de:i.legendValue(I)),S.push({code:(0,O.dehashify)(k),value:I,displayValue:D,label:(0,O.parseUnsafeString)(v.label||v.displayvalue)}));return S[S.length-1].label=(0,O.parseUnsafeString)(e.endlabel||v.label),s},getDefaultConf:function(e){return a[e]}}}();var x=function(c){(0,Fe.default)(n,c);var a=n.prototype;a.getType=function(){return"gradientLegend"},a.getName=function(){return"gLegend"};function n(){var o;return o=c.call(this)||this,q=(0,pe.default)(o),o.enabled=!1,o.drawOptions={},o.components={},o}return a.setColorRange=function(e){var t=this.drawOptions.colorRange=e;t&&t._preparationGoneWrong&&(this._dontPlot=!0)},a.configureAttributes=function(){var e=this,t=e.getFromEnv("chart"),s=e.getFromEnv("dataSource").chart,i=e.conf={},g=s.outcnvbasefont,v=this.computeFontSize(s.outcnvbasefontsize),d=s.outcnvbasefontcolor,p=t.config.dataLabelStyle,C,k,y,S,I,D,G,ae,Y,ne,le,me;Ae.init({chart:t}),e.data=e.getFromEnv("dataSource").colorrange,!e._dontPlot&&(e.drawOptions={smartLabel:e.getFromEnv("smartLabel"),gLegend:e},e._dontPlot=!1,e._recalculateLogicalSpace=!0,i.caption=(0,O.parseUnsafeString)((0,O.pluck)(s.legendcaption)),i.legendPosition=(0,O.pluck)(s.legendposition,"bottom").toLowerCase(),i.legendXPosition=(0,O.pluckNumber)(s.legendxposition,0),i.legendYPosition=(0,O.pluckNumber)(s.legendyposition,0),i.legendMaxHeight=(0,O.pluckNumber)(s.legendmaxheight,0),i.legendMaxWidth=(0,O.pluckNumber)(s.legendmaxwidth,0),i.legendVertical=typeof s.legendorientation=="string"&&s.legendorientation.toLowerCase()===P,i.showLegend=(0,O.pluckNumber)(s.showlegend,1),i.interactiveLegend=(0,O.pluckNumber)(s.interactivelegend,1),i.showLegendLabels=(0,O.pluckNumber)(s.showlegendlabels,1),C=s.legenditemfontcolor||d,k=s.legenditemfont||g,y=s.legenditemfontsize||v,S=(0,O.pluckFontSizeMaintainUnit)(s.legenditemfontsize,s.outcnvbasefontsize),I=(0,O.pluckNumber)(s.legenditemfontbold,0),D=s.legendcaptionfontcolor||d,G=s.legendcaptionfont||g,ae=s.legendcaptionfontsize||v,Y=(0,O.pluckFontSizeMaintainUnit)(s.legendcaptionfontsize,s.outcnvbasefontsize),ne=(0,O.pluckNumber)(s.legendcaptionfontbold,1),le=s.legendaxisbordercolor?(0,O.hashify)((0,O.dehashify)(s.legendaxisbordercolor)):K,me=le?(0,O.pluckNumber)(s.legendaxisborderalpha,100)/100:K,i.axisTextItemConf={style:{fill:C?(0,O.convertColor)((0,O.pluck)(C)):p.color,fontFamily:k?(0,O.pluck)(k):p.fontFamily,fontSize:y?(0,O.pluckNumber)(y):p.fontSize.match(/\d+/)[0],fontSizeWithUnit:(0,O.pluckFontSizeMaintainUnit)(S,p.fontSize.match(/\d+/)[0]),fontWeight:I?"bold":p.fontWeight}},i.legendCaptionConf={style:{fill:D?(0,O.convertColor)((0,O.pluck)(D)):p.color,fontFamily:G?(0,O.pluck)(G):p.fontFamily,fontSize:ae?(0,O.pluckNumber)(ae):p.fontSize.match(/\d+/)[0],fontSizeWithUnit:(0,O.pluckFontSizeMaintainUnit)(Y,p.fontSize.match(/\d+/)[0]),fontWeight:ne?"bold":p.fontWeight,fontStyle:"normal"}},i.legendAxisConf={legendAxisHeight:11,style:{stroke:le,"stroke-opacity":me},line:{style:{stroke:(0,O.convertColor)((0,O.pluck)(s.legendscalelinecolor,"FFF8E9"),(0,O.pluckNumber)(s.legendscalelinealpha,100)),"stroke-width":(0,O.pluckNumber)(s.legendscalelinethickness)}}},i.sliderGroupConf={showTooltip:(0,O.pluckNumber)(s.showtooltip,1),outerCircle:{rFactor:(0,O.pluckNumber)(s.sliderdiameterfactor),style:{stroke:(0,O.convertColor)((0,O.pluck)(s.legendpointerbordercolor,"757575"),(0,O.pluckNumber)(s.legendpointerborderalpha,100))}},innerCircle:{rFactor:(0,O.pluckNumber)(s.sliderholediameterfactor),style:{stroke:(0,O.convertColor)((0,O.pluck)(s.legendpointercolor,"FFFFFF"),(0,O.pluckNumber)(s.legendpointeralpha,100))}}},i.legendCarpetConf={spreadFactor:(0,O.pluckNumber)(s.legendspreadfactor),allowDrag:!!(0,O.pluckNumber)(s.legendallowdrag,0),captionAlignment:(0,O.pluck)(s.legendcaptionalignment,"center"),style:{fill:(0,O.convertColor)((0,O.pluck)(s.legendbgcolor,"e4d9c1"),(0,O.pluckNumber)(s.legendbgalpha,100)),stroke:(0,O.convertColor)((0,O.pluck)(s.legendbordercolor,"c4b89d"),(0,O.pluckNumber)(s.legendborderalpha,100)),"stroke-width":(0,O.pluckNumber)(s.legendborderthickness,1)}})},a.postConfigureInit=function(){var e=this,t=e.conf,s,i,g,v,d,p,C,k,y,S,I,D=t.legendPosition?t.legendPosition.split("-"):[],G;e.elem={},t.interactiveLegend?(d=U(Ae.getDefaultConf("sliderGroupConf"),t.sliderGroupConf),this.sGroup?(v=e.elem.sGroup=this.sGroup,v.configure(d),e.elem.sGroup.gLegend=e):(this.sGroup=e.elem.sGroup=v=new L(d),v.configure(d),e.elem.sGroup.gLegend=e)):(this.sGroup&&this.sGroup.dispose(),this.sGroup&&delete this.sGroup),d=U(Ae.getDefaultConf("legendCarpetConf"),t.legendCarpetConf),d.legendPosition=D[0]===A&&!t.legendVertical||D[0]===R||D[0]===W?W:N,G=Ae.getDefaultConf("legendBodyConf"),D[0]===A&&!t.legendVertical||D[0]===R||D[0]===W?(e.drawOptions.refSideKey=$,e.drawOptions.refOffsetKey=ee,p=U(Ae.getDefaultConf("axisTextItemConf"),t.axisTextItemConf),G.legendPosition=W,I=U(Ae.getDefaultConf("legendAxisConf"),t.legendAxisConf),I.legendPosition=W,p.legendPosition=W):(e.drawOptions.refSideKey=Q,e.drawOptions.refOffsetKey=J,p=U(Ae.getDefaultConf("axisTextItemConf"),t.axisTextItemConf),G.legendPosition=N,I=U(Ae.getDefaultConf("legendAxisConf"),t.legendAxisConf),I.legendPosition=N,p.legendPosition=N),Object.keys(this.components).length||(this.components.LegendCarpet=new r,this.components.LegendBody=new w,this.components.LegendAxis=new _,this.components.LegendValues=new h,t.showLegendLabels&&(this.components.LegendLabels=new T)),g=this.components.LegendAxis,y=this.components.LegendValues,i=this.components.LegendCarpet,C=this.components.LegendBody,t.showLegendLabels&&(k=this.components.LegendLabels),this.components.LegendCarpet.configure(d),this.components.LegendValues.configure(p),this.components.LegendAxis.configure(I),this.components.LegendBody.configure(e.drawOptions.colorRange,G,p),t.showLegendLabels&&k.configure(p),t.caption?(S=U(Ae.getDefaultConf("legendCaptionConf"),t.legendCaptionConf),this.componentCaption&&Object.keys(this.componentCaption).length?this.componentCaption.configure(t.caption,S):(s=this.componentCaption=new b,s.configure(t.caption,S)),i.addCompositions(this.componentCaption,B.CAPTION)):(i.removeCompositions(B.CAPTION),this.componentCaption&&this.componentCaption.dispose(),delete this.componentCaption),v&&g.addCompositions(v,B.RANGE),k&&C.addCompositions(k,B.AXIS_LABEL),C.addCompositions(g,B.LEGEND_AXIS),C.addCompositions(y,B.AXIS_VALUE),i.addCompositions(C,B.LEGEND_BODY),e.elem.gl=new f(i)},a.getValueRange=function(){var e=this,t=e.elem&&e.elem.sGroup,s=t.sliders,i=t.extremes,g,v;return g=s.false.currPos,v=i[1]-i[0]+s.true.currPos,[{min:t.getValueFormPixel(g),max:t.getValueFormPixel(v)}]},a._dispose=function(){var e=this;e.elem&&e.elem.gl&&e.elem.gl.dispose(),e.elem={},c.prototype._dispose.call(this)},a.getCalculatedLogicalSpace=function(){return this._logicalArea},a.setCalculatedLogicalSpace=function(e){this._logicalArea=e},a.getLogicalSpace=function(e){var t=this,s=t.conf,i={height:0,width:0},g,v=t.drawOptions,d,p=t.getFromEnv("chartConfig"),C,k=s.legendPosition.split("-")[0]===A,y,S;return t._recalculateLogicalSpace?t._dontPlot||(t._recalculateLogicalSpace=!1,t.postConfigureInit(),!s.showLegend)?i:(d=v.refSideKey,C=v.refOffsetKey,t.drawOptions.refSide=p[d],t.drawOptions.refOffset=p[C],t.drawOptions.maxOtherSide=e||t.drawOptions.maxOtherSide,t.elem.gl&&(g=t.elem.gl.getLogicalSpace(t.drawOptions,!0),t.elem.gl&&t.setCalculatedLogicalSpace(g)),t.getCalculatedLogicalSpace()):(d=v.refSideKey,C=v.refOffsetKey,t.drawOptions.refSide=p[d],k?(s.legendMaxHeight<=0?y=p.height*.8:s.legendMaxHeight<=p.height?y=s.legendMaxHeight:y=p.height,s.legendMaxWidth<=0?S=p.width*.8:s.legendMaxWidth<=p.width?S=s.legendMaxWidth:S=p.width,s.legendVertical?(t.drawOptions.refSide=y,t.drawOptions.maxOtherSide=S):(t.drawOptions.refSide=S,t.drawOptions.maxOtherSide=y)):(t.drawOptions.refOffset=p[C],t.drawOptions.maxOtherSide=e||t.drawOptions.maxOtherSide),g=t.elem.gl.getLogicalSpace(t.drawOptions,!0),t.setCalculatedLogicalSpace(g),t.getCalculatedLogicalSpace()||i)},a.resetLegend=function(){var e=this,t;t=e.elem&&e.elem.sGroup,t&&t.reset()},a._calculateTopPosition=function(e){var t=this,s=t.getFromEnv("chart"),i=s.config,g=e,v=s.getChildren("caption")&&s.getChildren("caption")[0],d=s.getChildren("subCaption")&&s.getChildren("subCaption")[0],p=s.getChildren("chartMenuBar")&&s.getChildren("chartMenuBar")[0],C=i.oriTopSpace;return!i.toolbarY&&p&&p.props&&p.props.height&&(C>p.props.height+p.props.y||(g=p.props.y+p.props.height)),v&&v.config&&v.config.text&&v.config.text!==O.BLANKSTRING&&v.config.height&&v.config.isOnTop===1&&(g=v.config.height+v.config.y+v.config.captionPadding),d&&d.config&&d.config.height&&d.config.isOnTop===1&&(g=d.config.y+d.config.height+(v&&v.config&&v.config.captionPadding||0)),g>e?g:e},a.allocatePosition=function(){var e=this.getFromEnv("chart"),t=e.config,s=this,i=s.conf||{},g=i.legendPosition.split("-"),v=t.canvasLeft,d=t.canvasTop,p=t.canvasWidth,C=t.canvasHeight,k=t.marginTop,y=t.marginBottom,S=t.marginRight,I=t.marginLeft,D,G,ae,Y,ne,le,me,Le;i.axisTextItemConf.style.fontSize=this.computeFontSize(i.axisTextItemConf.style.fontSizeWithUnit),i.legendCaptionConf.style.fontSize=this.computeFontSize(i.legendCaptionConf.style.fontSizeWithUnit),e.config.gLegendEnabled&&(D=this.getCalculatedLogicalSpace(),ae=i.width=D.width,Y=i.height=D.height,g[0]===A?(me=t.width-ae,Le=t.height-Y,ne=i.legendXPosition<0?0:i.legendXPosition>me?me:i.legendXPosition,le=i.legendYPosition<0?0:i.legendYPosition>Le?Le:i.legendYPosition):g[0]===R||g[0]===W?(G=p-ae,g[1]===M?ne=v:g[1]===N?ne=v+(G>0?G:0):ne=v+(G<0?0:G/2),g[0]===R?le=this._calculateTopPosition(k):le=t.height-D.height-y-(t.actionBarHeight||0)):(G=C-Y,g[1]===R?le=d:g[1]===W?le=d+G:le=d+(G<0?0:G/2),g[0]===M?ne=I:ne=t.width-D.width-S),i.xPos=ne,i.yPos=le)},a.draw=function(){var e=this.getFromEnv("chart"),t=e.getFromEnv("dataSource").colorrange,s=this,i=s.conf||{},g=e.hasGradientLegend;e.config.gLegendEnabled&&t&&g&&s.drawLegendComponent(i.xPos,i.yPos,{parentGroup:e.getContainer("parentgroup"),animationManager:e.getFromEnv("animationManager")})},a.drawLegendComponent=function(e,t,s){var i=this,g=i.conf,v,d;if(!i._dontPlot){if(!g.showLegend){i.enabled=!1;return}i.drawOptions.animationManager=s.animationManager,i.drawOptions.parentGroup=s.parentGroup,i.drawOptions.x=e,i.drawOptions.y=t,i.drawOptions.maxOtherSide=i.drawOptions.maxOtherSide||s.maxOtherSide,d=i.elem.gl.draw(i.drawOptions),v=d.getBBox(),g.xPos=v.x,g.yPos=v.y,g.height=v.height,g.width=v.width,i.enabled=!0}},n}(Ce.ComponentInterface),f=function(){function c(n){this.carpet=n}var a=c.prototype;return a.draw=function(o){return this.carpet.draw(o)},a.getLogicalSpace=function(o,e){return this.carpet.getLogicalSpace(o,e)},a.dispose=function(){this.carpet&&this.carpet.group&&this.carpet.group.remove()},c}(),r=function(){function c(n){this.conf=n,this._id=Z,this.compositionsByCategory={},this.node=K,this.group=K,this._lSpace=K,this.autoRecalculate=!1,this.groupName=ve,this.moveInstructions={}}var a=c.prototype;return a.configure=function(o){this.conf=o},a.getName=function(){return"LegendCarpet"},a.getType=function(){return"legend"},a.addCompositions=function(o,e){this.compositionsByCategory[e]=o},a.removeCompositions=function(o){delete this.compositionsByCategory[o]},a.getBoundingBox=function(o){var e=this.conf,t=e.spreadFactor,s=o.refSide,i=o.alignment,g=o.refOffset,v=o.x,d=o.y,p,C;return this.conf.legendPosition==="bottom"?(p=e.width=s*t,C=o.maxOtherSide,i&&(v===K||v===null)&&(v=(g+s)/2-p/2)):(C=e.height=s*t,p=o.maxOtherSide,i&&(d===K||d===null)&&(d=(g+s)/2-C/2)),{width:p,height:C,x:v,y:d}},a.getPostCalcDecisionsH=function(o,e){var t=this.conf,s=t.padding,i,g=0;this.moveInstructions={};for(i in e)g+=e[i].height||0;o.height=g+2*s.v},a.getLogicalSpace=function(o,e){var t=this._lSpace,s=["CAPTION","LEGEND_BODY"],i=this.conf,g=i.padding,v=this.compositionsByCategory,d,p,C,k,y=0,S={},I,D=0;if(t&&!e)return t.isImpure=!0,t;t=this._lSpace=p=this.getBoundingBox(o),(m(t.x)||m(t.y)||m(t.height)||m(t.width))&&(this.autoRecalculate=!0),C=U(p,{}),C.height-=2*g.v,C.width-=2*g.h,C.x+=g.h,C.y+=g.v;for(var G=0;G<s.length;G++)d=v[s[G]],d&&(I=U(C,{}),I.y+=y,y=C.height*d.conf.spreadFactor,I.height=y+D,k=d.getLogicalSpace(U(I,{}),o,e),D=I.height-k.height,S[s[G]]=k,y=k.height);return this.getPostCalcDecisions(p,S),this._lSpace=p,p},a.setupDragging=function(){var o=this.group,e=0,t=0,s=0,i=0;o.css({cursor:"move"}),o.drag(function(g,v){e=g,t=v,o.attr({transform:"t"+(s+e)+","+(i+t)})},function(){s+=e,i+=t},O.stubFN)},a.draw=function(o){var e=this.conf,t=this,s=["CAPTION","LEGEND_BODY"],i=this.compositionsByCategory,g=o.animationManager,v=o.parentGroup,d,p,C,k;this.getLogicalSpace(o,this.autoRecalculate),k=this._lSpace,this.group=d=g.setAnimation({el:this.group||"group",attr:{name:t.groupName},component:q,container:v,label:"carpetGroup"}),this.node=g.setAnimation({el:this.node||"rect",attr:k,css:e.style,component:q,container:d,label:"rect"});for(var y=0;y<s.length;y++)C=i[s[y]],C&&C.draw(e.captionAlignment,k,{animationManager:g,colorRange:o.colorRange,numberFormatter:o.numberFormatter,parentLayer:d,smartLabel:o.smartLabel,moveInstructions:this.moveInstructions[p],gLegend:o.gLegend});return e.allowDrag&&this.setupDragging(),this.node},a.getPostCalcDecisions=function(o,e){return this.conf.legendPosition==="bottom"?this.getPostCalcDecisionsH(o,e):this.getPostCalcDecisionsV(o,e)},a.getPostCalcDecisionsV=function(o,e){var t=this.conf,s=t.padding,i=Number.NEGATIVE_INFINITY,g,v,d=this.moveInstructions,p;this.getPostCalcDecisionsH(o,e);for(v in e)g=e[v].width,i=i<g?g:i;o.width=i+2*s.h;for(v in e)g=e[v].width,p=i-g,p&&(d[v]="t"+p/2+",0")},c}(),b=function(){function c(n,o){this.rawText=n,this.conf=o,this._id=te,this.node=K,this.bound=K,this._lSpace=K,this.LegendCaption={},this.LegendCaption.LEFT={x:function(t,s){return s.x+t.width/2+2}},this.LegendCaption.RIGHT={x:function(t,s){return s.x+s.width-t.width/2-2}},this.LegendCaption.CENTER={x:function(){var t=arguments[1];return t.x+t.width/2}}}var a=c.prototype;return a.configure=function(o,e){this.rawText=o,this.conf=e},a.getName=function(){return"LegendCaption"},a.getType=function(){return"caption"},a.getLogicalSpace=function(o,e,t){var s=this.conf,i=s.padding,g=this._lSpace,v=this.rawText,d=e.gLegend.getFromEnv("chartConfig"),p,C,k,y;return g&&!t?(g.isImpure=!0,g):(g=this._lSpace={bound:{height:0,width:0},node:{logicArea:K,smartText:K}},p=e.smartLabel,v?(C=U(o,{}),C.height-=2*i.v,C.width-=2*i.h,C.x+=i.h,C.y+=i.v,p.useEllipsesOnOverflow(d.useEllipsesWhenOverflow),y=U(this.conf.style,{}),E(y),p.setStyle(this._metaStyle=y),k=p.getSmartText(v,C.width,C.height),C.height=k.height,C.width=k.width,o.height=k.height+2*i.v,o.width=k.width+2*i.h,g.node.smartText=k,g.node.logicArea=C,g.bound=o,o):g.bound)},a.draw=function(){var o=this.conf,e,t=o.bound||{},s,i,g,v,d,p,C,k,y,S;return arguments.length>=3?(p=arguments[0],C=arguments[1],k=arguments[2]):arguments.length>=2&&(p=arguments[0],k=arguments[1]),e=k.parentLayer,S=k.animationManager,this.group=s=S.setAnimation({el:this.group||"group",attr:{name:"legend-caption"},css:o.style,component:q,container:e}),this.getLogicalSpace(C,k),v=this._lSpace,y=v.node,g=v.bound,this.bound=i=S.setAnimation({el:this.bound||"rect",attr:g,css:t.style,container:s,component:q}),d=typeof p=="string"?this.LegendCaption[p.toUpperCase()].x(y.smartText,C||y.logicArea):p,this.node=S.setAnimation({el:this.node||"text",attr:{text:y.smartText.text,x:d,y:y.logicArea.y+y.smartText.height/2,lineHeight:this._metaStyle.lineHeight,fill:o.style.fill},container:s,component:q}),{group:s,bound:i,node:this.node}},a.dispose=function(){this.group.remove(),this.bound.remove(),this.node.remove()},c}(),w=function(){function c(n,o,e){this.colorRange=n,this.conf=o,this.childTextConf=e,this._id=he,this.bound=K,this.group=K,this.compositionsByCategory={},this._lSpace=K,this.SC_STACK=[B.AXIS_LABEL,B.LEGEND_AXIS,B.AXIS_VALUE],this.DARW_STACK=[B.AXIS_VALUE,B.LEGEND_AXIS,B.AXIS_LABEL]}var a=c.prototype;return a.configure=function(o,e,t){this.colorRange=o,this.conf=e,this.childTextConf=t,this.compositionsByCategory={}},a.getName=function(){return"LegendBody"},a.getType=function(){return"legend"},a.addCompositions=function(o,e){this.compositionsByCategory[e]=o},a.getSpaceTaken=function(o){return this.conf.legendPosition==="bottom"?o.height:o.width},a.getLogicalSpace=function(o,e,t){var s=this._lSpace,i=this.conf,g=i.padding,v=this.compositionsByCategory,d,p,C,k,y,S=0,I,D;if(s&&!t)return s.isImpure=!0,s;for(s=this._lSpace={bound:{height:0,width:0},node:{logicArea:K}},k=U(o,{}),k.height-=2*g.v,k.width-=2*g.h,k.x+=g.h,k.y+=g.v,y=this.getCompositionPlotAreaFor(k),e.colorRange=this.colorRange,I=0,D=this.SC_STACK.length;I<D;I++)(d=v[this.SC_STACK[I]])&&(p=y(C,d.conf.spreadFactor),C=d.getLogicalSpace(U(p,{}),e,t),S+=this.getSpaceTaken(C));return this.updateEffectivePlotArea(o,k,S),s.node.logicArea=k,s.bound=o,o},a.draw=function(){var o=this.childTextConf,e=this.conf,t=e.bound.style||{},s=this.compositionsByCategory,i,g,v,d,p,C,k,y,S,I;for(arguments.length>=3?(C=arguments[1],y=arguments[2]):arguments.length>=2&&(y=arguments[1]),g=y.parentLayer,i=y.animationManager,this.getLogicalSpace(C,y),k=this._lSpace,this.group=p=i.setAnimation({el:this.group||"group",attr:{name:"legend-body",transform:"t0,0"},css:o.style,container:g,component:q}),this.bound=v=i.setAnimation({el:this.bound||"rect",attr:k.bound,css:t,container:p,component:q}),y.colorRange=this.colorRange,y.parentLayer=p,S=0,I=this.DARW_STACK.length;S<I;S++)(d=s[this.DARW_STACK[S]])&&d.draw(y);return y.moveInstructions&&p.attr({transform:y.moveInstructions}),{bound:v,group:p}},a.getCompositionPlotAreaFor=function(o){var e,t=this.conf.legendPosition==="bottom";return e=U(o,{}),function(s,i){var g=s;return g=g||{},t?(e.y+=g.height||0,e.height=o.height*i):(e.x+=g.width||0,e.width=o.width*i),e}},a.updateEffectivePlotArea=function(o,e,t){var s=this.conf,i=s.padding;this.conf.legendPosition==="bottom"?(e.height=t,o.height=t+2*i.v):(e.width=t,o.width=t+2*i.h)},c}(),T=function(){function c(n){this.conf=n,this.node=[],this._id=ue}var a=c.prototype;return a.configure=function(o){this.conf=o},a.getType=function(){return"label"},a.getName=function(){return"LegendLabel"},a.getEffectivePlotArea=function(o){var e=this.conf,t=e.padding;return o.height-=2*t.v,o.width-=2*t.h,o.x+=t.h,o.y+=t.v,o},a.getLogicalSpace=function(o,e,t){var s=this.conf.legendPosition==="bottom",i=this._lSpace,g=this.conf,v=g.padding,d,p,C,k,y,S=[],I,D,G,ae,Y,ne,le,me,Le,be,ye,Ee,Re,Pe,xe,Ie,Te,we=e.gLegend.getFromEnv("chartConfig"),_e=[],Se;if(i&&!t)return i.isImpure=!0,i;for(d=e.colorRange,p=e.smartLabel,Y=d.getCumulativeValueRatio(),C=d.colorRange,i=this._lSpace={bound:{height:0,width:0},node:{logicArea:K,smartTexts:[]}},me=i.node.smartTexts,G=U(o,{}),be=this.getEffectivePlotArea(G),Se=s?be.width:be.height,p.useEllipsesOnOverflow(we.useEllipsesWhenOverflow),Te=U(g.style,{}),E(this._metaStyle=Te),p.setStyle(Te),ye=p.getSmartText("W"),k=0,y=C.length;k<y;k++){if(ae=(0,O.parseUnsafeString)(C[k].label),!ae){me[k]=K;continue}_e.push({oriIndex:k,label:ae})}if(y=_e.length,y===0)return{height:0,width:0};for(y>1?ne=(Y[_e[y-1].oriIndex]-Y[_e[0].oriIndex])/2*Se/100:ne=Math.max(Y[_e[0].oriIndex],100-Y[_e[0].oriIndex])/2*Se/100,le=ne,s?(xe=p.getSmartText(_e[0].label,le,be.height),xe.x=Y[_e[0].oriIndex]*be.width/100,I=xe.x+xe.width):(xe=p.getSmartText(_e[0].label,le,be.width),xe.y=Y[_e[0].oriIndex]*be.height/100,I=xe.y+xe.width),S.push(xe.height),me[_e[0].oriIndex]=xe,s?(xe=p.getSmartText(_e[y-1].label,le,be.height),xe.x=Y[_e[y-1].oriIndex]*be.width/100,D=xe.x-xe.width):(xe=p.getSmartText(_e[y-1].label,le,be.width),xe.y=Y[_e[y-1].oriIndex]*be.height/100,D=xe.y-xe.width),S.push(xe.height),me[_e[y-1].oriIndex]=xe,Pe=I,k=1;k<y-1;k++)ae=_e[k].label,Ie=_e[k].oriIndex,xe=K,Ee=k+1===y-1?D:Y[_e[k+1].oriIndex]*Se/100,Re=Y[_e[k].oriIndex]*Se/100,ne=Math.min(Re-Pe,Ee-Re),ne>2*ye.width&&(s?(xe=p.getSmartText(ae,ne,be.height),xe.x=Y[Ie]*be.width/100):(xe=p.getSmartText(ae,ne,be.width),xe.y=Y[Ie]*be.height/100),Pe=ne,S.push(xe.height)),me[_e[k].oriIndex]=xe;return Le=Math.max.apply(Math,S),s?(be.height=Le,o.height=Le+2*v.v):(be.width=Le,o.width=Le+2*v.v),i.node.logicArea=be,i.bound=o,o},a.draw=function(){var o=this.conf.legendPosition==="bottom",e,t,s=this.conf,i=s.bound&&s.bound.style||{stroke:"none"},g,v,d,p,C,k,y,S,I,D={},G;arguments.length>=2&&arguments[1]?(v=arguments[0],C=arguments[1]):arguments.length>=1&&(C=arguments[0]),G=C.animationManager,e=C.parentLayer,this.getLogicalSpace(v,C),p=this._lSpace,y=p.node.logicArea,S=p.node.smartTexts,this.group=g=G.setAnimation({el:this.group||"group",attr:{name:"legend-labels"},container:e,component:q}),this.bound=t=G.setAnimation({el:this.bound||"rect",attr:p.bound,css:i,container:g,component:q});for(var ae=0;ae<this.node.length;ae++)this.node[ae].remove();for(this.node=[],k=0,I=S.length;k<I;k++)d=S[k],d&&(o?(D.y=y.y+d.height/2,k===I-1?D.x=y.x+d.x-d.width/2:k?D.x=y.x+d.x:D.x=y.x+d.x+d.width/2):(D.x=y.x+d.height/2,k===I-1?D.y=y.y+d.y-d.width/2:k?D.y=y.y+d.y:D.y=y.y+d.y+d.width/2),this.node.push(G.setAnimation({el:"text",attr:{text:d.text,x:D.x,y:D.y,lineHeight:this._metaStyle.lineHeight,fill:s.style.fill,transform:o?"R0":"R270,"+D.x+","+D.y},container:g,component:q})));return{group:g,bound:t,node:this.node}},c}(),_=function(){function c(n){this.conf=n,this._id=se,this.node=K,this.group=K,this.shadow=K,this.markerLine=K,this.compositionsByCategory={}}var a=c.prototype;return a.configure=function(o){this.conf=o},a.getName=function(){return"LegendAxis"},a.getType=function(){return"axis"},a.addCompositions=function(o,e){this.compositionsByCategory[e]=o},a.getLogicalSpace=function(){var o=this.conf.legendPosition==="bottom",e=arguments[0],t=arguments[2],s=this._lSpace,i=this.conf,g=i.padding,v,d,p,C=i.legendAxisHeight,k=this.compositionsByCategory,y,S,I,D,G=0;return s&&!t?(s.isImpure=!0,s):(s=this._lSpace={bound:{height:0,width:0},node:{logicArea:K}},S=U(e,{}),S.height-=2*g.v,S.width-=2*g.h,S.x+=g.h,S.y+=g.v,v=C/2+i.line.offset,d=C/2,y=k[B.RANGE],y&&(I=y.sliders.false,D=I.conf.outerCircle.rFactor*C,d+=G=Math.max(D/2-C/2,0)),o?(S.y+=G,S.height=p=d+v+G,e.height=p+2*g.v):(S.x+=G,S.width=p=d+v+G,e.width=p+2*g.v),s.node.logicArea=S,s.bound=e,e)},a.getDrawableAxisArea=function(o){var e=this.conf,t=this.conf.legendPosition==="bottom",s=o.x,i=o.y,g=t?o.width:e.legendAxisHeight,v=t?e.legendAxisHeight:o.height,d=e.legendAxisHeight/2;return{x:s,y:i,width:g,height:v,r:d}},a.preDrawingRangeParamV=function(o){var e=o.x+o.width/2,t=o.width;return{x:e,calculationBase:t,rangeStart:o.y,rangeEnd:o.y+o.height,prop:"x"}},a.preDrawingRangeParamH=function(o){var e=o.y+o.height/2,t=o.height;return{y:e,calculationBase:t,rangeStart:o.x,rangeEnd:o.x+o.width,prop:"y"}},a.preDrawingRangeParam=function(o){return this.conf.legendPosition==="bottom"?this.preDrawingRangeParamH(o):this.preDrawingRangeParamV(o)},a.getScaleMarkerPathStrH=function(o,e){var t=U(o,{}),s=this.conf,i=s.line,g,v,d,p,C,k=O.BLANKSTRING,y=O.BLANKSTRING;for(t.x+=t.r,t.width-=2*t.r,C=t.y+t.height,g=0,v=e.length;g<v;g++)d=e[g],p=t.x+d*t.width/100,k+=fe+p+j+(C-i.grooveLength)+ie+p+j+(C+i.offset);return y+=fe+t.x+j+(C+i.offset)+ie+(t.x+t.width)+j+(C+i.offset),k+y},a.getColorGradientH=function(o){return{axis:o.getBoxFill(),shadow:(0,O.toRaphaelColor)({FCcolor:{alpha:"25,0,0",angle:90,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}},a.draw=function(){var o,e=this.conf,t=e.bound||{},s=e.line,i=t.style||{},g,v,d=this.compositionsByCategory,p,C,k,y,S,I,D,G,ae,Y,ne;arguments.length>=2?(g=arguments[0],ae=arguments[1]):arguments.length>=1&&(ae=arguments[0]),Y=ae.animationManager,o=ae.parentLayer,p=ae.colorRange,C=p.getCumulativeValueRatio(),this.getLogicalSpace(g,ae),G=this._lSpace,this.group=y=Y.setAnimation({el:this.group||"group",attr:{name:"legend-axis"},container:o,component:q}),this.bound=Y.setAnimation({el:this.bound||"rect",attr:G.bound,css:i,component:q,container:y}),D=this.getDrawableAxisArea(G.node.logicArea),I=this.getColorGradient(p),e.style.fill=I.axis,e.shadow.style.fill=I.shadow,this.node=Y.setAnimation({el:this.node||"rect",attr:D,css:e.style,container:y,component:q}),this.shadow=Y.setAnimation({el:this.shadow||"rect",attr:D,css:e.shadow.style,container:y,component:q}),ne=this.getScaleMarkerPathStr(D,C),this.path=Y.setAnimation({el:this.path||"path",attr:{path:ne},css:s.style,container:y,component:q});for(v in d)switch(k=d[v],v){case B.RANGE:S=this.preDrawingRangeParam(D),ae[S.prop]=S[S.prop],ae.key=S.prop,ae.rCalcBase=S.calculationBase,ae.parentLayer=y,k.draw(S.rangeStart,S.rangeEnd,ae)}},a.getScaleMarkerPathStr=function(o,e){return this.conf.legendPosition==="bottom"?this.getScaleMarkerPathStrH(o,e):this.getScaleMarkerPathStrV(o,e)},a.getColorGradient=function(o){return this.conf.legendPosition==="bottom"?this.getColorGradientH(o):this.getColorGradientV(o)},a.getScaleMarkerPathStrV=function(o,e){var t=U(o,{}),s=this.conf,i=s.line,g,v,d,p,C,k=O.BLANKSTRING,y=O.BLANKSTRING;for(t.y+=t.r,t.height-=2*t.r,p=t.x+t.width,g=0,d=e.length;g<d;g++)v=e[g],C=t.y+v*t.height/100,k+=fe+(p-i.grooveLength)+j+C+ie+(p+i.offset)+j+C;return y+=fe+(p+i.offset)+j+t.y+ie+(p+i.offset)+j+(t.y+t.height),k+y},a.getColorGradientV=function(o){return{axis:o.getBoxFill(!0),shadow:(0,O.toRaphaelColor)({FCcolor:{alpha:"25,0,0",angle:360,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}},c}(),F=function(){function c(n,o,e){this.conf=o.conf,this.sliderIndex=n,this.rangeGroup=o.sliderGroup,this._id=e,this.node=K,this.tracker=K,this.currPos=0,this.swing=[]}var a=c.prototype;return a.configure=function(o,e,t){this.conf=e.conf,this.sliderIndex=o,this.rangeGroup=e.sliderGroup,this._id=t,this.currPos=0,this.swing=[]},a.getType=function(){return"slider"},a.getName=function(){return"Slider"},a.updateSwingRange=function(o,e){this.swing[+o]=e},a.draw=function(o,e,t,s){var i=s.parentLayer,g=this,v=s.animationManager,d=this.conf,p=d.outerCircle,C=d.innerCircle,k,y=v.getFromEnv("chart").config,S=Math.ceil(p.rFactor*s.rCalcBase/2),I=Math.ceil(C.rFactor*s.rCalcBase/2),D=S-I,G,ae=s.gLegend.getFromEnv("toolTipController"),Y=this.sliderIndex,ne,le,me,Le,be;return d.outerRadius=S,d.innerRadius=I,this._scaleVal=e,C.style["stroke-width"]=D,le=Math.ceil(p.style["stroke-width"]/2),I+=le,G=this.node=v.setAnimation({el:this.node||"group",attr:{name:"fc-gl-slider",cursor:"pointer",transform:"t0,0"},container:i,component:q}),s.key==="x"?(me=t,Le=o,Le+=Y?-I:+I):(me=o,Le=t,me+=Y?-I:+I),this.oCircle=v.setAnimation({el:this.oCircle||"circle",attr:{cx:me,cy:Le,r:S},css:p.style,container:G,component:q}),this.iCircle=v.setAnimation({el:this.iCircle||"circle",attr:{cx:me,cy:Le,r:I},css:C.style,container:G,component:q}),be=this.tracker=v.setAnimation({el:this.tracker||"circle",attr:{cx:me,cy:Le,r:S+5,fill:u,stroke:u,cursor:"pointer"},container:G,component:q}),G.attr({transform:s.key==="x"?"t0,"+g.currPos:"t"+g.currPos+",0"}),k=y.showToolTip?e:"",ae.enableToolTip(be,k),this._dragAPI=ne=this.getDragAPI(s.key==="x"),be.undrag(),be.drag(ne.dragging,ne.dragStart,ne.dragEnd),{translateAscending:S+le}},a.getDragAPI=function(o){var e=this,t=e.node,s=e.sliderIndex,i=e.rangeGroup,g,v,d,p=e.conf.innerRadius,C=p,k;return{dragging:function(S){var I,D,G,ae,Y;return S.stopPropagation(),o?G=S.data[1]:G=S.data[0],s?(I=g[0]-g[1]+C,D=0):(I=0,D=g[1]-g[0]-C),Y=e.currPos+G,Y<I?G+=I-Y:Y>D&&(G-=Y-D),t.attr({transform:o?"t0,"+(e.currPos+G):"t"+(e.currPos+G)+",0"}),v=G,d&&clearTimeout(d),d=setTimeout(function(){i.updateWhenInRest(e,e.currPos+G)},100),ae=i.updateWhenInMove(e,e.currPos+G),e.conf.showTooltip&&e.tracker.data("__FC_tooltipText",ae),k=!0,!0},dragStart:function(S){S.stopPropagation(),g=e.swing,k=!1,i.dragStarted(e)},dragEnd:function(){var S;i.dragCompleted(e,k,e.currPos+v),k&&(d&&clearTimeout(d),d=setTimeout(function(){i.updateWhenInRest(e,e.currPos)},100),e.currPos+=v,S=g[+s]+e.currPos,i.updateRange(e,S))}}},a.dispose=function(){this.node.remove(),this.oCircle.remove(),this.iCircle.remove(),this.tracker.remove(),delete this},c}(),L=function(){function c(n){var o=n,e={};this._id=re,this.conf=n,e.conf=o,this.extremes=[],this.sliders={},this.min=K,this.max=K,e.sliderGroup=this,this.valueRange=[],this.callbacks=[],this.sliders[ge]=new F(ge,e,this._id+"_"+ +ge),this.sliders[X]=new F(X,e,this._id+"_"+ +X)}var a=c.prototype;return a.configure=function(o){var e=o,t={};this.min=K,this.max=K,this.conf=o,t.conf=e,t.sliderGroup=this,this.sliders[ge].configure(ge,t,this._id+"_"+ +ge),this.sliders[X].configure(X,t,this._id+"_"+ +X)},a.getType=function(){return"slider"},a.getName=function(){return"SliderGroup"},a.initRange=function(o,e){var t=o.sliderIndex;this.extremes[+t]=e},a.updateRange=function(o,e){var t=o.sliderIndex,s=this.sliders,i=s[!t];i.updateSwingRange(t,e)},a.reset=function(){var o={};o.conf=this.conf,o.sliderGroup=this,this.min=K,this.max=K,this.sliders[ge].configure(ge,o,this._id+"_"+ +ge),this.sliders[X].configure(X,o,this._id+"_"+ +X),this.draw.apply(this,this._drawParams)},a.draw=function(o,e,t){var s=this.sliders,i=s[ge],g=s[X],v=t.colorRange,d=v.colorRange,p,C,k,y,S,I=v.data.mapByPercent,D=t.gLegend.getFromEnv("number-formatter"),G;return this._fcChart=t.gLegend.getFromEnv("chart"),this.getValueFormPixel=function(ae,Y,ne,le){var me=(Y-ae)/(le-ne);this.getValueFormPixel=function(Le){return ae+me*Le}},this.updateWhenInMove=function(ae,Y){this.updateWhenInMove=function(ne,le){var me=this.extremes,Le=ne.sliderIndex,be,ye;return Le?be=me[1]-me[0]+le:be=le,ye=this.getValueFormPixel(be),Y?ye=parseFloat(ye).toFixed(2)+de:ye=ae.legendValue(ye),ye}},this._drawParams=[o,e,t],this.updateWhenInMove(D,I),k=i.conf.outerCircle,C=i.conf.innerCircle,y=Math.ceil(C.rFactor*t.rCalcBase/2),y+=Math.ceil(k.style["stroke-width"]/2),this.extremes[0]=o+y,this.extremes[1]=e-y,S=this.extremes[1]-this.extremes[0],this.min=this.min?this.min:d[0].value,this.max=this.max?this.max:d[d.length-1].value,G=d[d.length-1].value-d[0].value,i.currPos=S*(this.min-d[0].value)/G,g.currPos=S*(this.max-d[0].value)/G-S,p=i.draw(o,I?D.legendPercentValue(this.min):D.legendValue(this.min),t[t.key],t),p=g.draw(e,I?D.legendPercentValue(this.max):D.legendValue(this.max),t[t.key],t),i.swing=this.extremes.slice(0),g.swing=this.extremes.slice(0),i.swing[1]+=g.currPos,g.swing[0]+=i.currPos,this.getValueFormPixel(d[0].value,d[d.length-1].value,this.extremes[0],this.extremes[1]),p},a.updateWhenInRest=function(o,e){var t=this.sliders,s=this.extremes,i=o.sliderIndex,g,v;i?(g=t[!i].currPos,v=s[1]-s[0]+e):(g=e,v=s[1]-s[0]+t[!i].currPos),this.min=Number(this.getValueFormPixel(g).toFixed(2)),this.max=Number(this.getValueFormPixel(v).toFixed(2)),this.gLegend.fireEvent("rangeUpdated",[{min:this.min,max:this.max}])},a.dragStarted=function(o){var e=this.sliders,t=this.extremes,s=o.conf,i=this._fcChart;i.fireChartInstanceEvent("legendpointerdragstart",{pointerIndex:+o.sliderIndex,pointers:[{value:this.getValueFormPixel(e.false.currPos)},{value:this.getValueFormPixel(t[1]-t[0]+e.true.currPos)}],legendPointerHeight:s.outerRadius,legendPointerWidth:s.innerRadius,outerRadius:s.outerRadius,innerRadius:s.innerRadius},[i.id])},a.dragCompleted=function(o,e,t){var s=this.sliders,i=this.extremes,g=o.conf,v=this.getValueFormPixel(s.false.currPos),d=this.getValueFormPixel(i[1]-i[0]+s.true.currPos),p=this._fcChart,C,k;o.sliderIndex?(C=v,k=this.getValueFormPixel(i[1]-i[0]+t)):(C=this.getValueFormPixel(t),k=d),e&&p.fireChartInstanceEvent("legendrangeupdated",{previousMinValue:v,previousMaxValue:d,minValue:C,maxValue:k},[p.id]),p.fireChartInstanceEvent("legendpointerdragstop",{pointerIndex:+o.sliderIndex,pointers:[{value:C},{value:k}],legendPointerHeight:g.outerRadius,legendPointerWidth:g.innerRadius,outerRadius:g.outerRadius,innerRadius:g.innerRadius},[p.id])},a.dispose=function(){this.sliders[ge].dispose(),this.sliders[X].dispose()},c}(),h=function(c){(0,Fe.default)(a,c);function a(){var o;return o=c.call(this,arguments[0])||this,o._id=ce,o.node=[],o}var n=a.prototype;return n.configure=function(e){this.conf=e},n.getName=function(){return"LegendValues"},n.getType=function(){return"legend"},n.getLogicalSpace=function(e,t,s){var i=this.conf.legendPosition==="bottom",g=this._lSpace,v=this.conf,d=v.padding,p=t.gLegend.getFromEnv("chartConfig"),C,k,y,S,I,D,G,ae,Y,ne,le,me=[],Le,be,ye,Ee=[],Re,Pe,xe,Ie,Te,we,_e,Se,Me,Ne,De;if(g&&!s)return g.isImpure=!0,g;for(C=t.colorRange,k=t.smartLabel,y=C.colorRange,G=C.getCumulativeValueRatio(),g=this._lSpace={bound:{height:0,width:0},node:{logicArea:K,smartTexts:[]}},De=g.node.smartTexts,we=U(e,{}),we.height-=2*d.v,we.width-=2*d.h,we.x+=d.h,we.y+=d.v,k.useEllipsesOnOverflow(p.useEllipsesWhenOverflow),Ne=U(v.style,{}),E(this._metaStyle=Ne),k.setStyle(Ne),Me=k.getSmartText("W"),D=y.length,i?(le=ae=(G[D-1]-G[0])/2*we.width/100,Se=y[0].displayValue,S=k.getSmartText(typeof Se!="string"&&Se!==K&&Se.toString()||Se,le,we.height),S.x=G[0]*we.width/100,Le=S.x+S.width,me.push(S.height)):(le=ae=(G[D-1]-G[0])/2*we.height/100,S=k.getSmartText(y[0].displayValue,we.width,le),S.y=G[0]*we.height/100,Re=S.y+S.width,Ee.push(S.width)),De[0]=S,i?(S=k.getSmartText(y[D-1].displayValue,le,we.height),S.x=G[D-1]*we.width/100,ye=S.x-S.width,me.push(S.height),be=Le):(S=k.getSmartText(y[D-1].displayValue,we.width,le),S.y=G[D-1]*we.height/100,xe=S.y-S.height,Ee.push(S.width),Pe=Re),De[D-1]=S,I=1;I<D-1;I++)S=K,_e=y[I].displayValue,i?(Y=I+1===D-1?ye:G[I+1]*we.width/100,ne=G[I]*we.width/100,ae=Math.min(ne-be,Y-ne),ae>1.5*Me.width&&(S=k.getSmartText(_e,2*ae,we.height),S.x=G[I]*we.width/100,be=ae,me.push(S.height))):(Y=I+1===D-1?xe:G[I+1]*we.height/100,ne=G[I]*we.height/100,ae=Math.min(ne-Pe,Y-ne),ae>2*Me.height&&(S=k.getSmartText(_e,we.width,2*ae),S.y=G[I]*we.height/100,Pe=ae,Ee.push(S.width))),De[I]=S;return i?(Ie=Math.max.apply(Math,me),we.height=Ie,e.height=Ie+2*d.v):(Te=Math.max.apply(Math,Ee),we.width=Te,e.width=Te+2*d.h),g.node.logicArea=we,g.bound=e,e},n.draw=function(){var e=this.conf,t=e.legendPosition==="bottom",s=e.bound&&e.bound.style||{stroke:"none"},i={},g,v,d,p,C,k,y,S,I,D,G,ae,Y,ne;arguments.length>=2&&arguments[1]?(p=arguments[0],y=arguments[1]):arguments.length>=1&&(y=arguments[0]),ne=y.animationManager,g=y.parentLayer,S=y.colorRange,I=S.getCumulativeValueRatio(),this.getLogicalSpace(p,y),C=this._lSpace,k=C.node.logicArea,ae=C.node.smartTexts,this.group=d=ne.setAnimation({el:this.group||"group",attr:{name:"legend-values"},container:g,component:q}),this.bound=v=ne.setAnimation({el:this.bound||"rect",attr:C.bound,css:s,container:d,component:q});for(var le=0;le<this.node.length;le++)this.node[le].remove();for(this.node=[],D=0,G=I.length;D<G;D++)Y=ae[D],Y&&(t?(i.y=k.y+Y.height/2,D===G-1?i.x=k.x+Y.x-Y.width/2:D?i.x=k.x+Y.x:i.x=k.x+Y.x+Y.width/2):(i.x=k.x+Y.width/2,D===G-1?i.y=k.y+Y.y-Y.height/2:D?i.y=k.y+Y.y:i.y=k.y+Y.y+Y.height/2),this.node.push(ne.setAnimation({el:"text",attr:{text:Y.text,x:i.x,y:i.y,lineHeight:this._metaStyle.lineHeight,fill:e.style.fill},container:d,component:q})));return{group:d,bound:v}},a}(T),l=x;return Je.default=l,Je}var wt;function Zt(){if(wt)return ct;wt=1;var ke=Oe;ct.__esModule=!0,ct.default=Ae;var pe=Ge(),Fe=ke($t()),O=ke(Nt()),Ce="none",K="gradient",B="icon";function u(ge){var X=ge.getFromEnv("dataSource").colorrange,de=ge.getFromEnv("dataSource").chart.mapbycategory,j=ge.defaultDatasetType==="maps",z=ge.getName()==="TreeMap",$,ee=ge.getFromEnv("legend"),Q=ge.getFromEnv("gLegend");switch(!X||!ge.config.showLegend?$=Ce:j?X.gradient&&Number(X.gradient)?$=K:X.color?$=B:$=Ce:z?X.gradient&&X.gradient!=="0"?$=K:$=Ce:X.gradient&&X.gradient!=="0"&&!Number(de)?$=K:$=B,$){case"gradient":ge.deleteFromEnv("legend"),ee&&ee.remove(),(0,pe.componentFactory)(ge,Fe.default,"gLegend",1),Q=ge.getChildren("gLegend")[0],Q.configure(),ge.addToEnv("gLegend",Q);break;case"icon":ge.deleteFromEnv("gLegend"),Q&&Q.remove(),(0,pe.componentFactory)(ge,O.default,"legend",1,{showLegend:!0}),ee=ge.getChildren("legend")[0],ee.configure(),ge.addToEnv("legend",ee);break;case"none":ge.deleteFromEnv("gLegend"),ge.deleteFromEnv("legend"),Q&&Q.remove(),ee&&ee.remove()}}function Ae(ge){u(ge)}return ct}var _t;function Qt(){if(_t)return We;_t=1;var ke=Oe;We.__esModule=!0,We.default=void 0;var pe=ke(ze()),Fe=ke(Ot()),O=He(),Ce=z(Bt()),K=ke(Dt()),B=Tt(),u=Ge(),Ae=ke(Kt()),ge=ke(Gt()),X=ke(qt()),de=ke(Zt());function j(q){if(typeof WeakMap!="function")return null;var U=new WeakMap,H=new WeakMap;return(j=function(E){return E?H:U})(q)}function z(q,U){if(q&&q.__esModule)return q;if(q===null||typeof q!="object"&&typeof q!="function")return{default:q};var H=j(U);if(H&&H.has(q))return H.get(q);var V={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in q)if(m!=="default"&&Object.prototype.hasOwnProperty.call(q,m)){var x=E?Object.getOwnPropertyDescriptor(q,m):null;x&&(x.get||x.set)?Object.defineProperty(V,m,x):V[m]=q[m]}return V.default=q,H&&H.set(q,V),V}var $=(0,u.extend2)({foregroundcolor:"333333",foregroundalpha:"100",foregrounddarkcolor:"111111",foregrounddarkalpha:"100",foregroundlightcolor:"666666",foregroundlightalpha:"100",backgroundlightcolor:"FFFFFF",backgroundlightalpha:"100",backgroundlightangle:90,backgroundlightratio:"",backgroundcolor:"FFFFCC",backgroundalpha:"100",backgrounddarkcolor:"ffcc66",backgrounddarkalpha:"100",backgrounddarkangle:270,backgrounddarkratio:"",shadow:1},Ce),ee="0,100",Q="Map",J="maps",P="geo",A="right",R={basefontcolor:"foregroundcolor",bordercolor:"foregrounddarkcolor",borderalpha:"foregrounddarkalpha",bgcolor:"backgroundlightcolor",bgalpha:"backgroundlightalpha",bgangle:"backgroundlightangle",bgratio:"backgroundlightratio",canvasbordercolor:"foregrounddarkcolor",canvasborderalpha:"foregrounddarkalpha",canvasbgcolor:"backgroundlightcolor",canvasbgalpha:"backgroundlightalpha",canvasbgangle:"backgroundlightangle",canvasbgratio:"backgroundlightratio",tooltipbordercolor:"foregrounddarkcolor",tooltipborderalpha:"foregrounddarkalpha",tooltipbgcolor:"backgroundlightcolor",tooltipbgalpha:"backgroundlightalpha",tooltipfontcolor:"foregroundcolor",legendbordercolor:"foregrounddarkcolor",legendborderalpha:"foregrounddarkalpha",markerbordercolor:"foregroundlightcolor",markerborderalpha:"foregroundlightalpha",markerfillcolor:"backgrounddarkcolor",markerfillalpha:"backgrounddarkalpha",markerfillangle:"backgrounddarkangle",markerfillratio:"backgrounddarkratio",plotfillcolor:"backgroundcolor",plotfillalpha:"backgroundalpha",plotfillangle:"backgroundangle",plotfillratio:"backgroundratio",plothoverfillcolor:"backgrounddarkcolor",plothoverfillalpha:"backgrounddarkalpha",plothoverfillangle:"backgrounddarkangle",plothoverfillratio:"backgrounddarkratio",plotbordercolor:"foregroundcolor",plotborderalpha:"foregroundalpha",shadow:"shadow"},W={getMapName:function(){var U=this,H=U.jsVars.instanceAPI,V=H.getName().toLowerCase();return V},getEntityList:function(){var U=this,H=U.jsVars.instanceAPI,V=H.getDatasets()||[],E,m,x,f=V.length,r=[],b,w,T,_;for(E=0;E<f;E++)if(x=V[E]||[],_=x.getName(),_==="entities"){m=x;break}b=m.components.data,f=b.length;for(E in b)b.hasOwnProperty(E)&&(w=b[E]||{},T=w.config||{},r.push({id:T.id,originalId:T.originalId||T.id,label:T.label,shortlabel:T.shortLabel,value:T.value,formattedValue:T.formattedValue,toolText:T.toolText}));return r},getMapAttribute:function(){var U=this;return(0,B.raiseWarning)(this,"12061210581","run","JavaScriptRenderer~getMapAttribute()",'Use of deprecated "getMapAttribute()". Replace with "getChartAttribute()".'),U.getChartAttribute.apply(U,arguments)},exportMap:function(){var U=this;return(0,B.raiseWarning)(this,"12061210581","run","JavaScriptRenderer~exportMap()",'Use of deprecated "exportMap()". Replace with "exportChart()".'),U.exportChart&&U.exportChart.apply(U,arguments)},addMarker:function(U){var H=this.jsVars.instanceAPI,V=H.getDatasets()||[],E=V.length,m,x,f,r;for(m=0;m<E;m++)if(x=V[m]||[],r=x.getName(),r==="markers"){f=x;break}f&&!f.addMarkerItem(U)&&(0,B.raiseWarning)(this,"1309264086","run","MapsRenderer~addMarker()","Failed to add marker. Check the options and try again.")},updateMarker:function(U,H){var V=this.jsVars.instanceAPI,E=V.getDatasets()||[],m,x=E.length,f,r,b,w;for(f=0;f<x;f++)if(r=E[f]||[],w=r.getName(),w==="markers"){b=r;break}b&&U&&(m=(U+te).toLowerCase(),b.updateMarkerItem(m,H))},removeMarker:function(U){var H=this.jsVars.instanceAPI,V=H.getDatasets()||[],E=V.length,m,x,f,r,b;for(x=0;x<E;x++)if(f=V[x]||[],b=f.getName(),b==="markers"){r=f;break}U&&(m=(U+te).toLowerCase(),r._removeMarkerItem(m))}},M,N="none",Z=", ",te="",he="bottom",ue="circle",se=window.Math,re=se.min,ce=se.max,ve=function(U,H){var V=(0,u.getMouseCoordinate)(H.getFromEnv("chart-container"),U,H),E=V.chartX,m=V.chartY,x=H.config,f=x.canvasLeft,r=x.canvasTop,b=x.canvasLeft+x.canvasWidth,w=x.canvasHeight+x.canvasTop;return V.insideCanvas=!1,V.originalEvent=U,E>f&&E<b&&m>r&&m<w&&(V.insideCanvas=!0),V},oe=function(q){(0,pe.default)(U,q);function U(H,V){var E;E=q.call(this)||this,E.subpalette=u.BLANKSTRING,E.key=u.BLANKSTRING,E.index=V;var m;for(m in H)E.subpalette=$[H[m]],E[m]=E.subpalette instanceof Array?E.subpalette[V]:E.subpalette,E.key=m;return E}return U}(O.ComponentInterface),fe=function(q){(0,pe.default)(U,q);function U(){var V;return V=q.call(this)||this,V.friendlyName=Q,V.revision=1,V.hasCanvas=!0,V.standaloneInit=!1,V.defaultDatasetType=J,V.defaultSeriesType=P,V.fireGroupEvent=!0,V.legendposition=A,V.hasGradientLegend=!0,V.isMap=!0,V.defaultPaletteOptions={paletteColors:[["A6A6A6","CCCCCC","E1E1E1","F0F0F0"],["A7AA95","C4C6B7","DEDFD7","F2F2EE"],["04C2E3","66E7FD","9CEFFE","CEF8FF"],["FA9101","FEB654","FED7A0","FFEDD5"],["FF2B60","FF6C92","FFB9CB","FFE8EE"]],bgColor:["FFFFFF","CFD4BE,F3F5DD","C5DADD,EDFBFE","A86402,FDC16D","FF7CA0,FFD1DD"],bgAngle:[270,270,270,270,270],bgRatio:[ee,ee,ee,ee,ee],bgAlpha:["100","60,50","40,20","20,10","30,30"],toolTipBgColor:["FFFFFF","FFFFFF","FFFFFF","FFFFFF","FFFFFF"],toolTipBorderColor:["545454","545454","415D6F","845001","68001B"],baseFontColor:["555555","60634E","025B6A","A15E01","68001B"],tickColor:["333333","60634E","025B6A","A15E01","68001B"],trendColor:["545454","60634E","415D6F","845001","68001B"],plotFillColor:["545454","60634E","415D6F","845001","68001B"],borderColor:["767575","545454","415D6F","845001","68001B"],borderAlpha:[50,50,50,50,50]},V.colorPaletteMap=R,V.eiMethods=W,V.registerFactory("legend",de.default,["canvas"]),V.registerFactory("axis",u.stubFN,["canvas"]),V.registerFactory("colormanager-decider",X.default,["legend"]),V.registerFactory("dataset",Ae.default,["colormanager-decider"]),V.registerFactory("canvas",ge.default),V}var H=U.prototype;return H._checkInvalidSpecificData=function(){return this.config.invalid=!1,!1},H.__setDefaultConfig=function(){q.prototype.__setDefaultConfig.call(this);var E=this.config;!E.baseWidth&&(E.baseWidth=400),!E.baseHeight&&(E.baseHeight=300),!E.baseScaleFactor&&(E.baseScaleFactor=1)},U.getName=function(){return"maps"},U.getType=function(){return"chartAPI"},H.getName=function(){return this.config.name||"GEO"},H.getType=function(){return"chartAPI"},H.configureAttributes=function(E){var m=this,x=m.getChildren("colorPalette")&&m.getChildren("colorPalette")[0],f;f=E.chart=E.chart||E.graph||E.map||{},m.jsonData=E,x||(x=new oe(this.colorPaletteMap,(f.palette>0&&f.palette<6?f.palette:(0,u.pluckNumber)(m.paletteIndex,1))-1),m.attachChild(x,"colorPalette")),m.config.skipCanvasDrawing=!0,q.prototype.configureAttributes.call(this,E),m._parseBackgroundCosmetics()},H.parseChartAttr=function(E){var m=this,x,f=m.jsonData,r=f.chart||f.map,b=f.markers,w=new oe(this.colorPaletteMap,(r.palette>0&&r.palette<6?r.palette:(0,u.pluckNumber)(m.paletteIndex,1))-1),T,_,F,L,h=(0,u.pluck)(r.entitybordercolor,r.bordercolor,w.plotbordercolor),l=(0,u.pluck)(r.entityfillcolor,r.fillcolor,w.plotfillcolor),c=(0,u.pluck)(r.entityfillalpha,r.fillalpha,w.plotfillalpha),a=(0,u.pluck)(r.entityfillratio,r.fillratio,w.plotfillratio),n=(0,u.pluck)(r.entityfillangle,r.fillangle,w.plotfillangle),o=(0,u.pluck)(r.nullentityfillcolor,r.nullentitycolor,l),e=(0,u.pluckNumber)(r.usevaluesformarkers,f.markers&&f.markers.items&&f.markers.items.length,!(f.markers&&f.markers.application&&f.markers.application.length&&f.markers.definition&&f.markers.definition.length));q.prototype.parseChartAttr.call(this,E),x=m.config,x.origMarginTop=(0,u.pluckNumber)(r.charttopmargin,r.maptopmargin,11),x.origMarginLeft=(0,u.pluckNumber)(r.chartleftmargin,r.mapleftmargin,11),x.origMarginBottom=(0,u.pluckNumber)(r.chartbottommargin,r.mapbottommargin,11),x.origMarginRight=(0,u.pluckNumber)(r.chartrightmargin,r.maprightmargin,11),x.labelsOnTop=(0,u.pluckNumber)(r.entitylabelsontop,1),L=x.style,T=L.inCancolor,_=L.inCanfontFamily,F=L.inCanfontSize,x.entityOpts={baseScaleFactor:x.baseScaleFactor,dataLabels:{style:{fontFamily:_,fontSize:F,lineHeight:L.inCanLineHeight,color:(0,u.pluck)(r.entitylabelcolor,L.inCancolor),bgColor:(0,u.pluck)(r.entitylabelbgcolor)||te,borderColor:(0,u.pluck)(r.entitylabelbordercolor)||te}},fillColor:l,fillAlpha:c,fillRatio:a,fillAngle:n,borderColor:h,borderAlpha:(0,u.pluck)(r.entityborderalpha,r.borderalpha,m.borderAlpha,"100"),borderThickness:(0,u.pluckNumber)(r.showentityborder,r.showborder,1)?(0,u.pluckNumber)(r.entityborderthickness,r.borderthickness,1):0,scaleBorder:(0,u.pluckNumber)(r.scaleentityborder,r.scaleborder,0),hoverFillColor:(0,u.pluck)(r.entityfillhovercolor,r.hoverfillcolor,r.hovercolor,w.plothoverfillcolor),hoverFillAlpha:(0,u.pluck)(r.entityfillhoveralpha,r.hoverfillalpha,r.hoveralpha,w.plothoverfillalpha),hoverFillRatio:(0,u.pluck)(r.entityfillhoverratio,r.hoverfillratio,r.hoverratio,w.plothoverfillratio),hoverFillAngle:(0,u.pluck)(r.entityfillhoverangle,r.hoverfillangle,r.hoverangle,w.plothoverfillangle),hoverBorderThickness:(0,u.pluck)(r.entityborderhoverthickness,r.hoverborderthickness),hoverBorderColor:(0,u.pluck)(r.entityborderhovercolor,h,w.plotbordercolor),hoverBorderAlpha:(0,u.pluck)(r.entityborderhoveralpha,w.plotborderalpha),nullEntityColor:o,nullEntityAlpha:(0,u.pluck)(r.nullentityfillalpha,r.nullentityalpha,c),nullEntityRatio:(0,u.pluck)(r.nullentityfillratio,r.nullentityratio,a),nullEntityAngle:(0,u.pluck)(r.nullentityfillangle,r.nullentityangle,n),connectorColor:(0,u.pluck)(r.labelconnectorcolor,r.connectorcolor,T),connectorAlpha:(0,u.pluck)(r.labelconnectoralpha,r.connectoralpha,"100"),connectorThickness:(0,u.pluckNumber)(r.labelconnectorthickness,r.borderthickness,1),showHoverEffect:(0,u.pluckNumber)(r.showentityhovereffect,r.usehovercolor,r.showhovereffect,1),hoverOnNull:(0,u.pluckNumber)(r.hoveronnull,r.entityhoveronnull,1),labelPadding:(0,u.pluckNumber)(r.labelpadding,5),showLabels:(0,u.pluckNumber)(r.showlabels,1),labelsOnTop:(0,u.pluckNumber)(r.entitylabelsontop,1),includeNameInLabels:(0,u.pluckNumber)(r.includenameinlabels,1),includeValueInLabels:(0,u.pluckNumber)(r.includevalueinlabels,0),useSNameInTooltip:(0,u.pluckNumber)(r.usesnameintooltip,0),useShortName:(0,u.pluckNumber)(r.usesnameinlabels,1),labelSepChar:(0,u.pluck)(r.labelsepchar,Z),showTooltip:(0,u.pluckNumber)(r.showentitytooltip,r.showtooltip,1),tooltipSepChar:(0,u.pluck)(r.tooltipsepchar,", "),tooltext:r.entitytooltext,hideNullEntities:(0,u.pluckNumber)(r.hidenullentities,0),showHiddenEntityBorder:(0,u.pluckNumber)(r.showhiddenentityborder,1),showNullEntityBorder:(0,u.pluckNumber)(r.shownullentityborder,1),hiddenEntityColor:(0,u.pluck)(r.hiddenentitycolor,r.hiddenentityfillcolor,r.hiddenentityalpha||r.hiddenentityfillalpha?o:"ffffff"),hiddenEntityAlpha:(0,u.pluck)(r.hiddenentityalpha,r.hiddenentityfillalpha,.001),shadow:(0,u.pluckNumber)(r.showshadow,m.defaultPlotShadow,w.shadow)},x.markerOpts={dataLabels:{style:{fontFamily:(0,u.pluck)(r.markerfont,_),fontSize:(0,u.pluckNumber)(r.markerfontsize,parseInt(F,10)),fontColor:(0,u.pluck)(r.markerlabelcolor,r.markerfontcolor,T),labelBgColor:(0,u.pluck)(r.markerlabelbgcolor)||te,labelBorderColor:(0,u.pluck)(r.markerlabelbordercolor)||te}},showTooltip:(0,u.pluckNumber)(r.showmarkertooltip,r.showtooltip,1),showLabels:(0,u.pluckNumber)(r.showmarkerlabels,r.showlabels,1),showHoverEffect:(0,u.pluckNumber)(r.showmarkerhovereffect,1),labelPadding:(0,u.pluck)(r.markerlabelpadding,"5"),labelWrapWidth:(0,u.pluckNumber)(r.markerlabelwrapwidth,0),labelWrapHeight:(0,u.pluckNumber)(r.markerlabelwrapheight,0),fillColor:(0,u.pluck)(r.markerfillcolor,r.markerbgcolor,w.markerfillcolor),fillAlpha:(0,u.pluck)(r.markerfillalpha,w.markerfillalpha),fillAngle:(0,u.pluck)(r.markerfillangle,w.markerfillangle),fillRatio:(0,u.pluck)(r.markerfillratio,w.markerfillratio),fillPattern:(0,u.pluck)(r.markerfillpattern,w.markerbgpattern),hoverFillColor:r.markerfillhovercolor,hoverFillAlpha:r.markerfillhoveralpha,hoverFillRatio:r.markerfillhoverratio,hoverFillAngle:r.markerfillhoverangle,borderThickness:(0,u.pluck)(r.markerborderthickness,1),borderColor:(0,u.pluck)(r.markerbordercolor,w.markerbordercolor),borderAlpha:(0,u.pluckNumber)(r.markerborderalpha,w.markerborderalpha),hoverBorderThickness:r.markerborderhoverthickness,hoverBorderColor:r.markerborderhovercolor,hoverBorderAlpha:r.markerborderhoveralpha,radius:(0,u.pluckNumber)(r.markerradius&&(0,u.trimString)(r.markerradius),7),shapeId:(0,u.pluck)(r.defaultmarkershape,ue),labelSepChar:(0,u.pluck)(r.labelsepchar,Z),tooltipSepChar:(0,u.pluck)(r.tooltipsepchar,", "),autoScale:(0,u.pluckNumber)(r.autoscalemarkers,0),tooltext:(0,u.pluck)(b&&b.tooltext,r.markertooltext),dataEnabled:e,valueToRadius:(0,u.pluckNumber)(r.markerradiusfromvalue,1),valueMarkerAlpha:(0,u.pluck)(r.valuemarkeralpha,"75"),hideNull:(0,u.pluckNumber)(r.hidenullmarkers,0),nullRadius:(0,u.pluckNumber)(r.nullmarkerradius,r.markerradius,7),adjustViewPort:(0,u.pluckNumber)(r.adjustviewportformarkers,0),startAngle:(0,u.pluckNumber)(r.markerstartangle,90),maxRadius:(0,u.pluckNumber)(r.maxmarkerradius,0),minRadius:(0,u.pluckNumber)(r.minmarkerradius,0),applyAll:(0,u.pluckNumber)(r.applyallmarkers,0),shadow:(0,u.pluckNumber)(r.showmarkershadow,r.showshadow,0)},x.connectorOpts={showHoverEffect:(0,u.pluckNumber)(r.showconnectorhovereffect,1),thickness:(0,u.pluckNumber)(r.connectorthickness,r.markerconnthickness,"2"),color:(0,u.pluck)(r.connectorcolor,r.markerconncolor,w.markerbordercolor),alpha:(0,u.pluck)(r.connectoralpha,r.markerconnalpha,"100"),hoverThickness:(0,u.pluckNumber)(r.connectorhoverthickness,r.connectorthickness,r.markerconnthickness,"2"),hoverColor:(0,u.pluck)(r.connectorhovercolor,r.connectorcolor,r.markerconncolor,w.markerbordercolor),hoverAlpha:(0,u.pluck)(r.connectorhoveralpha,r.connectoralpha,r.markerconnalpha,"100"),dashed:(0,u.pluckNumber)(r.connectordashed,r.markerconndashed,0),dashLen:(0,u.pluckNumber)(r.connectordashlen,r.markerconndashlen,3),dashGap:(0,u.pluckNumber)(r.connectordashgap,r.markerconndashgap,2),font:(0,u.pluck)(r.connectorfont,r.markerconnfont,_),fontColor:(0,u.pluck)(r.connectorlabelcolor,r.connectorfontcolor,r.markerconnfontcolor,T),fontSize:(0,u.pluckNumber)(r.connectorfontsize,r.markerconnfontsize,parseInt(F,10)),showLabels:(0,u.pluckNumber)(r.showconnectorlabels,r.showmarkerlabels,r.showlabels,1),labelBgColor:(0,u.pluck)(r.connectorlabelbgcolor,r.markerconnlabelbgcolor,w.plotfillcolor),labelBorderColor:(0,u.pluck)(r.connectorlabelbordercolor,r.markerconnlabelbordercolor,w.markerbordercolor),shadow:(0,u.pluckNumber)(r.showconnectorshadow,r.showmarkershadow,r.showshadow,0),showTooltip:(0,u.pluckNumber)(r.showconnectortooltip,r.showmarkertooltip,r.showtooltip,1),tooltext:(0,u.pluck)(b&&b.connectortooltext,r.connectortooltext),hideOpen:(0,u.pluckNumber)(r.hideopenconnectors,1)},x.adjustViewPortForMarkers=(0,u.pluckNumber)(r.adjustviewportformarkers,e)},H._attachMouseEvents=function(){var E=this,m=E.getFromEnv("eventListeners"),x=E.getFromEnv("chart-container");m.push(K.default.listen(x,u.hasTouch?"touchstart":"click",U.searchMouseMove,E)),m.push(K.default.listen(window.document,u.hasTouch?"touchstart":"mousemove",U.searchMouseMove,E))},H._dispose=function(){var E=this,m=E.getFromEnv("chart-container");u.hasTouch&&(K.default.unlisten(m,"touchstart",U.searchMouseMove),K.default.unlisten(window.document,"touchstart",U.searchMouseMove)),K.default.unlisten(m,"click",U.searchMouseMove),K.default.unlisten(window.document,"mousemove",U.searchMouseMove),q.prototype._dispose.call(this)},U.searchMouseMove=function(E){var m,x=E.data,f=x.config,r=x.getDatasets(),b=r[1],w=b&&b.getFromEnv("toolTipController"),T=b&&b.config.currentToolTip,_=x.config.lastHoveredPoint,F={};!x.getFromEnv("chart-container")||x.config.lastInteractionEvent===E.originalEvent||(x.config.lastInteractionEvent=E.originalEvent,(m=ve(E,x))&&m.insideCanvas?(f.lastMouseEvent=E,F={x:m.chartX,y:m.chartY},x._searchNearestNeighbour(F,E)):(_&&b&&b.hoverOutFn(_.element),x.config.lastHoveredPoint=null,w&&w.hide(T)))},H._searchNearestNeighbour=function(E,m){var x=this,f=x.getDatasets(),r=f[1],b;if(r){if(!r.components.kDTree)return;b=r.getElement(E),b?r.highlightPoint(b,m):r.highlightPoint(!1,m)}},H._createLayers=function(){q.prototype._createLayers.call(this),this._attachMouseEvents()},H._parseBackgroundCosmetics=function(){var E=this,m=E.getChildren("background")[0],x=m.config,f=E.getChildren("colorPalette")[0],r=E.getFromEnv("chart-attrib"),b;b=x.showBorder=(0,u.pluckNumber)(r.showcanvasborder,1),x.borderWidth=b?(0,u.pluckNumber)(r.canvasborderthickness,1):0,x.borderRadius=x.borderRadius=(0,u.pluckNumber)(r.canvasborderradius,0),x.borderDashStyle=x.borderDashStyle=(0,u.pluckNumber)(r.borderdashed,0)?(0,u.getDashStyle)((0,u.pluckNumber)(r.borderdashlen,4),(0,u.pluckNumber)(r.borderdashgap,2)):N,x.borderAlpha=(0,u.pluck)(r.canvasborderalpha,f.borderAlpha),x.borderColor=x.borderColor=(0,u.convertColor)((0,u.pluck)(r.canvasbordercolor,f&&f.borderColor),x.borderAlpha)},H._getBackgroundCosmetics=function(){var E=this,m=E.getFromEnv("chart-attrib")||E.jsonData.map,x=E.getChildren("colorPalette")[0];return{FCcolor:{color:(0,u.pluck)(m.bgcolor,m.canvasbgcolor,x.bgcolor),alpha:(0,u.pluck)(m.bgalpha,m.canvasbgalpha,x.bgalpha),angle:(0,u.pluck)(m.bgangle,m.canvasbgangle,x.bgangle),ratio:(0,u.pluck)(m.bgratio,m.canvasbgratio,x.bgratio)}}},H._parseCanvasCosmetics=function(){q.prototype._parseCanvasCosmetics.call(this);var E=this,m=E.config,x=E.getFromEnv("chart-attrib")||E.jsonData.map,f=E.getChildren("canvas")[0].config;m.origMarginTop=(0,u.pluckNumber)(x.maptopmargin,11),m.origMarginLeft=(0,u.pluckNumber)(x.mapleftmargin,11),m.origMarginBottom=(0,u.pluckNumber)(x.mapbottommargin,11),m.origMarginRight=(0,u.pluckNumber)(x.maprightmargin,11),m.origCanvasLeftMargin=(0,u.pluckNumber)(x.canvasleftmargin,0),m.origCanvasRightMargin=(0,u.pluckNumber)(x.canvasrightmargin,0),m.origCanvasTopMargin=(0,u.pluckNumber)(x.canvastopmargin,0),m.origCanvasBottomMargin=(0,u.pluckNumber)(x.canvasbottommargin,0),f.canvasBorderRadius=(0,u.pluckNumber)(x.canvasborderradius,0),f.origCanvasTopPad=(0,u.pluckNumber)(x.canvastoppadding,0),f.origCanvasBottomPad=(0,u.pluckNumber)(x.canvasbottompadding,0),f.origCanvasLeftPad=(0,u.pluckNumber)(x.canvasleftpadding,0),f.origCanvasRightPad=(0,u.pluckNumber)(x.canvasrightpadding,0)},H.preliminaryScaling=function(){for(var E=this,m=E.jsonData,x=m.markers&&m.markers.items||[],f=x&&x.length||0,r=1/0,b=1/0,w=-1/0,T=-1/0,_,F,L;f--;)L=x[f],_=Number(L.x),F=Number(L.y),r=re(r,_),b=re(b,F),w=ce(w,_),T=ce(T,F);return{x:r,y:b,x1:w,y1:T}},H.getScalingParameters=function(E,m,x,f){var r=this,b=E/m,w=x/(E*r.config.baseScaleFactor),T=f/(m*r.config.baseScaleFactor),_=0,F=0,L,h;return w>T?(L=T,_+=(x-f*b)/2,h=200/(m*L)):(L=w,F+=(f-x/b)/2,h=200/(E*L)),{scaleFactor:L,strokeWidth:h,translateX:_,translateY:F}},H.calculateMarkerBounds=function(E,m,x){var f=this,r=f.config,b=r.markerOpts,w=f.getDatasets(),T=f.getDataLimits(),_=T.dataMin,F=T.dataMax,L=b.hideNull,h=b.nullRadius,l=b.valueToRadius,c,a,n,o,e,t,s,i,g,v=1/0,d=1/0,p=-1/0,C=-1/0,k,y,S,I,D;for(t=0,g=w.length;t<g;t++)i=w[t],s=i.getName(),s==="markers"&&(c=i);if(c){c.calculateMarkerRadiusLimits(),a=c.config||{},n=a.minRadius,o=a.maxRadius,e=c.components&&c.components.markerObjs||{};for(t in e){if(D=e[t],r=D.config,I=r.definition||{},r.cleanValue!==null)l&&I.radius===M&&(r.radius=n+(o-n)*(r.cleanValue-_)/(F-_));else{L?r.__hideMarker=!0:r.radius===null&&(r.radius=h);continue}S=Number(r.radius),k=(Number(I.x)+m)*E,y=(Number(I.y)+x)*E,v=re(v,k-S),d=re(d,y-S),p=ce(p,k+S),C=ce(C,y+S)}}return{x:v,y:d,x1:p,y1:C}},H._spaceManager=function(){var E,m=this,x=m.config,f=m.getChildren("legend")&&m.getChildren("legend")[0],r=m.getChildren("gLegend")&&m.getChildren("gLegend")[0],b=f&&f.config.legendPos?f.config.legendPos.split("-"):r&&r.conf.legendPosition?r.conf.legendPosition.split("-"):[],w,T=m.getFromEnv("chart-attrib"),_=x.showBorder,F=x.origMarginLeft,L=x.origMarginTop,h=m.config.baseWidth,l=m.config.baseHeight,c,a,n,o,e={},t=0,s=0,i,g,v,d,p=x.markerOpts,C=x.borderWidth=_?(0,u.pluckNumber)(T.borderthickness,1):0;m._allocateSpace({top:C,bottom:C,left:C,right:C}),m._allocateSpace(m._manageActionBarSpace&&m._manageActionBarSpace(x.availableHeight*.225)||{}),b[0]==="right"||b[0]==="left"?v=x.canvasWidth*.3:v=x.canvasHeight*.3,w=b[0]===u.POSITION_TOP||b[0]===he?x.canvasHeight:x.canvasWidth,x.showLegend&&m._manageLegendSpace(v),E=b[0]===he||b[0]===u.POSITION_TOP?x.canvasHeight*.225:x.canvasWidth*.225,b[0]==="top"&&(L+=w-x.canvasHeight),d=m._manageChartMenuBar(E),b[0]==="left"&&(F+=w-x.canvasWidth),a=x.canvasWidth,n=x.canvasHeight,p.dataEnabled?(x.adjustViewPortForMarkers?(e=m.preliminaryScaling(),e.x1>h&&(h=e.x1),e.x<0&&(h+=-e.x,t=-e.x),e.y1>l&&(l=e.y1),e.y<0&&(l+=-e.y,s=-e.y),c=m.getScalingParameters(h,l,a,n),e=m.calculateMarkerBounds(c.scaleFactor*m.config.baseScaleFactor,t,s),i=n,g=a,e.x<0&&(F+=-e.x,a+=e.x),e.y<0&&(L+=-e.y,n+=e.y),e.x1>g&&(a-=e.x1-g),e.y1>i&&(n-=e.y1-i)):(c=m.getScalingParameters(h,l,a,n),m.calculateMarkerBounds(c.scaleFactor*m.config.baseScaleFactor,t,s)),c=m.getScalingParameters(h,l,a,n),F+=t*c.scaleFactor*m.config.baseScaleFactor,L+=s*c.scaleFactor*m.config.baseScaleFactor):c=m.getScalingParameters(h,l,a,n),m.config.scalingParams=c,o=c.scaleFactor,c.translateX=c.translateX+F,c.translateY=c.translateY+L+d.top||0,c.sFactor=o*m.config.baseScaleFactor*100/100,c.transformStr=["t",c.translateX,",",c.translateY,"s",o,",",o,",0,0"].join(""),m.config.annotationConfig={id:"Geo",showbelow:0,autoscale:0,grpxshift:c.translateX?c.translateX:0,grpyshift:c.translateY?c.translateY:0,xscale:(o?o*m.config.baseScaleFactor:1)*100,yscale:(o?o*m.config.baseScaleFactor:1)*100,scaletext:1,options:{useTracker:!0}}},H.getDataLimits=function(){var E=this,m=E.getDatasets(),x=m.length,f,r=1/0,b=-1/0,w,T;for(T=0;T<x;T++)f=m[T],w=f.getDataLimits(),r=re(r,w.min),b=ce(b,w.max);return{dataMin:r,dataMax:b}},H.getEntityPaths=function(E){var m={},x=this.config.entities,f;if(E){for(f in x)m[f]=x[f];return m}return x},H.checkComplete=function(){var E=this;E.config.entityFlag&&E.config.entitiesReady&&(E.config.entityFlag=!1,E.config.markersDrawn=!0,E.fireChartInstanceEvent("internal.mapdrawingcomplete",{renderer:E}))},U}(Fe.default),ie=fe;return We.default=ie,We}var Jt=Oe;et.__esModule=!0;var Rt=et.default=void 0,Mt=Jt(Qt()),er=et.Maps=Mt.default,tr={name:"maps",type:"package",requiresFusionCharts:!0,extension:function(pe){return pe.addDep(Mt.default)}};Rt=et.default=tr;const or=Vt({__proto__:null,Maps:er,get default(){return Rt}},[et]);export{or as i};
